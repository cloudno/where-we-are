parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"CA9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._Math=void 0;for(var t=[],r=0;r<256;r++)t[r]=(r<16?"0":"")+r.toString(16);var n={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0,a=4294967295*Math.random()|0;return(t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&o|128]+t[o>>8&255]+"-"+t[o>>16&255]+t[o>>24&255]+t[255&a]+t[a>>8&255]+t[a>>16&255]+t[a>>24&255]).toUpperCase()},clamp:function(t,r,n){return Math.max(r,Math.min(n,t))},euclideanModulo:function(t,r){return(t%r+r)%r},mapLinear:function(t,r,n,o,a){return o+(t-r)*(a-o)/(n-r)},lerp:function(t,r,n){return(1-n)*t+n*r},smoothstep:function(t,r,n){return t<=r?0:t>=n?1:(t=(t-r)/(n-r))*t*(3-2*t)},smootherstep:function(t,r,n){return t<=r?0:t>=n?1:(t=(t-r)/(n-r))*t*t*(t*(6*t-15)+10)},randInt:function(t,r){return t+Math.floor(Math.random()*(r-t+1))},randFloat:function(t,r){return t+Math.random()*(r-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*n.DEG2RAD},radToDeg:function(t){return t*n.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};exports._Math=n;
},{}],"kutO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Quaternion=i;var t=require("./Math.js");function i(t,i,s,h){this._x=t||0,this._y=i||0,this._z=s||0,this._w=void 0!==h?h:1}Object.assign(i,{slerp:function(t,i,s,h){return s.copy(t).slerp(i,h)},slerpFlat:function(t,i,s,h,_,n,r){var a=s[h+0],e=s[h+1],o=s[h+2],u=s[h+3],l=_[n+0],c=_[n+1],y=_[n+2],x=_[n+3];if(u!==x||a!==l||e!==c||o!==y){var z=1-r,w=a*l+e*c+o*y+u*x,f=w>=0?1:-1,C=1-w*w;if(C>Number.EPSILON){var g=Math.sqrt(C),p=Math.atan2(g,w*f);z=Math.sin(z*p)/g,r=Math.sin(r*p)/g}var b=r*f;if(a=a*z+l*b,e=e*z+c*b,o=o*z+y*b,u=u*z+x*b,z===1-r){var M=1/Math.sqrt(a*a+e*e+o*o+u*u);a*=M,e*=M,o*=M,u*=M}}t[i]=a,t[i+1]=e,t[i+2]=o,t[i+3]=u}}),Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(i.prototype,{isQuaternion:!0,set:function(t,i,s,h){return this._x=t,this._y=i,this._z=s,this._w=h,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var s=t._x,h=t._y,_=t._z,n=t.order,r=Math.cos,a=Math.sin,e=r(s/2),o=r(h/2),u=r(_/2),l=a(s/2),c=a(h/2),y=a(_/2);return"XYZ"===n?(this._x=l*o*u+e*c*y,this._y=e*c*u-l*o*y,this._z=e*o*y+l*c*u,this._w=e*o*u-l*c*y):"YXZ"===n?(this._x=l*o*u+e*c*y,this._y=e*c*u-l*o*y,this._z=e*o*y-l*c*u,this._w=e*o*u+l*c*y):"ZXY"===n?(this._x=l*o*u-e*c*y,this._y=e*c*u+l*o*y,this._z=e*o*y+l*c*u,this._w=e*o*u-l*c*y):"ZYX"===n?(this._x=l*o*u-e*c*y,this._y=e*c*u+l*o*y,this._z=e*o*y-l*c*u,this._w=e*o*u+l*c*y):"YZX"===n?(this._x=l*o*u+e*c*y,this._y=e*c*u+l*o*y,this._z=e*o*y-l*c*u,this._w=e*o*u-l*c*y):"XZY"===n&&(this._x=l*o*u-e*c*y,this._y=e*c*u-l*o*y,this._z=e*o*y+l*c*u,this._w=e*o*u+l*c*y),!1!==i&&this._onChangeCallback(),this},setFromAxisAngle:function(t,i){var s=i/2,h=Math.sin(s);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(s),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var i,s=t.elements,h=s[0],_=s[4],n=s[8],r=s[1],a=s[5],e=s[9],o=s[2],u=s[6],l=s[10],c=h+a+l;return c>0?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(u-e)*i,this._y=(n-o)*i,this._z=(r-_)*i):h>a&&h>l?(i=2*Math.sqrt(1+h-a-l),this._w=(u-e)/i,this._x=.25*i,this._y=(_+r)/i,this._z=(n+o)/i):a>l?(i=2*Math.sqrt(1+a-h-l),this._w=(n-o)/i,this._x=(_+r)/i,this._y=.25*i,this._z=(e+u)/i):(i=2*Math.sqrt(1+l-h-a),this._w=(r-_)/i,this._x=(n+o)/i,this._y=(e+u)/i,this._z=.25*i),this._onChangeCallback(),this},setFromUnitVectors:function(t,i){var s=t.dot(i)+1;return s<1e-6?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=s),this.normalize()},angleTo:function(i){return 2*Math.acos(Math.abs(t._Math.clamp(this.dot(i),-1,1)))},rotateTowards:function(t,i){var s=this.angleTo(t);if(0===s)return this;var h=Math.min(1,i/s);return this.slerp(t,h),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,i){var s=t._x,h=t._y,_=t._z,n=t._w,r=i._x,a=i._y,e=i._z,o=i._w;return this._x=s*o+n*r+h*e-_*a,this._y=h*o+n*a+_*r-s*e,this._z=_*o+n*e+s*a-h*r,this._w=n*o-s*r-h*a-_*e,this._onChangeCallback(),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var s=this._x,h=this._y,_=this._z,n=this._w,r=n*t._w+s*t._x+h*t._y+_*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=n,this._x=s,this._y=h,this._z=_,this;var a=1-r*r;if(a<=Number.EPSILON){var e=1-i;return this._w=e*n+i*this._w,this._x=e*s+i*this._x,this._y=e*h+i*this._y,this._z=e*_+i*this._z,this.normalize(),this._onChangeCallback(),this}var o=Math.sqrt(a),u=Math.atan2(o,r),l=Math.sin((1-i)*u)/o,c=Math.sin(i*u)/o;return this._w=n*l+this._w*c,this._x=s*l+this._x*c,this._y=h*l+this._y*c,this._z=_*l+this._z*c,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});
},{"./Math.js":"CA9T"}],"QOxd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector3=r;var t=require("./Math.js"),i=require("./Quaternion.js"),s=new r,h=new i.Quaternion;function r(t,i,s){this.x=t||0,this.y=i||0,this.z=s||0}Object.assign(r.prototype,{isVector3:!0,set:function(t,i,s){return this.x=t,this.y=i,this.z=s,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},sub:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(h.setFromEuler(t))},applyAxisAngle:function(t,i){return this.applyQuaternion(h.setFromAxisAngle(t,i))},applyMatrix3:function(t){var i=this.x,s=this.y,h=this.z,r=t.elements;return this.x=r[0]*i+r[3]*s+r[6]*h,this.y=r[1]*i+r[4]*s+r[7]*h,this.z=r[2]*i+r[5]*s+r[8]*h,this},applyMatrix4:function(t){var i=this.x,s=this.y,h=this.z,r=t.elements,n=1/(r[3]*i+r[7]*s+r[11]*h+r[15]);return this.x=(r[0]*i+r[4]*s+r[8]*h+r[12])*n,this.y=(r[1]*i+r[5]*s+r[9]*h+r[13])*n,this.z=(r[2]*i+r[6]*s+r[10]*h+r[14])*n,this},applyQuaternion:function(t){var i=this.x,s=this.y,h=this.z,r=t.x,n=t.y,e=t.z,o=t.w,a=o*i+n*h-e*s,u=o*s+e*i-r*h,c=o*h+r*s-n*i,l=-r*i-n*s-e*h;return this.x=a*o+l*-r+u*-e-c*-n,this.y=u*o+l*-n+c*-r-a*-e,this.z=c*o+l*-e+a*-n-u*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var i=this.x,s=this.y,h=this.z,r=t.elements;return this.x=r[0]*i+r[4]*s+r[8]*h,this.y=r[1]*i+r[5]*s+r[9]*h,this.z=r[2]*i+r[6]*s+r[10]*h,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this},clampLength:function(t,i){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(i,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t)},cross:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)},crossVectors:function(t,i){var s=t.x,h=t.y,r=t.z,n=i.x,e=i.y,o=i.z;return this.x=h*o-r*e,this.y=r*n-s*o,this.z=s*e-h*n,this},projectOnVector:function(t){var i=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(i)},projectOnPlane:function(t){return s.copy(this).projectOnVector(t),this.sub(s)},reflect:function(t){return this.sub(s.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(i){var s=this.dot(i)/Math.sqrt(this.lengthSq()*i.lengthSq());return Math.acos(t._Math.clamp(s,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,s=this.y-t.y,h=this.z-t.z;return i*i+s*s+h*h},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,i,s){var h=Math.sin(i)*t;return this.x=h*Math.sin(s),this.y=Math.cos(i)*t,this.z=h*Math.cos(s),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,i,s){return this.x=t*Math.sin(i),this.y=s,this.z=t*Math.cos(i),this},setFromMatrixPosition:function(t){var i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this},setFromMatrixScale:function(t){var i=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),h=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=s,this.z=h,this},setFromMatrixColumn:function(t,i){return this.fromArray(t.elements,4*i)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},fromBufferAttribute:function(t,i,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}});
},{"./Math.js":"CA9T","./Quaternion.js":"kutO"}],"q1h8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Matrix4=h;var t=require("./Vector3.js"),e=new t.Vector3,n=new h,r=new t.Vector3(0,0,0),s=new t.Vector3(1,1,1),i=new t.Vector3,o=new t.Vector3,a=new t.Vector3;function h(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(h.prototype,{isMatrix4:!0,set:function(t,e,n,r,s,i,o,a,h,u,l,c,m,f,v,x){var y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=s,y[5]=i,y[9]=o,y[13]=a,y[2]=h,y[6]=u,y[10]=l,y[14]=c,y[3]=m,y[7]=f,y[11]=v,y[15]=x,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new h).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var n=this.elements,r=t.elements,s=1/e.setFromMatrixColumn(t,0).length(),i=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s,n[3]=0,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,s=t.z,i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),h=Math.sin(r),u=Math.cos(s),l=Math.sin(s);if("XYZ"===t.order){var c=i*u,m=i*l,f=o*u,v=o*l;e[0]=a*u,e[4]=-a*l,e[8]=h,e[1]=m+f*h,e[5]=c-v*h,e[9]=-o*a,e[2]=v-c*h,e[6]=f+m*h,e[10]=i*a}else if("YXZ"===t.order){var x=a*u,y=a*l,M=h*u,p=h*l;e[0]=x+p*o,e[4]=M*o-y,e[8]=i*h,e[1]=i*l,e[5]=i*u,e[9]=-o,e[2]=y*o-M,e[6]=p+x*o,e[10]=i*a}else if("ZXY"===t.order){x=a*u,y=a*l,M=h*u,p=h*l;e[0]=x-p*o,e[4]=-i*l,e[8]=M+y*o,e[1]=y+M*o,e[5]=i*u,e[9]=p-x*o,e[2]=-i*h,e[6]=o,e[10]=i*a}else if("ZYX"===t.order){c=i*u,m=i*l,f=o*u,v=o*l;e[0]=a*u,e[4]=f*h-m,e[8]=c*h+v,e[1]=a*l,e[5]=v*h+c,e[9]=m*h-f,e[2]=-h,e[6]=o*a,e[10]=i*a}else if("YZX"===t.order){var d=i*a,z=i*h,g=o*a,w=o*h;e[0]=a*u,e[4]=w-d*l,e[8]=g*l+z,e[1]=l,e[5]=i*u,e[9]=-o*u,e[2]=-h*u,e[6]=z*l+g,e[10]=d-w*l}else if("XZY"===t.order){d=i*a,z=i*h,g=o*a,w=o*h;e[0]=a*u,e[4]=-l,e[8]=h*u,e[1]=d*l+w,e[5]=i*u,e[9]=z*l-g,e[2]=g*l-z,e[6]=o*u,e[10]=w*l+d}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(r,t,s)},lookAt:function(t,e,n){var r=this.elements;return a.subVectors(t,e),0===a.lengthSq()&&(a.z=1),a.normalize(),i.crossVectors(n,a),0===i.lengthSq()&&(1===Math.abs(n.z)?a.x+=1e-4:a.z+=1e-4,a.normalize(),i.crossVectors(n,a)),i.normalize(),o.crossVectors(a,i),r[0]=i.x,r[4]=o.x,r[8]=a.x,r[1]=i.y,r[5]=o.y,r[9]=a.y,r[2]=i.z,r[6]=o.z,r[10]=a.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,s=this.elements,i=n[0],o=n[4],a=n[8],h=n[12],u=n[1],l=n[5],c=n[9],m=n[13],f=n[2],v=n[6],x=n[10],y=n[14],M=n[3],p=n[7],d=n[11],z=n[15],g=r[0],w=r[4],k=r[8],E=r[12],R=r[1],V=r[5],F=r[9],X=r[13],Y=r[2],Z=r[6],b=r[10],A=r[14],T=r[3],C=r[7],P=r[11],S=r[15];return s[0]=i*g+o*R+a*Y+h*T,s[4]=i*w+o*V+a*Z+h*C,s[8]=i*k+o*F+a*b+h*P,s[12]=i*E+o*X+a*A+h*S,s[1]=u*g+l*R+c*Y+m*T,s[5]=u*w+l*V+c*Z+m*C,s[9]=u*k+l*F+c*b+m*P,s[13]=u*E+l*X+c*A+m*S,s[2]=f*g+v*R+x*Y+y*T,s[6]=f*w+v*V+x*Z+y*C,s[10]=f*k+v*F+x*b+y*P,s[14]=f*E+v*X+x*A+y*S,s[3]=M*g+p*R+d*Y+z*T,s[7]=M*w+p*V+d*Z+z*C,s[11]=M*k+p*F+d*b+z*P,s[15]=M*E+p*X+d*A+z*S,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],i=t[1],o=t[5],a=t[9],h=t[13],u=t[2],l=t[6],c=t[10],m=t[14];return t[3]*(+s*a*l-r*h*l-s*o*c+n*h*c+r*o*m-n*a*m)+t[7]*(+e*a*m-e*h*c+s*i*c-r*i*m+r*h*u-s*a*u)+t[11]*(+e*h*l-e*o*m-s*i*l+n*i*m+s*o*u-n*h*u)+t[15]*(-r*o*u-e*a*l+e*o*c+r*i*l-n*i*c+n*a*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){var n=this.elements,r=t.elements,s=r[0],i=r[1],o=r[2],a=r[3],h=r[4],u=r[5],l=r[6],c=r[7],m=r[8],f=r[9],v=r[10],x=r[11],y=r[12],M=r[13],p=r[14],d=r[15],z=f*p*c-M*v*c+M*l*x-u*p*x-f*l*d+u*v*d,g=y*v*c-m*p*c-y*l*x+h*p*x+m*l*d-h*v*d,w=m*M*c-y*f*c+y*u*x-h*M*x-m*u*d+h*f*d,k=y*f*l-m*M*l-y*u*v+h*M*v+m*u*p-h*f*p,E=s*z+i*g+o*w+a*k;if(0===E){var R="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(R);return console.warn(R),this.identity()}var V=1/E;return n[0]=z*V,n[1]=(M*v*a-f*p*a-M*o*x+i*p*x+f*o*d-i*v*d)*V,n[2]=(u*p*a-M*l*a+M*o*c-i*p*c-u*o*d+i*l*d)*V,n[3]=(f*l*a-u*v*a-f*o*c+i*v*c+u*o*x-i*l*x)*V,n[4]=g*V,n[5]=(m*p*a-y*v*a+y*o*x-s*p*x-m*o*d+s*v*d)*V,n[6]=(y*l*a-h*p*a-y*o*c+s*p*c+h*o*d-s*l*d)*V,n[7]=(h*v*a-m*l*a+m*o*c-s*v*c-h*o*x+s*l*x)*V,n[8]=w*V,n[9]=(y*f*a-m*M*a-y*i*x+s*M*x+m*i*d-s*f*d)*V,n[10]=(h*M*a-y*u*a+y*i*c-s*M*c-h*i*d+s*u*d)*V,n[11]=(m*u*a-h*f*a-m*i*c+s*f*c+h*i*x-s*u*x)*V,n[12]=k*V,n[13]=(m*M*o-y*f*o+y*i*v-s*M*v-m*i*p+s*f*p)*V,n[14]=(y*u*o-h*M*o-y*i*l+s*M*l+h*i*p-s*u*p)*V,n[15]=(h*f*o-m*u*o+m*i*l-s*f*l-h*i*v+s*u*v)*V,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),s=1-n,i=t.x,o=t.y,a=t.z,h=s*i,u=s*o;return this.set(h*i+n,h*o-r*a,h*a+r*o,0,h*o+r*a,u*o+n,u*a-r*i,0,h*a-r*o,u*a+r*i,s*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,s=e._x,i=e._y,o=e._z,a=e._w,h=s+s,u=i+i,l=o+o,c=s*h,m=s*u,f=s*l,v=i*u,x=i*l,y=o*l,M=a*h,p=a*u,d=a*l,z=n.x,g=n.y,w=n.z;return r[0]=(1-(v+y))*z,r[1]=(m+d)*z,r[2]=(f-p)*z,r[3]=0,r[4]=(m-d)*g,r[5]=(1-(c+y))*g,r[6]=(x+M)*g,r[7]=0,r[8]=(f+p)*w,r[9]=(x-M)*w,r[10]=(1-(c+v))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,r,s){var i=this.elements,o=e.set(i[0],i[1],i[2]).length(),a=e.set(i[4],i[5],i[6]).length(),h=e.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),t.x=i[12],t.y=i[13],t.z=i[14],n.copy(this);var u=1/o,l=1/a,c=1/h;return n.elements[0]*=u,n.elements[1]*=u,n.elements[2]*=u,n.elements[4]*=l,n.elements[5]*=l,n.elements[6]*=l,n.elements[8]*=c,n.elements[9]*=c,n.elements[10]*=c,r.setFromRotationMatrix(n),s.x=o,s.y=a,s.z=h,this},makePerspective:function(t,e,n,r,s,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*s/(e-t),h=2*s/(n-r),u=(e+t)/(e-t),l=(n+r)/(n-r),c=-(i+s)/(i-s),m=-2*i*s/(i-s);return o[0]=a,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=h,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=m,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,r,s,i){var o=this.elements,a=1/(e-t),h=1/(n-r),u=1/(i-s),l=(e+t)*a,c=(n+r)*h,m=(i+s)*u;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-m,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});
},{"./Vector3.js":"QOxd"}],"0HfK":[function(require,module,exports) {
"use strict";function e(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventDispatcher=e,Object.assign(e.prototype,{addEventListener:function(e,i){void 0===this._listeners&&(this._listeners={});var t=this._listeners;void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(i)&&t[e].push(i)},hasEventListener:function(e,i){if(void 0===this._listeners)return!1;var t=this._listeners;return void 0!==t[e]&&-1!==t[e].indexOf(i)},removeEventListener:function(e,i){if(void 0!==this._listeners){var t=this._listeners[e];if(void 0!==t){var s=t.indexOf(i);-1!==s&&t.splice(s,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var i=this._listeners[e.type];if(void 0!==i){e.target=this;for(var t=i.slice(0),s=0,n=t.length;s<n;s++)t[s].call(this,e)}}}});
},{}],"rvFC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Euler=r;var t=require("./Quaternion.js"),i=require("./Vector3.js"),s=require("./Matrix4.js"),a=require("./Math.js"),h=new s.Matrix4,n=new t.Quaternion;function r(t,i,s,a){this._x=t||0,this._y=i||0,this._z=s||0,this._order=a||r.DefaultOrder}r.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],r.DefaultOrder="XYZ",Object.defineProperties(r.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(r.prototype,{isEuler:!0,set:function(t,i,s,a){return this._x=t,this._y=i,this._z=s,this._order=a||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,i,s){var h=a._Math.clamp,n=t.elements,r=n[0],e=n[4],o=n[8],_=n[1],u=n[5],c=n[9],M=n[2],l=n[6],x=n[10];return"XYZ"===(i=i||this._order)?(this._y=Math.asin(h(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,x),this._z=Math.atan2(-e,r)):(this._x=Math.atan2(l,u),this._z=0)):"YXZ"===i?(this._x=Math.asin(-h(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,x),this._z=Math.atan2(_,u)):(this._y=Math.atan2(-M,r),this._z=0)):"ZXY"===i?(this._x=Math.asin(h(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(-M,x),this._z=Math.atan2(-e,u)):(this._y=0,this._z=Math.atan2(_,r))):"ZYX"===i?(this._y=Math.asin(-h(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(l,x),this._z=Math.atan2(_,r)):(this._x=0,this._z=Math.atan2(-e,u))):"YZX"===i?(this._z=Math.asin(h(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-M,r)):(this._x=0,this._y=Math.atan2(o,x))):"XZY"===i?(this._z=Math.asin(-h(e,-1,1)),Math.abs(e)<.9999999?(this._x=Math.atan2(l,u),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,x),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+i),this._order=i,!1!==s&&this._onChangeCallback(),this},setFromQuaternion:function(t,i,s){return h.makeRotationFromQuaternion(t),this.setFromRotationMatrix(h,i,s)},setFromVector3:function(t,i){return this.set(t.x,t.y,t.z,i||this._order)},reorder:function(t){return n.setFromEuler(this),this.setFromQuaternion(n,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new i.Vector3(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});
},{"./Quaternion.js":"kutO","./Vector3.js":"QOxd","./Matrix4.js":"q1h8","./Math.js":"CA9T"}],"Pbuq":[function(require,module,exports) {
"use strict";function t(){this.mask=1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Layers=t,Object.assign(t.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});
},{}],"Aj5L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Matrix3=r;var t=require("./Vector3.js"),e=new t.Vector3;function r(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(r.prototype,{isMatrix3:!0,set:function(t,e,r,n,s,i,o,a,u){var l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=s,l[5]=a,l[6]=r,l[7]=i,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,s=this.elements,i=r[0],o=r[3],a=r[6],u=r[1],l=r[4],h=r[7],c=r[2],m=r[5],f=r[8],v=n[0],p=n[3],y=n[6],M=n[1],x=n[4],g=n[7],d=n[2],E=n[5],w=n[8];return s[0]=i*v+o*M+a*d,s[3]=i*p+o*x+a*E,s[6]=i*y+o*g+a*w,s[1]=u*v+l*M+h*d,s[4]=u*p+l*x+h*E,s[7]=u*y+l*g+h*w,s[2]=c*v+m*M+f*d,s[5]=c*p+m*x+f*E,s[8]=c*y+m*g+f*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],n=t[2],s=t[3],i=t[4],o=t[5],a=t[6],u=t[7],l=t[8];return e*i*l-e*o*u-r*s*l+r*o*a+n*s*u-n*i*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=t.elements,n=this.elements,s=r[0],i=r[1],o=r[2],a=r[3],u=r[4],l=r[5],h=r[6],c=r[7],m=r[8],f=m*u-l*c,v=l*h-m*a,p=c*a-u*h,y=s*f+i*v+o*p;if(0===y){var M="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(M);return console.warn(M),this.identity()}var x=1/y;return n[0]=f*x,n[1]=(o*c-m*i)*x,n[2]=(l*i-o*u)*x,n[3]=v*x,n[4]=(m*s-o*h)*x,n[5]=(o*a-l*s)*x,n[6]=p*x,n[7]=(i*h-c*s)*x,n[8]=(u*s-i*a)*x,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,r,n,s,i,o){var a=Math.cos(s),u=Math.sin(s);this.set(r*a,r*u,-r*(a*i+u*o)+i+t,-n*u,n*a,-n*(-u*i+a*o)+o+e,0,0,1)},scale:function(t,e){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=e,r[4]*=e,r[7]*=e,this},rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=this.elements,s=n[0],i=n[3],o=n[6],a=n[1],u=n[4],l=n[7];return n[0]=e*s+r*a,n[3]=e*i+r*u,n[6]=e*o+r*l,n[1]=-r*s+e*a,n[4]=-r*i+e*u,n[7]=-r*o+e*l,this},translate:function(t,e){var r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=e*r[2],r[4]+=e*r[5],r[7]+=e*r[8],this},equals:function(t){for(var e=this.elements,r=t.elements,n=0;n<9;n++)if(e[n]!==r[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var r=0;r<9;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}});
},{"./Vector3.js":"QOxd"}],"PJkd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthFormat=exports.RGBEFormat=exports.LuminanceAlphaFormat=exports.LuminanceFormat=exports.RGBAFormat=exports.RGBFormat=exports.AlphaFormat=exports.UnsignedInt248Type=exports.UnsignedShort565Type=exports.UnsignedShort5551Type=exports.UnsignedShort4444Type=exports.HalfFloatType=exports.FloatType=exports.UnsignedIntType=exports.IntType=exports.UnsignedShortType=exports.ShortType=exports.ByteType=exports.UnsignedByteType=exports.LinearMipMapLinearFilter=exports.LinearMipmapLinearFilter=exports.LinearMipMapNearestFilter=exports.LinearMipmapNearestFilter=exports.LinearFilter=exports.NearestMipMapLinearFilter=exports.NearestMipmapLinearFilter=exports.NearestMipMapNearestFilter=exports.NearestMipmapNearestFilter=exports.NearestFilter=exports.MirroredRepeatWrapping=exports.ClampToEdgeWrapping=exports.RepeatWrapping=exports.CubeUVRefractionMapping=exports.CubeUVReflectionMapping=exports.SphericalReflectionMapping=exports.EquirectangularRefractionMapping=exports.EquirectangularReflectionMapping=exports.CubeRefractionMapping=exports.CubeReflectionMapping=exports.UVMapping=exports.ACESFilmicToneMapping=exports.CineonToneMapping=exports.Uncharted2ToneMapping=exports.ReinhardToneMapping=exports.LinearToneMapping=exports.NoToneMapping=exports.AddOperation=exports.MixOperation=exports.MultiplyOperation=exports.NotEqualDepth=exports.GreaterDepth=exports.GreaterEqualDepth=exports.EqualDepth=exports.LessEqualDepth=exports.LessDepth=exports.AlwaysDepth=exports.NeverDepth=exports.SrcAlphaSaturateFactor=exports.OneMinusDstColorFactor=exports.DstColorFactor=exports.OneMinusDstAlphaFactor=exports.DstAlphaFactor=exports.OneMinusSrcAlphaFactor=exports.SrcAlphaFactor=exports.OneMinusSrcColorFactor=exports.SrcColorFactor=exports.OneFactor=exports.ZeroFactor=exports.MaxEquation=exports.MinEquation=exports.ReverseSubtractEquation=exports.SubtractEquation=exports.AddEquation=exports.CustomBlending=exports.MultiplyBlending=exports.SubtractiveBlending=exports.AdditiveBlending=exports.NormalBlending=exports.NoBlending=exports.VertexColors=exports.FaceColors=exports.NoColors=exports.SmoothShading=exports.FlatShading=exports.DoubleSide=exports.BackSide=exports.FrontSide=exports.VSMShadowMap=exports.PCFSoftShadowMap=exports.PCFShadowMap=exports.BasicShadowMap=exports.FrontFaceDirectionCCW=exports.FrontFaceDirectionCW=exports.CullFaceFrontBack=exports.CullFaceFront=exports.CullFaceBack=exports.CullFaceNone=exports.TOUCH=exports.MOUSE=exports.REVISION=void 0,exports.AlwaysStencilFunc=exports.GreaterEqualStencilFunc=exports.NotEqualStencilFunc=exports.GreaterStencilFunc=exports.LessEqualStencilFunc=exports.EqualStencilFunc=exports.LessStencilFunc=exports.NeverStencilFunc=exports.InvertStencilOp=exports.DecrementWrapStencilOp=exports.IncrementWrapStencilOp=exports.DecrementStencilOp=exports.IncrementStencilOp=exports.ReplaceStencilOp=exports.KeepStencilOp=exports.ZeroStencilOp=exports.ObjectSpaceNormalMap=exports.TangentSpaceNormalMap=exports.RGBADepthPacking=exports.BasicDepthPacking=exports.RGBDEncoding=exports.RGBM16Encoding=exports.RGBM7Encoding=exports.LogLuvEncoding=exports.RGBEEncoding=exports.GammaEncoding=exports.sRGBEncoding=exports.LinearEncoding=exports.TriangleFanDrawMode=exports.TriangleStripDrawMode=exports.TrianglesDrawMode=exports.WrapAroundEnding=exports.ZeroSlopeEnding=exports.ZeroCurvatureEnding=exports.InterpolateSmooth=exports.InterpolateLinear=exports.InterpolateDiscrete=exports.LoopPingPong=exports.LoopRepeat=exports.LoopOnce=exports.RGBA_ASTC_12x12_Format=exports.RGBA_ASTC_12x10_Format=exports.RGBA_ASTC_10x10_Format=exports.RGBA_ASTC_10x8_Format=exports.RGBA_ASTC_10x6_Format=exports.RGBA_ASTC_10x5_Format=exports.RGBA_ASTC_8x8_Format=exports.RGBA_ASTC_8x6_Format=exports.RGBA_ASTC_8x5_Format=exports.RGBA_ASTC_6x6_Format=exports.RGBA_ASTC_6x5_Format=exports.RGBA_ASTC_5x5_Format=exports.RGBA_ASTC_5x4_Format=exports.RGBA_ASTC_4x4_Format=exports.RGB_ETC1_Format=exports.RGBA_PVRTC_2BPPV1_Format=exports.RGBA_PVRTC_4BPPV1_Format=exports.RGB_PVRTC_2BPPV1_Format=exports.RGB_PVRTC_4BPPV1_Format=exports.RGBA_S3TC_DXT5_Format=exports.RGBA_S3TC_DXT3_Format=exports.RGBA_S3TC_DXT1_Format=exports.RGB_S3TC_DXT1_Format=exports.RedFormat=exports.DepthStencilFormat=void 0;var r="108";exports.REVISION=r;var e={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};exports.MOUSE=e;var t={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};exports.TOUCH=t;var o=0;exports.CullFaceNone=o;var p=1;exports.CullFaceBack=p;var a=2;exports.CullFaceFront=a;var s=3;exports.CullFaceFrontBack=s;var x=0;exports.FrontFaceDirectionCW=x;var n=1;exports.FrontFaceDirectionCCW=n;var i=0;exports.BasicShadowMap=i;var l=1;exports.PCFShadowMap=l;var c=2;exports.PCFSoftShadowMap=c;var v=3;exports.VSMShadowMap=v;var F=0;exports.FrontSide=F;var S=1;exports.BackSide=S;var _=2;exports.DoubleSide=_;var g=1;exports.FlatShading=g;var T=2;exports.SmoothShading=T;var R=0;exports.NoColors=R;var u=1;exports.FaceColors=u;var m=2;exports.VertexColors=m;var A=0;exports.NoBlending=A;var d=1;exports.NormalBlending=d;var M=2;exports.AdditiveBlending=M;var B=3;exports.SubtractiveBlending=B;var C=4;exports.MultiplyBlending=C;var G=5;exports.CustomBlending=G;var E=100;exports.AddEquation=E;var h=101;exports.SubtractEquation=h;var D=102;exports.ReverseSubtractEquation=D;var L=103;exports.MinEquation=L;var O=104;exports.MaxEquation=O;var N=200;exports.ZeroFactor=N;var P=201;exports.OneFactor=P;var y=202;exports.SrcColorFactor=y;var q=203;exports.OneMinusSrcColorFactor=q;var V=204;exports.SrcAlphaFactor=V;var U=205;exports.OneMinusSrcAlphaFactor=U;var I=206;exports.DstAlphaFactor=I;var b=207;exports.OneMinusDstAlphaFactor=b;var f=208;exports.DstColorFactor=f;var w=209;exports.OneMinusDstColorFactor=w;var W=210;exports.SrcAlphaSaturateFactor=W;var k=0;exports.NeverDepth=k;var X=1;exports.AlwaysDepth=X;var Z=2;exports.LessDepth=Z;var H=3;exports.LessEqualDepth=H;var j=4;exports.EqualDepth=j;var Y=5;exports.GreaterEqualDepth=Y;var K=6;exports.GreaterDepth=K;var z=7;exports.NotEqualDepth=z;var J=0;exports.MultiplyOperation=J;var Q=1;exports.MixOperation=Q;var $=2;exports.AddOperation=$;var rr=0;exports.NoToneMapping=rr;var er=1;exports.LinearToneMapping=er;var tr=2;exports.ReinhardToneMapping=tr;var or=3;exports.Uncharted2ToneMapping=or;var pr=4;exports.CineonToneMapping=pr;var ar=5;exports.ACESFilmicToneMapping=ar;var sr=300;exports.UVMapping=sr;var xr=301;exports.CubeReflectionMapping=xr;var nr=302;exports.CubeRefractionMapping=nr;var ir=303;exports.EquirectangularReflectionMapping=ir;var lr=304;exports.EquirectangularRefractionMapping=lr;var cr=305;exports.SphericalReflectionMapping=cr;var vr=306;exports.CubeUVReflectionMapping=vr;var Fr=307;exports.CubeUVRefractionMapping=Fr;var Sr=1e3;exports.RepeatWrapping=Sr;var _r=1001;exports.ClampToEdgeWrapping=_r;var gr=1002;exports.MirroredRepeatWrapping=gr;var Tr=1003;exports.NearestFilter=Tr;var Rr=1004;exports.NearestMipmapNearestFilter=Rr;var ur=1004;exports.NearestMipMapNearestFilter=ur;var mr=1005;exports.NearestMipmapLinearFilter=mr;var Ar=1005;exports.NearestMipMapLinearFilter=Ar;var dr=1006;exports.LinearFilter=dr;var Mr=1007;exports.LinearMipmapNearestFilter=Mr;var Br=1007;exports.LinearMipMapNearestFilter=Br;var Cr=1008;exports.LinearMipmapLinearFilter=Cr;var Gr=1008;exports.LinearMipMapLinearFilter=Gr;var Er=1009;exports.UnsignedByteType=Er;var hr=1010;exports.ByteType=hr;var Dr=1011;exports.ShortType=Dr;var Lr=1012;exports.UnsignedShortType=Lr;var Or=1013;exports.IntType=Or;var Nr=1014;exports.UnsignedIntType=Nr;var Pr=1015;exports.FloatType=Pr;var yr=1016;exports.HalfFloatType=yr;var qr=1017;exports.UnsignedShort4444Type=qr;var Vr=1018;exports.UnsignedShort5551Type=Vr;var Ur=1019;exports.UnsignedShort565Type=Ur;var Ir=1020;exports.UnsignedInt248Type=Ir;var br=1021;exports.AlphaFormat=br;var fr=1022;exports.RGBFormat=fr;var wr=1023;exports.RGBAFormat=wr;var Wr=1024;exports.LuminanceFormat=Wr;var kr=1025;exports.LuminanceAlphaFormat=kr;var Xr=wr;exports.RGBEFormat=Xr;var Zr=1026;exports.DepthFormat=Zr;var Hr=1027;exports.DepthStencilFormat=Hr;var jr=1028;exports.RedFormat=jr;var Yr=33776;exports.RGB_S3TC_DXT1_Format=Yr;var Kr=33777;exports.RGBA_S3TC_DXT1_Format=Kr;var zr=33778;exports.RGBA_S3TC_DXT3_Format=zr;var Jr=33779;exports.RGBA_S3TC_DXT5_Format=Jr;var Qr=35840;exports.RGB_PVRTC_4BPPV1_Format=Qr;var $r=35841;exports.RGB_PVRTC_2BPPV1_Format=$r;var re=35842;exports.RGBA_PVRTC_4BPPV1_Format=re;var ee=35843;exports.RGBA_PVRTC_2BPPV1_Format=ee;var te=36196;exports.RGB_ETC1_Format=te;var oe=37808;exports.RGBA_ASTC_4x4_Format=oe;var pe=37809;exports.RGBA_ASTC_5x4_Format=pe;var ae=37810;exports.RGBA_ASTC_5x5_Format=ae;var se=37811;exports.RGBA_ASTC_6x5_Format=se;var xe=37812;exports.RGBA_ASTC_6x6_Format=xe;var ne=37813;exports.RGBA_ASTC_8x5_Format=ne;var ie=37814;exports.RGBA_ASTC_8x6_Format=ie;var le=37815;exports.RGBA_ASTC_8x8_Format=le;var ce=37816;exports.RGBA_ASTC_10x5_Format=ce;var ve=37817;exports.RGBA_ASTC_10x6_Format=ve;var Fe=37818;exports.RGBA_ASTC_10x8_Format=Fe;var Se=37819;exports.RGBA_ASTC_10x10_Format=Se;var _e=37820;exports.RGBA_ASTC_12x10_Format=_e;var ge=37821;exports.RGBA_ASTC_12x12_Format=ge;var Te=2200;exports.LoopOnce=Te;var Re=2201;exports.LoopRepeat=Re;var ue=2202;exports.LoopPingPong=ue;var me=2300;exports.InterpolateDiscrete=me;var Ae=2301;exports.InterpolateLinear=Ae;var de=2302;exports.InterpolateSmooth=de;var Me=2400;exports.ZeroCurvatureEnding=Me;var Be=2401;exports.ZeroSlopeEnding=Be;var Ce=2402;exports.WrapAroundEnding=Ce;var Ge=0;exports.TrianglesDrawMode=Ge;var Ee=1;exports.TriangleStripDrawMode=Ee;var he=2;exports.TriangleFanDrawMode=he;var De=3e3;exports.LinearEncoding=De;var Le=3001;exports.sRGBEncoding=Le;var Oe=3007;exports.GammaEncoding=Oe;var Ne=3002;exports.RGBEEncoding=Ne;var Pe=3003;exports.LogLuvEncoding=Pe;var ye=3004;exports.RGBM7Encoding=ye;var qe=3005;exports.RGBM16Encoding=qe;var Ve=3006;exports.RGBDEncoding=Ve;var Ue=3200;exports.BasicDepthPacking=Ue;var Ie=3201;exports.RGBADepthPacking=Ie;var be=0;exports.TangentSpaceNormalMap=be;var fe=1;exports.ObjectSpaceNormalMap=fe;var we=0;exports.ZeroStencilOp=we;var We=7680;exports.KeepStencilOp=We;var ke=7681;exports.ReplaceStencilOp=ke;var Xe=7682;exports.IncrementStencilOp=Xe;var Ze=7683;exports.DecrementStencilOp=Ze;var He=34055;exports.IncrementWrapStencilOp=He;var je=34056;exports.DecrementWrapStencilOp=je;var Ye=5386;exports.InvertStencilOp=Ye;var Ke=512;exports.NeverStencilFunc=Ke;var ze=513;exports.LessStencilFunc=ze;var Je=514;exports.EqualStencilFunc=Je;var Qe=515;exports.LessEqualStencilFunc=Qe;var $e=516;exports.GreaterStencilFunc=$e;var rt=517;exports.NotEqualStencilFunc=rt;var et=518;exports.GreaterEqualStencilFunc=et;var tt=519;exports.AlwaysStencilFunc=tt;
},{}],"dsa9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Object3D=W;var t=require("../math/Quaternion.js"),e=require("../math/Vector3.js"),r=require("../math/Matrix4.js"),i=require("./EventDispatcher.js"),a=require("../math/Euler.js"),n=require("./Layers.js"),s=require("../math/Matrix3.js"),o=require("../math/Math.js"),h=require("../constants.js"),u=0,l=new e.Vector3,d=new t.Quaternion,c=new r.Matrix4,p=new e.Vector3,m=new e.Vector3,x=new e.Vector3,f=new t.Quaternion,v=new e.Vector3(1,0,0),g=new e.Vector3(0,1,0),y=new e.Vector3(0,0,1),w={type:"added"},M={type:"removed"};function W(){Object.defineProperty(this,"id",{value:u++}),this.uuid=o._Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=W.DefaultUp.clone();var i=new e.Vector3,h=new a.Euler,l=new t.Quaternion,d=new e.Vector3(1,1,1);h._onChange(function(){l.setFromEuler(h,!1)}),l._onChange(function(){h.setFromQuaternion(l,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:h},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new r.Matrix4},normalMatrix:{value:new s.Matrix3}}),this.matrix=new r.Matrix4,this.matrixWorld=new r.Matrix4,this.matrixAutoUpdate=W.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new n.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}W.DefaultUp=new e.Vector3(0,1,0),W.DefaultMatrixAutoUpdate=!0,W.prototype=Object.assign(Object.create(i.EventDispatcher.prototype),{constructor:W,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return d.setFromAxisAngle(t,e),this.quaternion.multiply(d),this},rotateOnWorldAxis:function(t,e){return d.setFromAxisAngle(t,e),this.quaternion.premultiply(d),this},rotateX:function(t){return this.rotateOnAxis(v,t)},rotateY:function(t){return this.rotateOnAxis(g,t)},rotateZ:function(t){return this.rotateOnAxis(y,t)},translateOnAxis:function(t,e){return l.copy(t).applyQuaternion(this.quaternion),this.position.add(l.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(v,t)},translateY:function(t){return this.translateOnAxis(g,t)},translateZ:function(t){return this.translateOnAxis(y,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(c.getInverse(this.matrixWorld))},lookAt:function(t,e,r){t.isVector3?p.copy(t):p.set(t,e,r);var i=this.parent;this.updateWorldMatrix(!0,!1),m.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?c.lookAt(m,p,this.up):c.lookAt(p,m,this.up),this.quaternion.setFromRotationMatrix(c),i&&(c.extractRotation(i.matrixWorld),d.setFromRotationMatrix(c),this.quaternion.premultiply(d.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(w)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(M)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),c.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),c.multiply(t.parent.matrixWorld)),t.applyMatrix(c),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var r=0,i=this.children.length;r<i;r++){var a=this.children[r].getObjectByProperty(t,e);if(void 0!==a)return a}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new e.Vector3),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new t.Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(m,e,x),e},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new e.Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(m,f,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new e.Vector3),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,a=0,n=i.length;a<n;a++)i[a].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function a(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==h.TrianglesDrawMode&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=a(t.geometries,this.geometry);var n=this.geometry.parameters;if(void 0!==n&&void 0!==n.shapes){var s=n.shapes;if(Array.isArray(s))for(var o=0,u=s.length;o<u;o++){var l=s[o];a(t.shapes,l)}else a(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){var d=[];for(o=0,u=this.material.length;o<u;o++)d.push(a(t.materials,this.material[o]));i.material=d}else i.material=a(t.materials,this.material);if(this.children.length>0){i.children=[];for(o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(e){var c=f(t.geometries),p=f(t.materials),m=f(t.textures),x=f(t.images);s=f(t.shapes);c.length>0&&(r.geometries=c),p.length>0&&(r.materials=p),m.length>0&&(r.textures=m),x.length>0&&(r.images=x),s.length>0&&(r.shapes=s)}return r.object=i,r;function f(t){var e=[];for(var r in t){var i=t[r];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var r=0;r<t.children.length;r++){var i=t.children[r];this.add(i.clone())}return this}});
},{"../math/Quaternion.js":"kutO","../math/Vector3.js":"QOxd","../math/Matrix4.js":"q1h8","./EventDispatcher.js":"0HfK","../math/Euler.js":"rvFC","./Layers.js":"Pbuq","../math/Matrix3.js":"Aj5L","../math/Math.js":"CA9T","../constants.js":"PJkd"}],"w/VZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Color=s;var t=require("./Math.js"),e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},r={h:0,s:0,l:0},i={h:0,s:0,l:0};function s(t,e,r){return void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}function n(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}function a(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function h(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}Object.assign(s.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(e,r,i){if(e=t._Math.euclideanModulo(e,1),r=t._Math.clamp(r,0,1),i=t._Math.clamp(i,0,1),0===r)this.r=this.g=this.b=i;else{var s=i<=.5?i*(1+r):i+r-i*r,a=2*i-s;this.r=n(a,s,e+1/3),this.g=n(a,s,e),this.b=n(a,s,e-1/3)}return this},setStyle:function(t){function r(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var s,n=i[1],a=i[2];switch(n){case"rgb":case"rgba":if(s=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,r(s[5]),this;if(s=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,r(s[5]),this;break;case"hsl":case"hsla":if(s=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var h=parseFloat(s[1])/360,o=parseInt(s[2],10)/100,l=parseInt(s[3],10)/100;return r(s[5]),this.setHSL(h,o,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u,g=(u=i[1]).length;if(3===g)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===g)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(u=e[t])?this.setHex(u):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var r=e>0?1/e:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=a(t.r),this.g=a(t.g),this.b=a(t.b),this},copyLinearToSRGB:function(t){return this.r=h(t.r),this.g=h(t.g),this.b=h(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,r,i=this.r,s=this.g,n=this.b,a=Math.max(i,s,n),h=Math.min(i,s,n),o=(h+a)/2;if(h===a)e=0,r=0;else{var l=a-h;switch(r=o<=.5?l/(a+h):l/(2-a-h),a){case i:e=(s-n)/l+(s<n?6:0);break;case s:e=(n-i)/l+2;break;case n:e=(i-s)/l+4}e/=6}return t.h=e,t.s=r,t.l=o,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(r),r.h+=t,r.s+=e,r.l+=i,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(e,s){this.getHSL(r),e.getHSL(i);var n=t._Math.lerp(r.h,i.h,s),a=t._Math.lerp(r.s,i.s,s),h=t._Math.lerp(r.l,i.l,s);return this.setHSL(n,a,h),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});
},{"./Math.js":"CA9T"}],"XEN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Light=e;var t=require("../core/Object3D.js"),o=require("../math/Color.js");function e(e,i){t.Object3D.call(this),this.type="Light",this.color=new o.Color(e),this.intensity=void 0!==i?i:1,this.receiveShadow=void 0}e.prototype=Object.assign(Object.create(t.Object3D.prototype),{constructor:e,isLight:!0,copy:function(o){return t.Object3D.prototype.copy.call(this,o),this.color.copy(o.color),this.intensity=o.intensity,this},toJSON:function(o){var e=t.Object3D.prototype.toJSON.call(this,o);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}});
},{"../core/Object3D.js":"dsa9","../math/Color.js":"w/VZ"}],"wHaw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AmbientLight=e;var t=require("./Light.js");function e(e,i){t.Light.call(this,e,i),this.type="AmbientLight",this.castShadow=void 0}e.prototype=Object.assign(Object.create(t.Light.prototype),{constructor:e,isAmbientLight:!0});
},{"./Light.js":"XEN9"}],"edIZ":[function(require,module,exports) {
"use strict";function t(t,i){this.x=t||0,this.y=i||0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector2=t,Object.defineProperties(t.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(t.prototype,{isVector2:!0,set:function(t,i){return this.x=t,this.y=i,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,i){return void 0!==i?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this},sub:function(t,i){return void 0!==i?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var i=this.x,s=this.y,n=t.elements;return this.x=n[0]*i+n[3]*s+n[6],this.y=n[1]*i+n[4]*s+n[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this},clampLength:function(t,i){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(i,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,s=this.y-t.y;return i*i+s*s},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t},fromBufferAttribute:function(t,i,s){return void 0!==s&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this},rotateAround:function(t,i){var s=Math.cos(i),n=Math.sin(i),h=this.x-t.x,r=this.y-t.y;return this.x=h*s-r*n+t.x,this.y=h*n+r*s+t.y,this}});
},{}],"zux+":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageUtils=void 0;var t={getDataURL:function(t){var a;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)a=t;else{void 0===e&&(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),e.width=t.width,e.height=t.height;var i=e.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),a=e}return a.width>2048||a.height>2048?a.toDataURL("image/jpeg",.6):a.toDataURL("image/png")}};exports.ImageUtils=t;
},{}],"X6VN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Texture=n;var t=require("../core/EventDispatcher.js"),i=require("../constants.js"),e=require("../math/Math.js"),r=require("../math/Vector2.js"),a=require("../math/Matrix3.js"),s=require("../extras/ImageUtils.js"),p=0;function n(t,s,o,h,m,u,c,l,g,d){Object.defineProperty(this,"id",{value:p++}),this.uuid=e._Math.generateUUID(),this.name="",this.image=void 0!==t?t:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==s?s:n.DEFAULT_MAPPING,this.wrapS=void 0!==o?o:i.ClampToEdgeWrapping,this.wrapT=void 0!==h?h:i.ClampToEdgeWrapping,this.magFilter=void 0!==m?m:i.LinearFilter,this.minFilter=void 0!==u?u:i.LinearMipmapLinearFilter,this.anisotropy=void 0!==g?g:1,this.format=void 0!==c?c:i.RGBAFormat,this.type=void 0!==l?l:i.UnsignedByteType,this.offset=new r.Vector2(0,0),this.repeat=new r.Vector2(1,1),this.center=new r.Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a.Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:i.LinearEncoding,this.version=0,this.onUpdate=null}n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=i.UVMapping,n.prototype=Object.assign(Object.create(t.EventDispatcher.prototype),{constructor:n,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var a=this.image;if(void 0===a.uuid&&(a.uuid=e._Math.generateUUID()),!i&&void 0===t.images[a.uuid]){var p;if(Array.isArray(a)){p=[];for(var n=0,o=a.length;n<o;n++)p.push(s.ImageUtils.getDataURL(a[n]))}else p=s.ImageUtils.getDataURL(a);t.images[a.uuid]={uuid:a.uuid,url:p}}r.image=a.uuid}return i||(t.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==i.UVMapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case i.RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case i.ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case i.RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case i.ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(n.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});
},{"../core/EventDispatcher.js":"0HfK","../constants.js":"PJkd","../math/Math.js":"CA9T","../math/Vector2.js":"edIZ","../math/Matrix3.js":"Aj5L","../extras/ImageUtils.js":"zux+"}],"/7R4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CanvasTexture=t;var e=require("./Texture.js");function t(t,r,o,s,p,u,a,c,i){e.Texture.call(this,t,r,o,s,p,u,a,c,i),this.needsUpdate=!0}t.prototype=Object.create(e.Texture.prototype),t.prototype.constructor=t,t.prototype.isCanvasTexture=!0;
},{"./Texture.js":"X6VN"}],"HLun":[function(require,module,exports) {
"use strict";function t(t,i,s,h){this.x=t||0,this.y=i||0,this.z=s||0,this.w=void 0!==h?h:1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector4=t,Object.defineProperties(t.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(t.prototype,{isVector4:!0,set:function(t,i,s,h){return this.x=t,this.y=i,this.z=s,this.w=h,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,i){return void 0!==i?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this},sub:function(t,i){return void 0!==i?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var i=this.x,s=this.y,h=this.z,n=this.w,r=t.elements;return this.x=r[0]*i+r[4]*s+r[8]*h+r[12]*n,this.y=r[1]*i+r[5]*s+r[9]*h+r[13]*n,this.z=r[2]*i+r[6]*s+r[10]*h+r[14]*n,this.w=r[3]*i+r[7]*s+r[11]*h+r[15]*n,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this},setAxisAngleFromRotationMatrix:function(t){var i,s,h,n,r=t.elements,e=r[0],a=r[4],o=r[8],u=r[1],c=r[5],x=r[9],w=r[2],y=r[6],f=r[10];if(Math.abs(a-u)<.01&&Math.abs(o-w)<.01&&Math.abs(x-y)<.01){if(Math.abs(a+u)<.1&&Math.abs(o+w)<.1&&Math.abs(x+y)<.1&&Math.abs(e+c+f-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;var z=(e+1)/2,M=(c+1)/2,l=(f+1)/2,m=(a+u)/4,d=(o+w)/4,b=(x+y)/4;return z>M&&z>l?z<.01?(s=0,h=.707106781,n=.707106781):(h=m/(s=Math.sqrt(z)),n=d/s):M>l?M<.01?(s=.707106781,h=0,n=.707106781):(s=m/(h=Math.sqrt(M)),n=b/h):l<.01?(s=.707106781,h=.707106781,n=0):(s=d/(n=Math.sqrt(l)),h=b/n),this.set(s,h,n,i),this}var p=Math.sqrt((y-x)*(y-x)+(o-w)*(o-w)+(u-a)*(u-a));return Math.abs(p)<.001&&(p=1),this.x=(y-x)/p,this.y=(o-w)/p,this.z=(u-a)/p,this.w=Math.acos((e+c+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this},clampLength:function(t,i){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(i,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t},fromBufferAttribute:function(t,i,s){return void 0!==s&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}});
},{}],"B3O6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Box3=y;var t=require("./Vector3.js"),i=[new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3,new t.Vector3],n=new t.Vector3,e=new t.Vector3,s=new t.Vector3,r=new t.Vector3,a=new t.Vector3,m=new t.Vector3,o=new t.Vector3,h=new t.Vector3,x=new t.Vector3,c=new t.Vector3,u=new t.Vector3;function y(i,n){this.min=void 0!==i?i:new t.Vector3(1/0,1/0,1/0),this.max=void 0!==n?n:new t.Vector3(-1/0,-1/0,-1/0)}function p(t,i,n,e,s){var r,a;for(r=0,a=t.length-3;r<=a;r+=3){u.fromArray(t,r);var m=s.x*Math.abs(u.x)+s.y*Math.abs(u.y)+s.z*Math.abs(u.z),o=i.dot(u),h=n.dot(u),x=e.dot(u);if(Math.max(-Math.max(o,h,x),Math.min(o,h,x))>m)return!1}return!0}Object.assign(y.prototype,{isBox3:!0,set:function(t,i){return this.min.copy(t),this.max.copy(i),this},setFromArray:function(t){for(var i=1/0,n=1/0,e=1/0,s=-1/0,r=-1/0,a=-1/0,m=0,o=t.length;m<o;m+=3){var h=t[m],x=t[m+1],c=t[m+2];h<i&&(i=h),x<n&&(n=x),c<e&&(e=c),h>s&&(s=h),x>r&&(r=x),c>a&&(a=c)}return this.min.set(i,n,e),this.max.set(s,r,a),this},setFromBufferAttribute:function(t){for(var i=1/0,n=1/0,e=1/0,s=-1/0,r=-1/0,a=-1/0,m=0,o=t.count;m<o;m++){var h=t.getX(m),x=t.getY(m),c=t.getZ(m);h<i&&(i=h),x<n&&(n=x),c<e&&(e=c),h>s&&(s=h),x>r&&(r=x),c>a&&(a=c)}return this.min.set(i,n,e),this.max.set(s,r,a),this},setFromPoints:function(t){this.makeEmpty();for(var i=0,n=t.length;i<n;i++)this.expandByPoint(t[i]);return this},setFromCenterAndSize:function(t,i){var e=n.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(e),this.max.copy(t).add(e),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(i){return void 0===i&&(console.warn("THREE.Box3: .getCenter() target is now required"),i=new t.Vector3),this.isEmpty()?i.set(0,0,0):i.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(i){return void 0===i&&(console.warn("THREE.Box3: .getSize() target is now required"),i=new t.Vector3),this.isEmpty()?i.set(0,0,0):i.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){var i,e;t.updateWorldMatrix(!1,!1);var s=t.geometry;if(void 0!==s)if(s.isGeometry){var r=s.vertices;for(i=0,e=r.length;i<e;i++)n.copy(r[i]),n.applyMatrix4(t.matrixWorld),this.expandByPoint(n)}else if(s.isBufferGeometry){var a=s.attributes.position;if(void 0!==a)for(i=0,e=a.count;i<e;i++)n.fromBufferAttribute(a,i).applyMatrix4(t.matrixWorld),this.expandByPoint(n)}var m=t.children;for(i=0,e=m.length;i<e;i++)this.expandByObject(m[i]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(i,n){return void 0===n&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new t.Vector3),n.set((i.x-this.min.x)/(this.max.x-this.min.x),(i.y-this.min.y)/(this.max.y-this.min.y),(i.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,n),n.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var i,n;return t.normal.x>0?(i=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),i<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(h),x.subVectors(this.max,h),e.subVectors(t.a,h),s.subVectors(t.b,h),r.subVectors(t.c,h),a.subVectors(s,e),m.subVectors(r,s),o.subVectors(e,r);var i=[0,-a.z,a.y,0,-m.z,m.y,0,-o.z,o.y,a.z,0,-a.x,m.z,0,-m.x,o.z,0,-o.x,-a.y,a.x,0,-m.y,m.x,0,-o.y,o.x,0];return!!p(i,e,s,r,x)&&(!!p(i=[1,0,0,0,1,0,0,0,1],e,s,r,x)&&(c.crossVectors(a,m),p(i=[c.x,c.y,c.z],e,s,r,x)))},clampPoint:function(i,n){return void 0===n&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new t.Vector3),n.copy(i).clamp(this.min,this.max)},distanceToPoint:function(t){return n.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(n).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(i[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),i[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),i[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),i[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),i[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),i[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),i[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),i[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(i),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});
},{"./Vector3.js":"QOxd"}],"rWqY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sphere=i;var t=require("./Box3.js"),e=require("./Vector3.js"),r=new t.Box3;function i(t,r){this.center=void 0!==t?t:new e.Vector3,this.radius=void 0!==r?r:0}Object.assign(i.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var i=this.center;void 0!==e?i.copy(e):r.setFromPoints(t).getCenter(i);for(var n=0,s=0,o=t.length;s<o;s++)n=Math.max(n,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,r){var i=this.center.distanceToSquared(t);return void 0===r&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),r=new e.Vector3),r.copy(t),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new t.Box3),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});
},{"./Box3.js":"B3O6","./Vector3.js":"QOxd"}],"ui/r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Plane=e;var t=require("./Matrix3.js"),n=require("./Vector3.js"),o=new n.Vector3,r=new n.Vector3,i=new t.Matrix3;function e(t,o){this.normal=void 0!==t?t:new n.Vector3(1,0,0),this.constant=void 0!==o?o:0}Object.assign(e.prototype,{isPlane:!0,set:function(t,n){return this.normal.copy(t),this.constant=n,this},setComponents:function(t,n,o,r){return this.normal.set(t,n,o),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:function(t,n,i){var e=o.subVectors(i,n).cross(r.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(e,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,o){return void 0===o&&(console.warn("THREE.Plane: .projectPoint() target is now required"),o=new n.Vector3),o.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,r){void 0===r&&(console.warn("THREE.Plane: .intersectLine() target is now required"),r=new n.Vector3);var i=t.delta(o),e=this.normal.dot(i);if(0===e)return 0===this.distanceToPoint(t.start)?r.copy(t.start):void 0;var s=-(t.start.dot(this.normal)+this.constant)/e;return s<0||s>1?void 0:r.copy(i).multiplyScalar(s).add(t.start)},intersectsLine:function(t){var n=this.distanceToPoint(t.start),o=this.distanceToPoint(t.end);return n<0&&o>0||o<0&&n>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new n.Vector3),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,n){var r=n||i.getNormalMatrix(t),e=this.coplanarPoint(o).applyMatrix4(t),s=this.normal.applyMatrix3(r).normalize();return this.constant=-e.dot(s),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});
},{"./Matrix3.js":"Aj5L","./Vector3.js":"QOxd"}],"I8NQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Frustum=i;var e=require("./Vector3.js"),n=require("./Sphere.js"),t=require("./Plane.js"),r=new n.Sphere,o=new e.Vector3;function i(e,n,r,o,i,s){this.planes=[void 0!==e?e:new t.Plane,void 0!==n?n:new t.Plane,void 0!==r?r:new t.Plane,void 0!==o?o:new t.Plane,void 0!==i?i:new t.Plane,void 0!==s?s:new t.Plane]}Object.assign(i.prototype,{set:function(e,n,t,r,o,i){var s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(t),s[3].copy(r),s[4].copy(o),s[5].copy(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var n=this.planes,t=0;t<6;t++)n[t].copy(e.planes[t]);return this},setFromMatrix:function(e){var n=this.planes,t=e.elements,r=t[0],o=t[1],i=t[2],s=t[3],a=t[4],p=t[5],c=t[6],u=t[7],l=t[8],m=t[9],h=t[10],y=t[11],d=t[12],f=t[13],v=t[14],x=t[15];return n[0].setComponents(s-r,u-a,y-l,x-d).normalize(),n[1].setComponents(s+r,u+a,y+l,x+d).normalize(),n[2].setComponents(s+o,u+p,y+m,x+f).normalize(),n[3].setComponents(s-o,u-p,y-m,x-f).normalize(),n[4].setComponents(s-i,u-c,y-h,x-v).normalize(),n[5].setComponents(s+i,u+c,y+h,x+v).normalize(),this},intersectsObject:function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),r.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(r)},intersectsSprite:function(e){return r.center.set(0,0,0),r.radius=.7071067811865476,r.applyMatrix4(e.matrixWorld),this.intersectsSphere(r)},intersectsSphere:function(e){for(var n=this.planes,t=e.center,r=-e.radius,o=0;o<6;o++){if(n[o].distanceToPoint(t)<r)return!1}return!0},intersectsBox:function(e){for(var n=this.planes,t=0;t<6;t++){var r=n[t];if(o.x=r.normal.x>0?e.max.x:e.min.x,o.y=r.normal.y>0?e.max.y:e.min.y,o.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(o)<0)return!1}return!0},containsPoint:function(e){for(var n=this.planes,t=0;t<6;t++)if(n[t].distanceToPoint(e)<0)return!1;return!0}});
},{"./Vector3.js":"QOxd","./Sphere.js":"rWqY","./Plane.js":"ui/r"}],"heid":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LightShadow=o;var t=require("../math/Matrix4.js"),i=require("../math/Vector2.js"),r=require("../math/Vector3.js"),e=require("../math/Vector4.js"),s=require("../math/Frustum.js");function o(r){this.camera=r,this.bias=0,this.radius=1,this.mapSize=new i.Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new t.Matrix4,this._frustum=new s.Frustum,this._frameExtents=new i.Vector2(1,1),this._viewportCount=1,this._viewports=[new e.Vector4(0,0,1,1)]}Object.assign(o.prototype,{_projScreenMatrix:new t.Matrix4,_lightPositionWorld:new r.Vector3,_lookTarget:new r.Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var i=this.camera,r=this.matrix,e=this._projScreenMatrix,s=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),i.position.copy(o),s.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(s),i.updateMatrixWorld(),e.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromMatrix(e),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(i.projectionMatrix),r.multiply(i.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}});
},{"../math/Matrix4.js":"q1h8","../math/Vector2.js":"edIZ","../math/Vector3.js":"QOxd","../math/Vector4.js":"HLun","../math/Frustum.js":"I8NQ"}],"xKHR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Camera=i;var t=require("../math/Matrix4.js"),r=require("../core/Object3D.js"),e=require("../math/Vector3.js");function i(){r.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new t.Matrix4,this.projectionMatrix=new t.Matrix4,this.projectionMatrixInverse=new t.Matrix4}i.prototype=Object.assign(Object.create(r.Object3D.prototype),{constructor:i,isCamera:!0,copy:function(t,e){return r.Object3D.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new e.Vector3),this.updateMatrixWorld(!0);var r=this.matrixWorld.elements;return t.set(-r[8],-r[9],-r[10]).normalize()},updateMatrixWorld:function(t){r.Object3D.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});
},{"../math/Matrix4.js":"q1h8","../core/Object3D.js":"dsa9","../math/Vector3.js":"QOxd"}],"gCEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrthographicCamera=e;var t=require("./Camera.js"),i=require("../core/Object3D.js");function e(i,e,h,o,s,r){t.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==i?i:-1,this.right=void 0!==e?e:1,this.top=void 0!==h?h:1,this.bottom=void 0!==o?o:-1,this.near=void 0!==s?s:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()}e.prototype=Object.assign(Object.create(t.Camera.prototype),{constructor:e,isOrthographicCamera:!0,copy:function(i,e){return t.Camera.prototype.copy.call(this,i,e),this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.near=i.near,this.far=i.far,this.zoom=i.zoom,this.view=null===i.view?null:Object.assign({},i.view),this},setViewOffset:function(t,i,e,h,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=e,this.view.offsetY=h,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),e=(this.right+this.left)/2,h=(this.top+this.bottom)/2,o=e-t,s=e+t,r=h+i,a=h-i;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),n=this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,c=(this.top-this.bottom)/this.view.height;s=(o+=f*(this.view.offsetX/l))+f*(this.view.width/l),a=(r-=c*(this.view.offsetY/n))-c*(this.view.height/n)}this.projectionMatrix.makeOrthographic(o,s,r,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});
},{"./Camera.js":"xKHR","../core/Object3D.js":"dsa9"}],"ER5K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLightShadow=r;var t=require("./LightShadow.js"),e=require("../cameras/OrthographicCamera.js");function r(){t.LightShadow.call(this,new e.OrthographicCamera(-5,5,5,-5,.5,500))}r.prototype=Object.assign(Object.create(t.LightShadow.prototype),{constructor:r,isDirectionalLightShadow:!0,updateMatrices:function(e,r,a){t.LightShadow.prototype.updateMatrices.call(this,e,r,a)}});
},{"./LightShadow.js":"heid","../cameras/OrthographicCamera.js":"gCEj"}],"xqJe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLight=o;var t=require("./Light.js"),e=require("./DirectionalLightShadow.js"),i=require("../core/Object3D.js");function o(o,r){t.Light.call(this,o,r),this.type="DirectionalLight",this.position.copy(i.Object3D.DefaultUp),this.updateMatrix(),this.target=new i.Object3D,this.shadow=new e.DirectionalLightShadow}o.prototype=Object.assign(Object.create(t.Light.prototype),{constructor:o,isDirectionalLight:!0,copy:function(e){return t.Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});
},{"./Light.js":"XEN9","./DirectionalLightShadow.js":"ER5K","../core/Object3D.js":"dsa9"}],"NNH9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cache=void 0;var e={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};exports.Cache=e;
},{}],"UW0K":[function(require,module,exports) {
"use strict";function o(o,t,r){var n=this,i=!1,e=0,s=0,a=void 0;this.onStart=void 0,this.onLoad=o,this.onProgress=t,this.onError=r,this.itemStart=function(o){s++,!1===i&&void 0!==n.onStart&&n.onStart(o,e,s),i=!0},this.itemEnd=function(o){e++,void 0!==n.onProgress&&n.onProgress(o,e,s),e===s&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(o){void 0!==n.onError&&n.onError(o)},this.resolveURL=function(o){return a?a(o):o},this.setURLModifier=function(o){return a=o,this}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoadingManager=o,exports.DefaultLoadingManager=void 0;var t=new o;exports.DefaultLoadingManager=t;
},{}],"RJXL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loader=r;var t=require("./LoadingManager.js");function r(r){this.manager=void 0!==r?r:t.DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(r.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}}),r.Handlers={handlers:[],add:function(t,r){this.handlers.push(t,r)},get:function(t){for(var r=this.handlers,e=0,s=r.length;e<s;e+=2){var n=r[e],i=r[e+1];if(n.test(t))return i}return null}};
},{"./LoadingManager.js":"UW0K"}],"z4ue":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImageLoader=t;var e=require("./Cache.js"),r=require("./Loader.js");function t(e){r.Loader.call(this,e)}t.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:t,load:function(r,t,a,i){void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);var n=this,o=e.Cache.get(r);if(void 0!==o)return n.manager.itemStart(r),setTimeout(function(){t&&t(o),n.manager.itemEnd(r)},0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function d(){s.removeEventListener("load",d,!1),s.removeEventListener("error",m,!1),e.Cache.add(r,this),t&&t(this),n.manager.itemEnd(r)}function m(e){s.removeEventListener("load",d,!1),s.removeEventListener("error",m,!1),i&&i(e),n.manager.itemError(r),n.manager.itemEnd(r)}return s.addEventListener("load",d,!1),s.addEventListener("error",m,!1),"data:"!==r.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),n.manager.itemStart(r),s.src=r,s}});
},{"./Cache.js":"NNH9","./Loader.js":"RJXL"}],"pPab":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ray=a;var t=require("./Vector3.js"),i=new t.Vector3,n=new t.Vector3,r=new t.Vector3,o=new t.Vector3,e=new t.Vector3,s=new t.Vector3,c=new t.Vector3;function a(i,n){this.origin=void 0!==i?i:new t.Vector3,this.direction=void 0!==n?n:new t.Vector3}Object.assign(a.prototype,{set:function(t,i){return this.origin.copy(t),this.direction.copy(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(i,n){return void 0===n&&(console.warn("THREE.Ray: .at() target is now required"),n=new t.Vector3),n.copy(this.direction).multiplyScalar(i).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,i)),this},closestPointToPoint:function(i,n){void 0===n&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new t.Vector3),n.subVectors(i,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var n=i.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(i.copy(this.direction).multiplyScalar(n).add(this.origin),i.distanceToSquared(t))},distanceSqToSegment:function(t,i,e,s){n.copy(t).add(i).multiplyScalar(.5),r.copy(i).sub(t).normalize(),o.copy(this.origin).sub(n);var c,a,u,h,l=.5*t.distanceTo(i),d=-this.direction.dot(r),y=o.dot(this.direction),m=-o.dot(r),f=o.lengthSq(),p=Math.abs(1-d*d);if(p>0)if(a=d*y-m,h=l*p,(c=d*m-y)>=0)if(a>=-h)if(a<=h){var g=1/p;u=(c*=g)*(c+d*(a*=g)+2*y)+a*(d*c+a+2*m)+f}else a=l,u=-(c=Math.max(0,-(d*a+y)))*c+a*(a+2*m)+f;else a=-l,u=-(c=Math.max(0,-(d*a+y)))*c+a*(a+2*m)+f;else a<=-h?u=-(c=Math.max(0,-(-d*l+y)))*c+(a=c>0?-l:Math.min(Math.max(-l,-m),l))*(a+2*m)+f:a<=h?(c=0,u=(a=Math.min(Math.max(-l,-m),l))*(a+2*m)+f):u=-(c=Math.max(0,-(d*l+y)))*c+(a=c>0?l:Math.min(Math.max(-l,-m),l))*(a+2*m)+f;else a=d>0?-l:l,u=-(c=Math.max(0,-(d*a+y)))*c+a*(a+2*m)+f;return e&&e.copy(this.direction).multiplyScalar(c).add(this.origin),s&&s.copy(r).multiplyScalar(a).add(n),u},intersectSphere:function(t,n){i.subVectors(t.center,this.origin);var r=i.dot(this.direction),o=i.dot(i)-r*r,e=t.radius*t.radius;if(o>e)return null;var s=Math.sqrt(e-o),c=r-s,a=r+s;return c<0&&a<0?null:c<0?this.at(a,n):this.at(c,n)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var i=t.normal.dot(this.direction);if(0===i)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/i;return n>=0?n:null},intersectPlane:function(t,i){var n=this.distanceToPlane(t);return null===n?null:this.at(n,i)},intersectsPlane:function(t){var i=t.distanceToPoint(this.origin);return 0===i||t.normal.dot(this.direction)*i<0},intersectBox:function(t,i){var n,r,o,e,s,c,a=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,l=this.origin;return a>=0?(n=(t.min.x-l.x)*a,r=(t.max.x-l.x)*a):(n=(t.max.x-l.x)*a,r=(t.min.x-l.x)*a),u>=0?(o=(t.min.y-l.y)*u,e=(t.max.y-l.y)*u):(o=(t.max.y-l.y)*u,e=(t.min.y-l.y)*u),n>e||o>r?null:((o>n||n!=n)&&(n=o),(e<r||r!=r)&&(r=e),h>=0?(s=(t.min.z-l.z)*h,c=(t.max.z-l.z)*h):(s=(t.max.z-l.z)*h,c=(t.min.z-l.z)*h),n>c||s>r?null:((s>n||n!=n)&&(n=s),(c<r||r!=r)&&(r=c),r<0?null:this.at(n>=0?n:r,i)))},intersectsBox:function(t){return null!==this.intersectBox(t,i)},intersectTriangle:function(t,i,n,r,a){e.subVectors(i,t),s.subVectors(n,t),c.crossVectors(e,s);var u,h=this.direction.dot(c);if(h>0){if(r)return null;u=1}else{if(!(h<0))return null;u=-1,h=-h}o.subVectors(this.origin,t);var l=u*this.direction.dot(s.crossVectors(o,s));if(l<0)return null;var d=u*this.direction.dot(e.cross(o));if(d<0)return null;if(l+d>h)return null;var y=-u*o.dot(c);return y<0?null:this.at(y/h,a)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});
},{"./Vector3.js":"QOxd"}],"ec/s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Triangle=h;var t=require("./Vector3.js"),e=new t.Vector3,r=new t.Vector3,o=new t.Vector3,n=new t.Vector3,c=new t.Vector3,s=new t.Vector3,i=new t.Vector3,a=new t.Vector3,u=new t.Vector3,d=new t.Vector3;function h(e,r,o){this.a=void 0!==e?e:new t.Vector3,this.b=void 0!==r?r:new t.Vector3,this.c=void 0!==o?o:new t.Vector3}Object.assign(h,{getNormal:function(r,o,n,c){void 0===c&&(console.warn("THREE.Triangle: .getNormal() target is now required"),c=new t.Vector3),c.subVectors(n,o),e.subVectors(r,o),c.cross(e);var s=c.lengthSq();return s>0?c.multiplyScalar(1/Math.sqrt(s)):c.set(0,0,0)},getBarycoord:function(n,c,s,i,a){e.subVectors(i,c),r.subVectors(s,c),o.subVectors(n,c);var u=e.dot(e),d=e.dot(r),h=e.dot(o),V=r.dot(r),l=r.dot(o),g=u*V-d*d;if(void 0===a&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),a=new t.Vector3),0===g)return a.set(-2,-1,-1);var b=1/g,y=(V*h-d*l)*b,f=(u*l-d*h)*b;return a.set(1-y-f,f,y)},containsPoint:function(t,e,r,o){return h.getBarycoord(t,e,r,o,n),n.x>=0&&n.y>=0&&n.x+n.y<=1},getUV:function(t,e,r,o,c,s,i,a){return this.getBarycoord(t,e,r,o,n),a.set(0,0),a.addScaledVector(c,n.x),a.addScaledVector(s,n.y),a.addScaledVector(i,n.z),a},isFrontFacing:function(t,o,n,c){return e.subVectors(n,o),r.subVectors(t,o),e.cross(r).dot(c)<0}}),Object.assign(h.prototype,{set:function(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this},setFromPointsAndIndices:function(t,e,r,o){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[o]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return e.subVectors(this.c,this.b),r.subVectors(this.a,this.b),.5*e.cross(r).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new t.Vector3),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return h.getNormal(this.a,this.b,this.c,t)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new t.Vector3),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return h.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,r,o,n){return h.getUV(t,this.a,this.b,this.c,e,r,o,n)},containsPoint:function(t){return h.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return h.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(e,r){void 0===r&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),r=new t.Vector3);var o,n,h=this.a,V=this.b,l=this.c;c.subVectors(V,h),s.subVectors(l,h),a.subVectors(e,h);var g=c.dot(a),b=s.dot(a);if(g<=0&&b<=0)return r.copy(h);u.subVectors(e,V);var y=c.dot(u),f=s.dot(u);if(y>=0&&f<=y)return r.copy(V);var w=g*f-y*b;if(w<=0&&g>=0&&y<=0)return o=g/(g-y),r.copy(h).addScaledVector(c,o);d.subVectors(e,l);var p=c.dot(d),v=s.dot(d);if(v>=0&&p<=v)return r.copy(l);var T=p*b-g*v;if(T<=0&&b>=0&&v<=0)return n=b/(b-v),r.copy(h).addScaledVector(s,n);var q=y*v-p*f;if(q<=0&&f-y>=0&&p-v>=0)return i.subVectors(l,V),n=(f-y)/(f-y+(p-v)),r.copy(V).addScaledVector(i,n);var P=1/(q+T+w);return o=T*P,n=w*P,r.copy(h).addScaledVector(c,o).addScaledVector(s,n)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});
},{"./Vector3.js":"QOxd"}],"sH8I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Face3=e;var r=require("../math/Color.js"),t=require("../math/Vector3.js");function e(e,o,s,i,a,l){this.a=e,this.b=o,this.c=s,this.normal=i&&i.isVector3?i:new t.Vector3,this.vertexNormals=Array.isArray(i)?i:[],this.color=a&&a.isColor?a:new r.Color,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0!==l?l:0}Object.assign(e.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(r){this.a=r.a,this.b=r.b,this.c=r.c,this.normal.copy(r.normal),this.color.copy(r.color),this.materialIndex=r.materialIndex;for(var t=0,e=r.vertexNormals.length;t<e;t++)this.vertexNormals[t]=r.vertexNormals[t].clone();for(t=0,e=r.vertexColors.length;t<e;t++)this.vertexColors[t]=r.vertexColors[t].clone();return this}});
},{"../math/Color.js":"w/VZ","../math/Vector3.js":"QOxd"}],"ie8i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Material=a;var t=require("../core/EventDispatcher.js"),i=require("../constants.js"),s=require("../math/Math.js"),e=0;function a(){Object.defineProperty(this,"id",{value:e++}),this.uuid=s._Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=i.NormalBlending,this.side=i.FrontSide,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=i.NoColors,this.opacity=1,this.transparent=!1,this.blendSrc=i.SrcAlphaFactor,this.blendDst=i.OneMinusSrcAlphaFactor,this.blendEquation=i.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=i.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=i.AlwaysStencilFunc,this.stencilRef=0,this.stencilMask=255,this.stencilFail=i.KeepStencilOp,this.stencilZFail=i.KeepStencilOp,this.stencilZPass=i.KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}a.prototype=Object.assign(Object.create(t.EventDispatcher.prototype),{constructor:a,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var s in t){var e=t[s];if(void 0!==e)if("shading"!==s){var a=this[s];void 0!==a?a&&a.isColor?a.set(e):a&&a.isVector3&&e&&e.isVector3?a.copy(e):this[s]=e:console.warn("THREE."+this.type+": '"+s+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===i.FlatShading;else console.warn("THREE.Material: '"+s+"' parameter is undefined.")}},toJSON:function(t){var s=void 0===t||"string"==typeof t;s&&(t={textures:{},images:{}});var e={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function a(t){var i=[];for(var s in t){var e=t[s];delete e.metadata,i.push(e)}return i}if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),this.color&&this.color.isColor&&(e.color=this.color.getHex()),void 0!==this.roughness&&(e.roughness=this.roughness),void 0!==this.metalness&&(e.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(e.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(e.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(e.specular=this.specular.getHex()),void 0!==this.shininess&&(e.shininess=this.shininess),void 0!==this.clearcoat&&(e.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(e.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(e.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,e.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(e.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(e.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(e.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(e.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(e.aoMap=this.aoMap.toJSON(t).uuid,e.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(e.bumpMap=this.bumpMap.toJSON(t).uuid,e.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(e.normalMap=this.normalMap.toJSON(t).uuid,e.normalMapType=this.normalMapType,e.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(e.displacementMap=this.displacementMap.toJSON(t).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(e.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(e.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(e.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(e.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(e.envMap=this.envMap.toJSON(t).uuid,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,void 0!==this.combine&&(e.combine=this.combine),void 0!==this.envMapIntensity&&(e.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(e.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(e.size=this.size),void 0!==this.sizeAttenuation&&(e.sizeAttenuation=this.sizeAttenuation),this.blending!==i.NormalBlending&&(e.blending=this.blending),!0===this.flatShading&&(e.flatShading=this.flatShading),this.side!==i.FrontSide&&(e.side=this.side),this.vertexColors!==i.NoColors&&(e.vertexColors=this.vertexColors),this.opacity<1&&(e.opacity=this.opacity),!0===this.transparent&&(e.transparent=this.transparent),e.depthFunc=this.depthFunc,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.stencilWrite=this.stencilWrite,e.stencilFunc=this.stencilFunc,e.stencilRef=this.stencilRef,e.stencilMask=this.stencilMask,e.stencilFail=this.stencilFail,e.stencilZFail=this.stencilZFail,e.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(e.rotation=this.rotation),!0===this.polygonOffset&&(e.polygonOffset=!0),0!==this.polygonOffsetFactor&&(e.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(e.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(e.linewidth=this.linewidth),void 0!==this.dashSize&&(e.dashSize=this.dashSize),void 0!==this.gapSize&&(e.gapSize=this.gapSize),void 0!==this.scale&&(e.scale=this.scale),!0===this.dithering&&(e.dithering=!0),this.alphaTest>0&&(e.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(e.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(e.wireframe=this.wireframe),this.wireframeLinewidth>1&&(e.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(e.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(e.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(e.morphTargets=!0),!0===this.morphNormals&&(e.morphNormals=!0),!0===this.skinning&&(e.skinning=!0),!1===this.visible&&(e.visible=!1),!1===this.toneMapped&&(e.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData),s){var h=a(t.textures),n=a(t.images);h.length>0&&(e.textures=h),n.length>0&&(e.images=n)}return e},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWrite=t.stencilWrite,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilMask=t.stencilMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var i=t.clippingPlanes,s=null;if(null!==i){var e=i.length;s=new Array(e);for(var a=0;a!==e;++a)s[a]=i[a].clone()}return this.clippingPlanes=s,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"../core/EventDispatcher.js":"0HfK","../constants.js":"PJkd","../math/Math.js":"CA9T"}],"szc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshBasicMaterial=a;var i=require("./Material.js"),t=require("../constants.js"),e=require("../math/Color.js");function a(a){i.Material.call(this),this.type="MeshBasicMaterial",this.color=new e.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(a)}a.prototype=Object.create(i.Material.prototype),a.prototype.constructor=a,a.prototype.isMeshBasicMaterial=!0,a.prototype.copy=function(t){return i.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};
},{"./Material.js":"ie8i","../constants.js":"PJkd","../math/Color.js":"w/VZ"}],"0uom":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Float64BufferAttribute=f,exports.Float32BufferAttribute=p,exports.Uint32BufferAttribute=h,exports.Int32BufferAttribute=y,exports.Uint16BufferAttribute=u,exports.Int16BufferAttribute=c,exports.Uint8ClampedBufferAttribute=s,exports.Uint8BufferAttribute=a,exports.Int8BufferAttribute=n,exports.BufferAttribute=o;var t=require("../math/Vector4.js"),r=require("../math/Vector3.js"),e=require("../math/Vector2.js"),i=require("../math/Color.js");function o(t,r,e){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=!0===e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function n(t,r,e){o.call(this,new Int8Array(t),r,e)}function a(t,r,e){o.call(this,new Uint8Array(t),r,e)}function s(t,r,e){o.call(this,new Uint8ClampedArray(t),r,e)}function c(t,r,e){o.call(this,new Int16Array(t),r,e)}function u(t,r,e){o.call(this,new Uint16Array(t),r,e)}function y(t,r,e){o.call(this,new Int32Array(t),r,e)}function h(t,r,e){o.call(this,new Uint32Array(t),r,e)}function p(t,r,e){o.call(this,new Float32Array(t),r,e)}function f(t,r,e){o.call(this,new Float64Array(t),r,e)}Object.defineProperty(o.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(o.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,r,e){t*=this.itemSize,e*=r.itemSize;for(var i=0,o=this.itemSize;i<o;i++)this.array[t+i]=r.array[e+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var r=this.array,e=0,o=0,n=t.length;o<n;o++){var a=t[o];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),a=new i.Color),r[e++]=a.r,r[e++]=a.g,r[e++]=a.b}return this},copyVector2sArray:function(t){for(var r=this.array,i=0,o=0,n=t.length;o<n;o++){var a=t[o];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),a=new e.Vector2),r[i++]=a.x,r[i++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,o=0,n=t.length;o<n;o++){var a=t[o];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),a=new r.Vector3),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z}return this},copyVector4sArray:function(r){for(var e=this.array,i=0,o=0,n=r.length;o<n;o++){var a=r[o];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),a=new t.Vector4),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z,e[i++]=a.w}return this},set:function(t,r){return void 0===r&&(r=0),this.array.set(t,r),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,r){return this.array[t*this.itemSize]=r,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,r){return this.array[t*this.itemSize+1]=r,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,r){return this.array[t*this.itemSize+2]=r,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,r){return this.array[t*this.itemSize+3]=r,this},setXY:function(t,r,e){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=e,this},setXYZ:function(t,r,e,i){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=i,this},setXYZW:function(t,r,e,i,o){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=i,this.array[t+3]=o,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),n.prototype=Object.create(o.prototype),n.prototype.constructor=n,a.prototype=Object.create(o.prototype),a.prototype.constructor=a,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,c.prototype=Object.create(o.prototype),c.prototype.constructor=c,u.prototype=Object.create(o.prototype),u.prototype.constructor=u,y.prototype=Object.create(o.prototype),y.prototype.constructor=y,h.prototype=Object.create(o.prototype),h.prototype.constructor=h,p.prototype=Object.create(o.prototype),p.prototype.constructor=p,f.prototype=Object.create(o.prototype),f.prototype.constructor=f;
},{"../math/Vector4.js":"HLun","../math/Vector3.js":"QOxd","../math/Vector2.js":"edIZ","../math/Color.js":"w/VZ"}],"K826":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectGeometry=t;var e=require("../math/Vector2.js");function t(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(t.prototype,{computeGroups:function(e){for(var t,s=[],r=void 0,o=e.faces,i=0;i<o.length;i++){var n=o[i];n.materialIndex!==r&&(r=n.materialIndex,void 0!==t&&(t.count=3*i-t.start,s.push(t)),t={start:3*i,materialIndex:r})}void 0!==t&&(t.count=3*i-t.start,s.push(t)),this.groups=s},fromGeometry:function(t){var s,r=t.faces,o=t.vertices,i=t.faceVertexUvs,n=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,h=t.morphTargets,d=h.length;if(d>0){s=[];for(var p=0;p<d;p++)s[p]={name:h[p].name,data:[]};this.morphTargets.position=s}var u,l=t.morphNormals,c=l.length;if(c>0){u=[];for(p=0;p<c;p++)u[p]={name:l[p].name,data:[]};this.morphTargets.normal=u}var v=t.skinIndices,m=t.skinWeights,g=v.length===o.length,f=m.length===o.length;o.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(p=0;p<r.length;p++){var U=r[p];this.vertices.push(o[U.a],o[U.b],o[U.c]);var N=U.vertexNormals;if(3===N.length)this.normals.push(N[0],N[1],N[2]);else{var b=U.normal;this.normals.push(b,b,b)}var x,y=U.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{var G=U.color;this.colors.push(G,G,G)}if(!0===n)void 0!==(x=i[0][p])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",p),this.uvs.push(new e.Vector2,new e.Vector2,new e.Vector2));if(!0===a)void 0!==(x=i[1][p])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",p),this.uvs2.push(new e.Vector2,new e.Vector2,new e.Vector2));for(var w=0;w<d;w++){var V=h[w].vertices;s[w].data.push(V[U.a],V[U.b],V[U.c])}for(w=0;w<c;w++){var T=l[w].vertexNormals[p];u[w].data.push(T.a,T.b,T.c)}g&&this.skinIndices.push(v[U.a],v[U.b],v[U.c]),f&&this.skinWeights.push(m[U.a],m[U.b],m[U.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});
},{"../math/Vector2.js":"edIZ"}],"a3o8":[function(require,module,exports) {
"use strict";function r(r){if(0===r.length)return 1/0;for(var e=r[0],t=1,n=r.length;t<n;++t)r[t]<e&&(e=r[t]);return e}function e(r){if(0===r.length)return-1/0;for(var e=r[0],t=1,n=r.length;t<n;++t)r[t]>e&&(e=r[t]);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayMin=r,exports.arrayMax=e;
},{}],"kSEB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BufferGeometry=y;var t=require("../math/Vector3.js"),e=require("../math/Box3.js"),r=require("./EventDispatcher.js"),i=require("./BufferAttribute.js"),n=require("../math/Sphere.js"),o=require("./DirectGeometry.js"),a=require("./Object3D.js"),s=require("../math/Matrix4.js"),u=require("../math/Matrix3.js"),d=require("../math/Math.js"),h=require("../utils.js"),l=1,p=new s.Matrix4,f=new a.Object3D,c=new t.Vector3,m=new e.Box3,g=new e.Box3,b=new t.Vector3;function y(){Object.defineProperty(this,"id",{value:l+=2}),this.uuid=d._Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}y.prototype=Object.assign(Object.create(r.EventDispatcher.prototype),{constructor:y,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new((0,h.arrayMax)(t)>65535?i.Uint32BufferAttribute:i.Uint16BufferAttribute)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new i.BufferAttribute(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,r){this.groups.push({start:t,count:e,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var r=this.attributes.normal;void 0!==r&&((new u.Matrix3).getNormalMatrix(t).applyToBufferAttribute(r),r.needsUpdate=!0);var i=this.attributes.tangent;void 0!==i&&((new u.Matrix3).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return p.makeRotationX(t),this.applyMatrix(p),this},rotateY:function(t){return p.makeRotationY(t),this.applyMatrix(p),this},rotateZ:function(t){return p.makeRotationZ(t),this.applyMatrix(p),this},translate:function(t,e,r){return p.makeTranslation(t,e,r),this.applyMatrix(p),this},scale:function(t,e,r){return p.makeScale(t,e,r),this.applyMatrix(p),this},lookAt:function(t){return f.lookAt(t),f.updateMatrix(),this.applyMatrix(f.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(c).negate(),this.translate(c.x,c.y,c.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var r=new i.Float32BufferAttribute(3*e.vertices.length,3),n=new i.Float32BufferAttribute(3*e.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var o=new i.Float32BufferAttribute(e.lineDistances.length,1);this.addAttribute("lineDistance",o.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r];e.push(o.x,o.y,o.z||0)}return this.addAttribute("position",new i.Float32BufferAttribute(e,3)),this},updateFromObject:function(t){var e,r=t.geometry;if(t.isMesh){var i=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(i=void 0,r.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(r);i.verticesNeedUpdate=r.verticesNeedUpdate,i.normalsNeedUpdate=r.normalsNeedUpdate,i.colorsNeedUpdate=r.colorsNeedUpdate,i.uvsNeedUpdate=r.uvsNeedUpdate,i.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=i}return!0===r.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(r.vertices),e.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(r.normals),e.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(r.colors),e.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(r.uvs),e.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(r.lineDistances),e.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(t.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new o.DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new i.BufferAttribute(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var r=new Float32Array(3*t.normals.length);this.addAttribute("normal",new i.BufferAttribute(r,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new i.BufferAttribute(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var o=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new i.BufferAttribute(o,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new i.BufferAttribute(a,2).copyVector2sArray(t.uvs2))}for(var s in this.groups=t.groups,t.morphTargets){for(var u=[],d=t.morphTargets[s],h=0,l=d.length;h<l;h++){var p=d[h],f=new i.Float32BufferAttribute(3*p.data.length,3);f.name=p.name,u.push(f.copyVector3sArray(p.data))}this.morphAttributes[s]=u}if(t.skinIndices.length>0){var c=new i.Float32BufferAttribute(4*t.skinIndices.length,4);this.addAttribute("skinIndex",c.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new i.Float32BufferAttribute(4*t.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new e.Box3);var t=this.attributes.position,r=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),r)for(var i=0,n=r.length;i<n;i++){var o=r[i];m.setFromBufferAttribute(o),this.boundingBox.expandByPoint(m.min),this.boundingBox.expandByPoint(m.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new n.Sphere);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var r=this.boundingSphere.center;if(m.setFromBufferAttribute(t),e)for(var i=0,o=e.length;i<o;i++){var a=e[i];g.setFromBufferAttribute(a),m.expandByPoint(g.min),m.expandByPoint(g.max)}m.getCenter(r);var s=0;for(i=0,o=t.count;i<o;i++)b.fromBufferAttribute(t,i),s=Math.max(s,r.distanceToSquared(b));if(e)for(i=0,o=e.length;i<o;i++)for(var u=0,d=(a=e[i]).count;u<d;u++)b.fromBufferAttribute(a,u),s=Math.max(s,r.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,r=this.attributes;if(r.position){var n=r.position.array;if(void 0===r.normal)this.addAttribute("normal",new i.BufferAttribute(new Float32Array(n.length),3));else for(var o=r.normal.array,a=0,s=o.length;a<s;a++)o[a]=0;var u,d,h,l=r.normal.array,p=new t.Vector3,f=new t.Vector3,c=new t.Vector3,m=new t.Vector3,g=new t.Vector3;if(e){var b=e.array;for(a=0,s=e.count;a<s;a+=3)u=3*b[a+0],d=3*b[a+1],h=3*b[a+2],p.fromArray(n,u),f.fromArray(n,d),c.fromArray(n,h),m.subVectors(c,f),g.subVectors(p,f),m.cross(g),l[u]+=m.x,l[u+1]+=m.y,l[u+2]+=m.z,l[d]+=m.x,l[d+1]+=m.y,l[d+2]+=m.z,l[h]+=m.x,l[h+1]+=m.y,l[h+2]+=m.z}else for(a=0,s=n.length;a<s;a+=9)p.fromArray(n,a),f.fromArray(n,a+3),c.fromArray(n,a+6),m.subVectors(c,f),g.subVectors(p,f),m.cross(g),l[a]=m.x,l[a+1]=m.y,l[a+2]=m.z,l[a+3]=m.x,l[a+4]=m.y,l[a+5]=m.z,l[a+6]=m.x,l[a+7]=m.y,l[a+8]=m.z;this.normalizeNormals(),r.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var i in r)if(void 0!==t.attributes[i])for(var n=r[i].array,o=t.attributes[i],a=o.array,s=o.itemSize*e,u=Math.min(a.length,n.length-s),d=0,h=s;d<u;d++,h++)n[h]=a[d];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,r=t.count;e<r;e++)b.x=t.getX(e),b.y=t.getY(e),b.z=t.getZ(e),b.normalize(),t.setXYZ(e,b.x,b.y,b.z)},toNonIndexed:function(){function t(t,e){for(var r=t.array,n=t.itemSize,o=new r.constructor(e.length*n),a=0,s=0,u=0,d=e.length;u<d;u++){a=e[u]*n;for(var h=0;h<n;h++)o[s++]=r[a++]}return new i.BufferAttribute(o,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new y,r=this.index.array,n=this.attributes;for(var o in n){var a=t(n[o],r);e.addAttribute(o,a)}var s=this.morphAttributes;for(o in s){for(var u=[],d=s[o],h=0,l=d.length;h<l;h++){a=t(d[h],r);u.push(a)}e.morphAttributes[o]=u}for(var p=this.groups,f=(h=0,p.length);h<f;h++){var c=p[h];e.addGroup(c.start,c.count,c.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var n=this.attributes;for(var r in n){var o=(p=n[r]).toJSON();""!==p.name&&(o.name=p.name),t.data.attributes[r]=o}var a={},s=!1;for(var r in this.morphAttributes){for(var u=this.morphAttributes[r],d=[],h=0,l=u.length;h<l;h++){var p;o=(p=u[h]).toJSON();""!==p.name&&(o.name=p.name),d.push(o)}d.length>0&&(a[r]=d,s=!0)}s&&(t.data.morphAttributes=a);var f=this.groups;f.length>0&&(t.data.groups=JSON.parse(JSON.stringify(f)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new y).copy(this)},copy:function(t){var e,r,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],d=s[e];for(r=0,i=d.length;r<i;r++)u.push(d[r].clone());this.morphAttributes[e]=u}var h=t.groups;for(r=0,i=h.length;r<i;r++){var l=h[r];this.addGroup(l.start,l.count,l.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var f=t.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"../math/Vector3.js":"QOxd","../math/Box3.js":"B3O6","./EventDispatcher.js":"0HfK","./BufferAttribute.js":"0uom","../math/Sphere.js":"rWqY","./DirectGeometry.js":"K826","./Object3D.js":"dsa9","../math/Matrix4.js":"q1h8","../math/Matrix3.js":"Aj5L","../math/Math.js":"CA9T","../utils.js":"a3o8"}],"+ZOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mesh=I;var e=require("../math/Vector3.js"),t=require("../math/Vector2.js"),r=require("../math/Sphere.js"),a=require("../math/Ray.js"),o=require("../math/Matrix4.js"),i=require("../core/Object3D.js"),n=require("../math/Triangle.js"),s=require("../core/Face3.js"),c=require("../constants.js"),u=require("../materials/MeshBasicMaterial.js"),f=require("../core/BufferGeometry.js"),h=new o.Matrix4,l=new a.Ray,m=new r.Sphere,d=new e.Vector3,p=new e.Vector3,g=new e.Vector3,y=new e.Vector3,b=new e.Vector3,M=new e.Vector3,v=new e.Vector3,w=new e.Vector3,x=new e.Vector3,T=new t.Vector2,V=new t.Vector2,B=new t.Vector2,j=new e.Vector3,A=new e.Vector3;function I(e,t){i.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new f.BufferGeometry,this.material=void 0!==t?t:new u.MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=c.TrianglesDrawMode,this.updateMorphTargets()}function D(e,t,r,a,o,i,n,s){if(null===(t.side===c.BackSide?a.intersectTriangle(n,i,o,!0,s):a.intersectTriangle(o,i,n,t.side!==c.DoubleSide,s)))return null;A.copy(s),A.applyMatrix4(e.matrixWorld);var u=r.ray.origin.distanceTo(A);return u<r.near||u>r.far?null:{distance:u,point:A.clone(),object:e}}function S(e,r,a,o,i,c,u,f,h,l,m){d.fromBufferAttribute(i,h),p.fromBufferAttribute(i,l),g.fromBufferAttribute(i,m);var A=e.morphTargetInfluences;if(r.morphTargets&&c&&A){v.set(0,0,0),w.set(0,0,0),x.set(0,0,0);for(var I=0,S=c.length;I<S;I++){var q=A[I],O=c[I];0!==q&&(y.fromBufferAttribute(O,h),b.fromBufferAttribute(O,l),M.fromBufferAttribute(O,m),v.addScaledVector(y.sub(d),q),w.addScaledVector(b.sub(p),q),x.addScaledVector(M.sub(g),q))}d.add(v),p.add(w),g.add(x)}var G=D(e,r,a,o,d,p,g,j);if(G){u&&(T.fromBufferAttribute(u,h),V.fromBufferAttribute(u,l),B.fromBufferAttribute(u,m),G.uv=n.Triangle.getUV(j,d,p,g,T,V,B,new t.Vector2)),f&&(T.fromBufferAttribute(f,h),V.fromBufferAttribute(f,l),B.fromBufferAttribute(f,m),G.uv2=n.Triangle.getUV(j,d,p,g,T,V,B,new t.Vector2));var E=new s.Face3(h,l,m);n.Triangle.getNormal(d,p,g,E.normal),G.face=E}return G}I.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:I,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return i.Object3D.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,a=this.geometry;if(a.isBufferGeometry){var o=a.morphAttributes,i=Object.keys(o);if(i.length>0){var n=o[i[0]];if(void 0!==n)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=n.length;e<t;e++)r=n[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=a.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,r){var a,o=this.geometry,i=this.material,s=this.matrixWorld;if(void 0!==i&&(null===o.boundingSphere&&o.computeBoundingSphere(),m.copy(o.boundingSphere),m.applyMatrix4(s),!1!==e.ray.intersectsSphere(m)&&(h.getInverse(s),l.copy(e.ray).applyMatrix4(h),null===o.boundingBox||!1!==l.intersectsBox(o.boundingBox))))if(o.isBufferGeometry){var c,u,f,d,p,g,y,b,M,v=o.index,w=o.attributes.position,x=o.morphAttributes.position,A=o.attributes.uv,I=o.attributes.uv2,q=o.groups,O=o.drawRange;if(null!==v)if(Array.isArray(i))for(d=0,g=q.length;d<g;d++)for(M=i[(b=q[d]).materialIndex],p=Math.max(b.start,O.start),y=Math.min(b.start+b.count,O.start+O.count);p<y;p+=3)c=v.getX(p),u=v.getX(p+1),f=v.getX(p+2),(a=S(this,M,e,l,w,x,A,I,c,u,f))&&(a.faceIndex=Math.floor(p/3),a.face.materialIndex=b.materialIndex,r.push(a));else for(d=Math.max(0,O.start),g=Math.min(v.count,O.start+O.count);d<g;d+=3)c=v.getX(d),u=v.getX(d+1),f=v.getX(d+2),(a=S(this,i,e,l,w,x,A,I,c,u,f))&&(a.faceIndex=Math.floor(d/3),r.push(a));else if(void 0!==w)if(Array.isArray(i))for(d=0,g=q.length;d<g;d++)for(M=i[(b=q[d]).materialIndex],p=Math.max(b.start,O.start),y=Math.min(b.start+b.count,O.start+O.count);p<y;p+=3)(a=S(this,M,e,l,w,x,A,I,c=p,u=p+1,f=p+2))&&(a.faceIndex=Math.floor(p/3),a.face.materialIndex=b.materialIndex,r.push(a));else for(d=Math.max(0,O.start),g=Math.min(w.count,O.start+O.count);d<g;d+=3)(a=S(this,i,e,l,w,x,A,I,c=d,u=d+1,f=d+2))&&(a.faceIndex=Math.floor(d/3),r.push(a))}else if(o.isGeometry){var G,E,R,X,U=Array.isArray(i),H=o.vertices,k=o.faces,F=o.faceVertexUvs[0];F.length>0&&(X=F);for(var W=0,_=k.length;W<_;W++){var N=k[W],P=U?i[N.materialIndex]:i;if(void 0!==P&&(G=H[N.a],E=H[N.b],R=H[N.c],a=D(this,P,e,l,G,E,R,j))){if(X&&X[W]){var z=X[W];T.copy(z[0]),V.copy(z[1]),B.copy(z[2]),a.uv=n.Triangle.getUV(j,G,E,R,T,V,B,new t.Vector2)}a.face=N,a.faceIndex=W,r.push(a)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});
},{"../math/Vector3.js":"QOxd","../math/Vector2.js":"edIZ","../math/Sphere.js":"rWqY","../math/Ray.js":"pPab","../math/Matrix4.js":"q1h8","../core/Object3D.js":"dsa9","../math/Triangle.js":"ec/s","../core/Face3.js":"sH8I","../constants.js":"PJkd","../materials/MeshBasicMaterial.js":"szc7","../core/BufferGeometry.js":"kSEB"}],"vZKu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshPhongMaterial=a;var i=require("../constants.js"),e=require("./Material.js"),t=require("../math/Vector2.js"),s=require("../math/Color.js");function a(a){e.Material.call(this),this.type="MeshPhongMaterial",this.color=new s.Color(16777215),this.specular=new s.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new s.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=i.TangentSpaceNormalMap,this.normalScale=new t.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}a.prototype=Object.create(e.Material.prototype),a.prototype.constructor=a,a.prototype.isMeshPhongMaterial=!0,a.prototype.copy=function(i){return e.Material.prototype.copy.call(this,i),this.color.copy(i.color),this.specular.copy(i.specular),this.shininess=i.shininess,this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this};
},{"../constants.js":"PJkd","./Material.js":"ie8i","../math/Vector2.js":"edIZ","../math/Color.js":"w/VZ"}],"jURk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PerspectiveCamera=s;var t=require("./Camera.js"),i=require("../core/Object3D.js"),e=require("../math/Math.js");function s(i,e,s,h){t.Camera.call(this),this.type="PerspectiveCamera",this.fov=void 0!==i?i:50,this.zoom=1,this.near=void 0!==s?s:.1,this.far=void 0!==h?h:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}s.prototype=Object.assign(Object.create(t.Camera.prototype),{constructor:s,isPerspectiveCamera:!0,copy:function(i,e){return t.Camera.prototype.copy.call(this,i,e),this.fov=i.fov,this.zoom=i.zoom,this.near=i.near,this.far=i.far,this.focus=i.focus,this.aspect=i.aspect,this.view=null===i.view?null:Object.assign({},i.view),this.filmGauge=i.filmGauge,this.filmOffset=i.filmOffset,this},setFocalLength:function(t){var i=.5*this.getFilmHeight()/t;this.fov=2*e._Math.RAD2DEG*Math.atan(i),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*e._Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*e._Math.RAD2DEG*Math.atan(Math.tan(.5*e._Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,i,e,s,h,a){this.aspect=t/i,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=e,this.view.offsetY=s,this.view.width=h,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,i=t*Math.tan(.5*e._Math.DEG2RAD*this.fov)/this.zoom,s=2*i,h=this.aspect*s,a=-.5*h,o=this.view;if(null!==this.view&&this.view.enabled){var f=o.fullWidth,r=o.fullHeight;a+=o.offsetX*h/f,i-=o.offsetY*s/r,h*=o.width/f,s*=o.height/r}var n=this.filmOffset;0!==n&&(a+=t*n/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+h,i,i-s,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});
},{"./Camera.js":"xKHR","../core/Object3D.js":"dsa9","../math/Math.js":"CA9T"}],"XR51":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scene=e;var t=require("../core/Object3D.js");function e(){t.Object3D.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}e.prototype=Object.assign(Object.create(t.Object3D.prototype),{constructor:e,isScene:!0,copy:function(e,o){return t.Object3D.prototype.copy.call(this,e,o),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var o=t.Object3D.prototype.toJSON.call(this,e);return null!==this.background&&(o.object.background=this.background.toJSON(e)),null!==this.fog&&(o.object.fog=this.fog.toJSON()),o},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"../core/Object3D.js":"dsa9"}],"p5pl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Geometry=f;var e=require("./EventDispatcher.js"),t=require("./Face3.js"),r=require("../math/Matrix3.js"),o=require("../math/Sphere.js"),s=require("../math/Box3.js"),i=require("../math/Vector3.js"),a=require("../math/Matrix4.js"),n=require("../math/Vector2.js"),h=require("../math/Color.js"),l=require("./Object3D.js"),c=require("../math/Math.js"),v=0,m=new a.Matrix4,u=new l.Object3D,p=new i.Vector3;function f(){Object.defineProperty(this,"id",{value:v+=2}),this.uuid=c._Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}f.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:f,isGeometry:!0,applyMatrix:function(e){for(var t=(new r.Matrix3).getNormalMatrix(e),o=0,s=this.vertices.length;o<s;o++){this.vertices[o].applyMatrix4(e)}for(o=0,s=this.faces.length;o<s;o++){var i=this.faces[o];i.normal.applyMatrix3(t).normalize();for(var a=0,n=i.vertexNormals.length;a<n;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return m.makeRotationX(e),this.applyMatrix(m),this},rotateY:function(e){return m.makeRotationY(e),this.applyMatrix(m),this},rotateZ:function(e){return m.makeRotationZ(e),this.applyMatrix(m),this},translate:function(e,t,r){return m.makeTranslation(e,t,r),this.applyMatrix(m),this},scale:function(e,t,r){return m.makeScale(e,t,r),this.applyMatrix(m),this},lookAt:function(e){return u.lookAt(e),u.updateMatrix(),this.applyMatrix(u.matrix),this},fromBufferGeometry:function(e){var r=this,o=null!==e.index?e.index.array:void 0,s=e.attributes,a=s.position.array,l=void 0!==s.normal?s.normal.array:void 0,c=void 0!==s.color?s.color.array:void 0,v=void 0!==s.uv?s.uv.array:void 0,m=void 0!==s.uv2?s.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var u=0;u<a.length;u+=3)r.vertices.push((new i.Vector3).fromArray(a,u)),void 0!==c&&r.colors.push((new h.Color).fromArray(c,u));function p(e,o,s,a){var h=void 0===c?[]:[r.colors[e].clone(),r.colors[o].clone(),r.colors[s].clone()],u=void 0===l?[]:[(new i.Vector3).fromArray(l,3*e),(new i.Vector3).fromArray(l,3*o),(new i.Vector3).fromArray(l,3*s)],p=new t.Face3(e,o,s,u,h,a);r.faces.push(p),void 0!==v&&r.faceVertexUvs[0].push([(new n.Vector2).fromArray(v,2*e),(new n.Vector2).fromArray(v,2*o),(new n.Vector2).fromArray(v,2*s)]),void 0!==m&&r.faceVertexUvs[1].push([(new n.Vector2).fromArray(m,2*e),(new n.Vector2).fromArray(m,2*o),(new n.Vector2).fromArray(m,2*s)])}var f=e.groups;if(f.length>0)for(u=0;u<f.length;u++)for(var d=f[u],g=d.start,x=g,N=g+d.count;x<N;x+=3)void 0!==o?p(o[x],o[x+1],o[x+2],d.materialIndex):p(x,x+1,x+2,d.materialIndex);else if(void 0!==o)for(u=0;u<o.length;u+=3)p(o[u],o[u+1],o[u+2]);else for(u=0;u<a.length/3;u+=3)p(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(p).negate(),this.translate(p.x,p.y,p.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,o=new a.Matrix4;return o.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(o),this},computeFaceNormals:function(){for(var e=new i.Vector3,t=new i.Vector3,r=0,o=this.faces.length;r<o;r++){var s=this.faces[r],a=this.vertices[s.a],n=this.vertices[s.b],h=this.vertices[s.c];e.subVectors(h,n),t.subVectors(a,n),e.cross(t),e.normalize(),s.normal.copy(e)}},computeVertexNormals:function(e){var t,r,o,s,a,n;for(void 0===e&&(e=!0),n=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)n[t]=new i.Vector3;if(e){var h,l,c,v=new i.Vector3,m=new i.Vector3;for(o=0,s=this.faces.length;o<s;o++)a=this.faces[o],h=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c],v.subVectors(c,l),m.subVectors(h,l),v.cross(m),n[a.a].add(v),n[a.b].add(v),n[a.c].add(v)}else for(this.computeFaceNormals(),o=0,s=this.faces.length;o<s;o++)n[(a=this.faces[o]).a].add(a.normal),n[a.b].add(a.normal),n[a.c].add(a.normal);for(t=0,r=this.vertices.length;t<r;t++)n[t].normalize();for(o=0,s=this.faces.length;o<s;o++){var u=(a=this.faces[o]).vertexNormals;3===u.length?(u[0].copy(n[a.a]),u[1].copy(n[a.b]),u[2].copy(n[a.c])):(u[0]=n[a.a].clone(),u[1]=n[a.b].clone(),u[2]=n[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var o=(r=this.faces[e]).vertexNormals;3===o.length?(o[0].copy(r.normal),o[1].copy(r.normal),o[2].copy(r.normal)):(o[0]=r.normal.clone(),o[1]=r.normal.clone(),o[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,o,s;for(r=0,o=this.faces.length;r<o;r++)for((s=this.faces[r]).__originalFaceNormal?s.__originalFaceNormal.copy(s.normal):s.__originalFaceNormal=s.normal.clone(),s.__originalVertexNormals||(s.__originalVertexNormals=[]),e=0,t=s.vertexNormals.length;e<t;e++)s.__originalVertexNormals[e]?s.__originalVertexNormals[e].copy(s.vertexNormals[e]):s.__originalVertexNormals[e]=s.vertexNormals[e].clone();var a=new f;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var n=this.morphNormals[e].faceNormals,h=this.morphNormals[e].vertexNormals;for(r=0,o=this.faces.length;r<o;r++)l=new i.Vector3,c={a:new i.Vector3,b:new i.Vector3,c:new i.Vector3},n.push(l),h.push(c)}var l,c,v=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),r=0,o=this.faces.length;r<o;r++)s=this.faces[r],l=v.faceNormals[r],c=v.vertexNormals[r],l.copy(s.normal),c.a.copy(s.vertexNormals[0]),c.b.copy(s.vertexNormals[1]),c.c.copy(s.vertexNormals[2])}for(r=0,o=this.faces.length;r<o;r++)(s=this.faces[r]).normal=s.__originalFaceNormal,s.vertexNormals=s.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new s.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,o,s){if(e&&e.isGeometry){var i,a=this.vertices.length,n=this.vertices,h=e.vertices,l=this.faces,c=e.faces,v=this.colors,m=e.colors;void 0===s&&(s=0),void 0!==o&&(i=(new r.Matrix3).getNormalMatrix(o));for(var u=0,p=h.length;u<p;u++){var f=h[u].clone();void 0!==o&&f.applyMatrix4(o),n.push(f)}for(u=0,p=m.length;u<p;u++)v.push(m[u].clone());for(u=0,p=c.length;u<p;u++){var d,g,x,N=c[u],y=N.vertexNormals,V=N.vertexColors;(d=new t.Face3(N.a+a,N.b+a,N.c+a)).normal.copy(N.normal),void 0!==i&&d.normal.applyMatrix3(i).normalize();for(var b=0,U=y.length;b<U;b++)g=y[b].clone(),void 0!==i&&g.applyMatrix3(i).normalize(),d.vertexNormals.push(g);d.color.copy(N.color);for(b=0,U=V.length;b<U;b++)x=V[b],d.vertexColors.push(x.clone());d.materialIndex=N.materialIndex+s,l.push(d)}for(u=0,p=e.faceVertexUvs.length;u<p;u++){var M=e.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(b=0,U=M.length;b<U;b++){for(var w=M[b],S=[],_=0,B=w.length;_<B;_++)S.push(w[_].clone());this.faceVertexUvs[u].push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,o,s,i,a,n,h={},l=[],c=[],v=Math.pow(10,4);for(r=0,o=this.vertices.length;r<o;r++)e=this.vertices[r],void 0===h[t=Math.round(e.x*v)+"_"+Math.round(e.y*v)+"_"+Math.round(e.z*v)]?(h[t]=r,l.push(this.vertices[r]),c[r]=l.length-1):c[r]=c[h[t]];var m=[];for(r=0,o=this.faces.length;r<o;r++){(s=this.faces[r]).a=c[s.a],s.b=c[s.b],s.c=c[s.c],i=[s.a,s.b,s.c];for(var u=0;u<3;u++)if(i[u]===i[(u+1)%3]){m.push(r);break}}for(r=m.length-1;r>=0;r--){var p=m[r];for(this.faces.splice(p,1),a=0,n=this.faceVertexUvs.length;a<n;a++)this.faceVertexUvs[a].splice(p,1)}var f=this.vertices.length-l.length;return this.vertices=l,f},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var o=e[t];this.vertices.push(new i.Vector3(o.x,o.y,o.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var o,s,i=this.faceVertexUvs[0],a=this.faceVertexUvs[1];i&&i.length===t&&(o=[]),a&&a.length===t&&(s=[]);for(r=0;r<t;r++){var n=e[r]._id;o&&o.push(i[n]),s&&s.push(a[n])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var o=[],s=0;s<this.vertices.length;s++){var i=this.vertices[s];o.push(i.x,i.y,i.z)}var a=[],n=[],h={},l=[],c={},v=[],m={};for(s=0;s<this.faces.length;s++){var u=this.faces[s],p=void 0!==this.faceVertexUvs[0][s],f=u.normal.length()>0,d=u.vertexNormals.length>0,g=1!==u.color.r||1!==u.color.g||1!==u.color.b,x=u.vertexColors.length>0,N=0;if(N=U(N,0,0),N=U(N,1,!0),N=U(N,2,!1),N=U(N,3,p),N=U(N,4,f),N=U(N,5,d),N=U(N,6,g),N=U(N,7,x),a.push(N),a.push(u.a,u.b,u.c),a.push(u.materialIndex),p){var y=this.faceVertexUvs[0][s];a.push(S(y[0]),S(y[1]),S(y[2]))}if(f&&a.push(M(u.normal)),d){var V=u.vertexNormals;a.push(M(V[0]),M(V[1]),M(V[2]))}if(g&&a.push(w(u.color)),x){var b=u.vertexColors;a.push(w(b[0]),w(b[1]),w(b[2]))}}function U(e,t,r){return r?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==h[t]?h[t]:(h[t]=n.length/3,n.push(e.x,e.y,e.z),h[t])}function w(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=l.length,l.push(e.getHex()),c[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==m[t]?m[t]:(m[t]=v.length/2,v.push(e.x,e.y),m[t])}return e.data={},e.data.vertices=o,e.data.normals=n,l.length>0&&(e.data.colors=l),v.length>0&&(e.data.uvs=[v]),e.data.faces=a,e},clone:function(){return(new f).copy(this)},copy:function(e){var t,r,o,s,i,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var n=e.vertices;for(t=0,r=n.length;t<r;t++)this.vertices.push(n[t].clone());var h=e.colors;for(t=0,r=h.length;t<r;t++)this.colors.push(h[t].clone());var l=e.faces;for(t=0,r=l.length;t<r;t++)this.faces.push(l[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),o=0,s=c.length;o<s;o++){var v=c[o],m=[];for(i=0,a=v.length;i<a;i++){var u=v[i];m.push(u.clone())}this.faceVertexUvs[t].push(m)}}var p=e.morphTargets;for(t=0,r=p.length;t<r;t++){var f={};if(f.name=p[t].name,void 0!==p[t].vertices)for(f.vertices=[],o=0,s=p[t].vertices.length;o<s;o++)f.vertices.push(p[t].vertices[o].clone());if(void 0!==p[t].normals)for(f.normals=[],o=0,s=p[t].normals.length;o<s;o++)f.normals.push(p[t].normals[o].clone());this.morphTargets.push(f)}var d=e.morphNormals;for(t=0,r=d.length;t<r;t++){var g={};if(void 0!==d[t].vertexNormals)for(g.vertexNormals=[],o=0,s=d[t].vertexNormals.length;o<s;o++){var x=d[t].vertexNormals[o],N={};N.a=x.a.clone(),N.b=x.b.clone(),N.c=x.c.clone(),g.vertexNormals.push(N)}if(void 0!==d[t].faceNormals)for(g.faceNormals=[],o=0,s=d[t].faceNormals.length;o<s;o++)g.faceNormals.push(d[t].faceNormals[o].clone());this.morphNormals.push(g)}var y=e.skinWeights;for(t=0,r=y.length;t<r;t++)this.skinWeights.push(y[t].clone());var V=e.skinIndices;for(t=0,r=V.length;t<r;t++)this.skinIndices.push(V[t].clone());var b=e.lineDistances;for(t=0,r=b.length;t<r;t++)this.lineDistances.push(b[t]);var U=e.boundingBox;null!==U&&(this.boundingBox=U.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"./EventDispatcher.js":"0HfK","./Face3.js":"sH8I","../math/Matrix3.js":"Aj5L","../math/Sphere.js":"rWqY","../math/Box3.js":"B3O6","../math/Vector3.js":"QOxd","../math/Matrix4.js":"q1h8","../math/Vector2.js":"edIZ","../math/Color.js":"w/VZ","./Object3D.js":"dsa9","../math/Math.js":"CA9T"}],"PYAj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SphereGeometry=h,exports.SphereBufferGeometry=a;var t=require("../core/Geometry.js"),e=require("../core/BufferGeometry.js"),r=require("../core/BufferAttribute.js"),o=require("../math/Vector3.js");function h(e,r,o,h,i,s,u){t.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:o,phiStart:h,phiLength:i,thetaStart:s,thetaLength:u},this.fromBufferGeometry(new a(e,r,o,h,i,s,u)),this.mergeVertices()}function a(t,h,a,i,s,u,p){e.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:h,heightSegments:a,phiStart:i,phiLength:s,thetaStart:u,thetaLength:p},t=t||1,h=Math.max(3,Math.floor(h)||8),a=Math.max(2,Math.floor(a)||6),i=void 0!==i?i:0,s=void 0!==s?s:2*Math.PI,u=void 0!==u?u:0,p=void 0!==p?p:Math.PI;var f,n,m=Math.min(u+p,Math.PI),c=0,y=[],d=new o.Vector3,M=new o.Vector3,l=[],S=[],g=[],v=[];for(n=0;n<=a;n++){var G=[],b=n/a,B=0;for(0==n&&0==u?B=.5/h:n==a&&m==Math.PI&&(B=-.5/h),f=0;f<=h;f++){var x=f/h;d.x=-t*Math.cos(i+x*s)*Math.sin(u+b*p),d.y=t*Math.cos(u+b*p),d.z=t*Math.sin(i+x*s)*Math.sin(u+b*p),S.push(d.x,d.y,d.z),M.copy(d).normalize(),g.push(M.x,M.y,M.z),v.push(x+B,1-b),G.push(c++)}y.push(G)}for(n=0;n<a;n++)for(f=0;f<h;f++){var w=y[n][f+1],j=y[n][f],A=y[n+1][f],I=y[n+1][f+1];(0!==n||u>0)&&l.push(w,j,I),(n!==a-1||m<Math.PI)&&l.push(j,A,I)}this.setIndex(l),this.addAttribute("position",new r.Float32BufferAttribute(S,3)),this.addAttribute("normal",new r.Float32BufferAttribute(g,3)),this.addAttribute("uv",new r.Float32BufferAttribute(v,2))}h.prototype=Object.create(t.Geometry.prototype),h.prototype.constructor=h,a.prototype=Object.create(e.BufferGeometry.prototype),a.prototype.constructor=a;
},{"../core/Geometry.js":"p5pl","../core/BufferGeometry.js":"kSEB","../core/BufferAttribute.js":"0uom","../math/Vector3.js":"QOxd"}],"l3zp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Spherical=i;var t=require("./Math.js");function i(t,i,s){return this.radius=void 0!==t?t:1,this.phi=void 0!==i?i:0,this.theta=void 0!==s?s:0,this}Object.assign(i.prototype,{set:function(t,i,s){return this.radius=t,this.phi=i,this.theta=s,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(i,s,h){return this.radius=Math.sqrt(i*i+s*s+h*h),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(i,h),this.phi=Math.acos(t._Math.clamp(s/this.radius,-1,1))),this}});
},{"./Math.js":"CA9T"}],"jViz":[function(require,module,exports) {
"use strict";function t(t,r){this.array=t,this.stride=r,this.count=void 0!==t?t.length/r:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InterleavedBuffer=t,Object.defineProperty(t.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(t.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,r,e){t*=this.stride,e*=r.stride;for(var i=0,n=this.stride;i<n;i++)this.array[t+i]=r.array[e+i];return this},set:function(t,r){return void 0===r&&(r=0),this.array.set(t,r),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});
},{}],"LyHU":[function(require,module,exports) {
"use strict";function t(t,a,r,s){this.data=t,this.itemSize=a,this.offset=r,this.normalized=!0===s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InterleavedBufferAttribute=t,Object.defineProperties(t.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(t.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,a){return this.data.array[t*this.data.stride+this.offset]=a,this},setY:function(t,a){return this.data.array[t*this.data.stride+this.offset+1]=a,this},setZ:function(t,a){return this.data.array[t*this.data.stride+this.offset+2]=a,this},setW:function(t,a){return this.data.array[t*this.data.stride+this.offset+3]=a,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,a,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=a,this.data.array[t+1]=r,this},setXYZ:function(t,a,r,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=a,this.data.array[t+1]=r,this.data.array[t+2]=s,this},setXYZW:function(t,a,r,s,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=a,this.data.array[t+1]=r,this.data.array[t+2]=s,this.data.array[t+3]=i,this}});
},{}],"mo1A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpriteMaterial=i;var t=require("./Material.js"),e=require("../math/Color.js");function i(i){t.Material.call(this),this.type="SpriteMaterial",this.color=new e.Color(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(i)}i.prototype=Object.create(t.Material.prototype),i.prototype.constructor=i,i.prototype.isSpriteMaterial=!0,i.prototype.copy=function(e){return t.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};
},{"./Material.js":"ie8i","../math/Color.js":"w/VZ"}],"P8mW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sprite=b;var e,t=require("../math/Vector2.js"),r=require("../math/Vector3.js"),i=require("../math/Matrix4.js"),a=require("../math/Triangle.js"),o=require("../core/Object3D.js"),n=require("../core/BufferGeometry.js"),c=require("../core/InterleavedBuffer.js"),s=require("../core/InterleavedBufferAttribute.js"),l=require("../materials/SpriteMaterial.js"),u=new r.Vector3,p=new r.Vector3,y=new r.Vector3,m=new t.Vector2,d=new t.Vector2,h=new i.Matrix4,f=new r.Vector3,w=new r.Vector3,v=new r.Vector3,x=new t.Vector2,V=new t.Vector2,j=new t.Vector2;function b(r){if(o.Object3D.call(this),this.type="Sprite",void 0===e){e=new n.BufferGeometry;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new c.InterleavedBuffer(i,5);e.setIndex([0,1,2,0,2,3]),e.addAttribute("position",new s.InterleavedBufferAttribute(a,3,0,!1)),e.addAttribute("uv",new s.InterleavedBufferAttribute(a,2,3,!1))}this.geometry=e,this.material=void 0!==r?r:new l.SpriteMaterial,this.center=new t.Vector2(.5,.5)}function M(e,t,r,i,a,o){m.subVectors(e,r).addScalar(.5).multiply(i),void 0!==a?(d.x=o*m.x-a*m.y,d.y=a*m.x+o*m.y):d.copy(m),e.copy(t),e.x+=d.x,e.y+=d.y,e.applyMatrix4(h)}b.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:b,isSprite:!0,raycast:function(e,r){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),p.setFromMatrixScale(this.matrixWorld),h.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),y.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&p.multiplyScalar(-y.z);var i,o,n=this.material.rotation;0!==n&&(o=Math.cos(n),i=Math.sin(n));var c=this.center;M(f.set(-.5,-.5,0),y,c,p,i,o),M(w.set(.5,-.5,0),y,c,p,i,o),M(v.set(.5,.5,0),y,c,p,i,o),x.set(0,0),V.set(1,0),j.set(1,1);var s=e.ray.intersectTriangle(f,w,v,!1,u);if(null!==s||(M(w.set(-.5,.5,0),y,c,p,i,o),V.set(0,1),null!==(s=e.ray.intersectTriangle(f,v,w,!1,u)))){var l=e.ray.origin.distanceTo(u);l<e.near||l>e.far||r.push({distance:l,point:u.clone(),uv:a.Triangle.getUV(u,f,w,v,x,V,j,new t.Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return o.Object3D.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});
},{"../math/Vector2.js":"edIZ","../math/Vector3.js":"QOxd","../math/Matrix4.js":"q1h8","../math/Triangle.js":"ec/s","../core/Object3D.js":"dsa9","../core/BufferGeometry.js":"kSEB","../core/InterleavedBuffer.js":"jViz","../core/InterleavedBufferAttribute.js":"LyHU","../materials/SpriteMaterial.js":"mo1A"}],"5Lyc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataTexture=r;var t=require("./Texture.js"),e=require("../constants.js");function r(r,i,s,a,o,p,u,l,n,c,h,x){t.Texture.call(this,null,p,u,l,n,c,a,o,h,x),this.image={data:r,width:i,height:s},this.magFilter=void 0!==n?n:e.NearestFilter,this.minFilter=void 0!==c?c:e.NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}r.prototype=Object.create(t.Texture.prototype),r.prototype.constructor=r,r.prototype.isDataTexture=!0;
},{"./Texture.js":"X6VN","../constants.js":"PJkd"}],"KNov":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";exports.default=e;
},{}],"k0Zg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n";exports.default=e;
},{}],"mwXS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n";exports.default=e;
},{}],"LGer":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"lzxM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n";exports.default=e;
},{}],"9fI0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvec3 transformed = vec3( position );\n";exports.default=e;
},{}],"XD2w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n";exports.default=e;
},{}],"MK6e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n='\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)⋅G(v) / 4(n⋅l)(n⋅v)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agüera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n';exports.default=n;
},{}],"sOr0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"xYFx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"ZPRr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if NUM_CLIPPING_PLANES > 0\n\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n";exports.default=e;
},{}],"qsU/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n";exports.default=e;
},{}],"nmul":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";exports.default=e;
},{}],"Knhg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n";exports.default=e;
},{}],"XTeY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n";exports.default=e;
},{}],"e2gi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n";exports.default=e;
},{}],"Ei8P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n";exports.default=n;
},{}],"YwpG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_textureSize (1024.0)\n\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\n\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\t// Clamp the value to the max mip level counts. hard coded to 6 mips\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\n\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\t// float powScale = exp2(roughnessLevel + mipLevel);\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\n\tfloat rcpPowScale = 1.0 / powScale;\n\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\n\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\n\t// round to nearest mipmap if we are not interpolating.\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\n\t// Tri linear interpolation.\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\n\tvec4 result = mix(color10, color20, t);\n\n\treturn vec4(result.rgb, 1.0);\n}\n\n#endif\n";exports.default=e;
},{}],"AKch":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nvec3 transformedNormal = normalMatrix * objectNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"nAWZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n";exports.default=e;
},{}],"kSF5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n";exports.default=e;
},{}],"NDOD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n";exports.default=e;
},{}],"idZ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n";exports.default=e;
},{}],"2lgt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n";exports.default=e;
},{}],"Hqfc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n";exports.default=e;
},{}],"5DOf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\tenvColor = envMapTexelToLinear( envColor );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"jwi9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n";exports.default=n;
},{}],"QWOR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"+XV2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"aX3D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"zdW8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n";exports.default=e;
},{}],"2O1p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n";exports.default=e;
},{}],"4DPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o="\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n";exports.default=o;
},{}],"PG76":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n";exports.default=n;
},{}],"KPc9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef TOON\n\n\tuniform sampler2D gradientMap;\n\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t\t// dotNL will be from -1.0 to 1.0\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t\t#ifdef USE_GRADIENTMAP\n\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t\t#else\n\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t\t#endif\n\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"MMOQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_LIGHTMAP\n\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n";exports.default=e;
},{}],"og6c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n";exports.default=e;
},{}],"mN5G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"lPZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"4LGc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t  // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n";exports.default=e;
},{}],"4zgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";exports.default=e;
},{}],"75Y3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t#ifdef TOON\n\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#else\n\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\n\t#endif\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n";exports.default=e;
},{}],"3uz3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = saturate( clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n\n#endif\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n";exports.default=e;
},{}],"O2lc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and diffuse light accumulate here\n\t// if energy preservation enabled, and PMREM provided.\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n";exports.default=t;
},{}],"i+rI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n";exports.default=t;
},{}],"ElNJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"G5JB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n";exports.default=e;
},{}],"f/2T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n";exports.default=e;
},{}],"fH8j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\n#endif\n";exports.default=e;
},{}],"lFrH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"QZXE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n\t#else\n\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\tgl_Position.z *= gl_Position.w;\n\n\t#endif\n\n#endif\n";exports.default=t;
},{}],"eVYc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n";exports.default=e;
},{}],"Qt7j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n";exports.default=e;
},{}],"krIR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MAP\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n";exports.default=e;
},{}],"yhjd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MAP\n\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n\n#endif\n";exports.default=e;
},{}],"N/w+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n";exports.default=e;
},{}],"iY2w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n";exports.default=e;
},{}],"zV5K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n";exports.default=e;
},{}],"otpl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"dexu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n";exports.default=e;
},{}],"Hkkz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n";exports.default=n;
},{}],"Ckzv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\t#ifdef USE_TANGENT\n\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n";exports.default=n;
},{}],"zCt7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\n\t\tmapN.xy *= normalScale;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t// Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331\n\t\t\t// http://hacksoflife.blogspot.com/2009/11/per-pixel-tangent-space-normal-mapping.html?showComment=1522254677437#c5087545147696715943\n\t\t\tvec3 NfromST = cross( S, T );\n\t\t\tif( dot( NfromST, N ) > 0.0 ) {\n\n\t\t\t\tS *= -1.0;\n\t\t\t\tT *= -1.0;\n\n\t\t\t}\n\n\t\t#else\n\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"iNMG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n";exports.default=e;
},{}],"86cA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a="\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\t#ifdef USE_TANGENT\n\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\n\t#endif\n\n#endif\n";exports.default=a;
},{}],"lf3G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n";exports.default=e;
},{}],"V5OH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\n\treturn encoded;\n}\n\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";exports.default=n;
},{}],"JQfF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n";exports.default=e;
},{}],"+8n7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\ngl_Position = projectionMatrix * mvPosition;\n";exports.default=e;
},{}],"OBFz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n";exports.default=e;
},{}],"oezk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n";exports.default=t;
},{}],"kmXh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n";exports.default=e;
},{}],"y68a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n";exports.default=e;
},{}],"vnwU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\n\t\tvec2 f = fract( uv * size + 0.5 );\n\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\n\t\treturn c;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n";exports.default=t;
},{}],"KwZS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n";exports.default=n;
},{}],"CcNA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n";exports.default=n;
},{}],"X3G0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n";exports.default=t;
},{}],"kS3S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n";exports.default=e;
},{}],"whkf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n";exports.default=t;
},{}],"QkBc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n";exports.default=e;
},{}],"FZiI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t="\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n";exports.default=t;
},{}],"Ooi8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n";exports.default=e;
},{}],"Uinc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n";exports.default=e;
},{}],"eA/3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n";exports.default=e;
},{}],"e5gp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n";exports.default=n;
},{}],"sjok":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_UV\n\n\tvarying vec2 vUv;\n\n#endif\n";exports.default=e;
},{}],"1OnX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_UV\n\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n\n#endif\n";exports.default=e;
},{}],"TXHS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n";exports.default=e;
},{}],"kP7q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n";exports.default=e;
},{}],"T1nG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif\n";exports.default=e;
},{}],"Nwh9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif\n";exports.default=e;
},{}],"nPmS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n#endif\n";exports.default=e;
},{}],"9ZFC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n";exports.default=e;
},{}],"99zd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n";exports.default=n;
},{}],"VCkl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\nvoid main() {\n\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n";exports.default=e;
},{}],"y2Yh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n";exports.default=n;
},{}],"BzW/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\n\t#endif\n\n}\n";exports.default=n;
},{}],"LMu0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n";exports.default=e;
},{}],"D8Vg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n";exports.default=n;
},{}],"ghsB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n";exports.default=n;
},{}],"re/s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n";exports.default=n;
},{}],"h6iu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n";exports.default=e;
},{}],"KMKf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"Vs0u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\n\tvLineDistance = scale * lineDistance;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"gc7x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"ELvt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"q7RL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";exports.default=n;
},{}],"6vNA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";exports.default=e;
},{}],"S7K6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"kFc1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n";exports.default=e;
},{}],"wZIj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";exports.default=n;
},{}],"oiDx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"IgEM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transparency model\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n";exports.default=n;
},{}],"OgHG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=n;
},{}],"INsT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n";exports.default=n;
},{}],"Iyc5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n";exports.default=n;
},{}],"f1G/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"O/Zb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"klV1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"gG97":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=e;
},{}],"rHKr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n";exports.default=n;
},{}],"+/Ya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n";exports.default=n;
},{}],"FTRQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderChunk=void 0;var e=pr(require("./ShaderChunk/alphamap_fragment.glsl.js")),r=pr(require("./ShaderChunk/alphamap_pars_fragment.glsl.js")),a=pr(require("./ShaderChunk/alphatest_fragment.glsl.js")),l=pr(require("./ShaderChunk/aomap_fragment.glsl.js")),s=pr(require("./ShaderChunk/aomap_pars_fragment.glsl.js")),t=pr(require("./ShaderChunk/begin_vertex.glsl.js")),u=pr(require("./ShaderChunk/beginnormal_vertex.glsl.js")),_=pr(require("./ShaderChunk/bsdfs.glsl.js")),g=pr(require("./ShaderChunk/bumpmap_pars_fragment.glsl.js")),n=pr(require("./ShaderChunk/clipping_planes_fragment.glsl.js")),h=pr(require("./ShaderChunk/clipping_planes_pars_fragment.glsl.js")),d=pr(require("./ShaderChunk/clipping_planes_pars_vertex.glsl.js")),i=pr(require("./ShaderChunk/clipping_planes_vertex.glsl.js")),f=pr(require("./ShaderChunk/color_fragment.glsl.js")),m=pr(require("./ShaderChunk/color_pars_fragment.glsl.js")),p=pr(require("./ShaderChunk/color_pars_vertex.glsl.js")),o=pr(require("./ShaderChunk/color_vertex.glsl.js")),q=pr(require("./ShaderChunk/common.glsl.js")),j=pr(require("./ShaderChunk/cube_uv_reflection_fragment.glsl.js")),v=pr(require("./ShaderChunk/defaultnormal_vertex.glsl.js")),S=pr(require("./ShaderChunk/displacementmap_pars_vertex.glsl.js")),k=pr(require("./ShaderChunk/displacementmap_vertex.glsl.js")),C=pr(require("./ShaderChunk/emissivemap_fragment.glsl.js")),c=pr(require("./ShaderChunk/emissivemap_pars_fragment.glsl.js")),b=pr(require("./ShaderChunk/encodings_fragment.glsl.js")),x=pr(require("./ShaderChunk/encodings_pars_fragment.glsl.js")),L=pr(require("./ShaderChunk/envmap_fragment.glsl.js")),w=pr(require("./ShaderChunk/envmap_common_pars_fragment.glsl.js")),y=pr(require("./ShaderChunk/envmap_pars_fragment.glsl.js")),A=pr(require("./ShaderChunk/envmap_pars_vertex.glsl.js")),B=pr(require("./ShaderChunk/envmap_vertex.glsl.js")),G=pr(require("./ShaderChunk/fog_vertex.glsl.js")),R=pr(require("./ShaderChunk/fog_pars_vertex.glsl.js")),M=pr(require("./ShaderChunk/fog_fragment.glsl.js")),O=pr(require("./ShaderChunk/fog_pars_fragment.glsl.js")),P=pr(require("./ShaderChunk/gradientmap_pars_fragment.glsl.js")),z=pr(require("./ShaderChunk/lightmap_fragment.glsl.js")),D=pr(require("./ShaderChunk/lightmap_pars_fragment.glsl.js")),E=pr(require("./ShaderChunk/lights_lambert_vertex.glsl.js")),F=pr(require("./ShaderChunk/lights_pars_begin.glsl.js")),H=pr(require("./ShaderChunk/envmap_physical_pars_fragment.glsl.js")),I=pr(require("./ShaderChunk/lights_phong_fragment.glsl.js")),J=pr(require("./ShaderChunk/lights_phong_pars_fragment.glsl.js")),K=pr(require("./ShaderChunk/lights_physical_fragment.glsl.js")),N=pr(require("./ShaderChunk/lights_physical_pars_fragment.glsl.js")),Q=pr(require("./ShaderChunk/lights_fragment_begin.glsl.js")),T=pr(require("./ShaderChunk/lights_fragment_maps.glsl.js")),U=pr(require("./ShaderChunk/lights_fragment_end.glsl.js")),V=pr(require("./ShaderChunk/logdepthbuf_fragment.glsl.js")),W=pr(require("./ShaderChunk/logdepthbuf_pars_fragment.glsl.js")),X=pr(require("./ShaderChunk/logdepthbuf_pars_vertex.glsl.js")),Y=pr(require("./ShaderChunk/logdepthbuf_vertex.glsl.js")),Z=pr(require("./ShaderChunk/map_fragment.glsl.js")),$=pr(require("./ShaderChunk/map_pars_fragment.glsl.js")),ee=pr(require("./ShaderChunk/map_particle_fragment.glsl.js")),re=pr(require("./ShaderChunk/map_particle_pars_fragment.glsl.js")),ae=pr(require("./ShaderChunk/metalnessmap_fragment.glsl.js")),le=pr(require("./ShaderChunk/metalnessmap_pars_fragment.glsl.js")),se=pr(require("./ShaderChunk/morphnormal_vertex.glsl.js")),te=pr(require("./ShaderChunk/morphtarget_pars_vertex.glsl.js")),ue=pr(require("./ShaderChunk/morphtarget_vertex.glsl.js")),_e=pr(require("./ShaderChunk/normal_fragment_begin.glsl.js")),ge=pr(require("./ShaderChunk/normal_fragment_maps.glsl.js")),ne=pr(require("./ShaderChunk/normalmap_pars_fragment.glsl.js")),he=pr(require("./ShaderChunk/clearcoat_normal_fragment_begin.glsl.js")),de=pr(require("./ShaderChunk/clearcoat_normal_fragment_maps.glsl.js")),ie=pr(require("./ShaderChunk/clearcoat_normalmap_pars_fragment.glsl.js")),fe=pr(require("./ShaderChunk/packing.glsl.js")),me=pr(require("./ShaderChunk/premultiplied_alpha_fragment.glsl.js")),pe=pr(require("./ShaderChunk/project_vertex.glsl.js")),oe=pr(require("./ShaderChunk/dithering_fragment.glsl.js")),qe=pr(require("./ShaderChunk/dithering_pars_fragment.glsl.js")),je=pr(require("./ShaderChunk/roughnessmap_fragment.glsl.js")),ve=pr(require("./ShaderChunk/roughnessmap_pars_fragment.glsl.js")),Se=pr(require("./ShaderChunk/shadowmap_pars_fragment.glsl.js")),ke=pr(require("./ShaderChunk/shadowmap_pars_vertex.glsl.js")),Ce=pr(require("./ShaderChunk/shadowmap_vertex.glsl.js")),ce=pr(require("./ShaderChunk/shadowmask_pars_fragment.glsl.js")),be=pr(require("./ShaderChunk/skinbase_vertex.glsl.js")),xe=pr(require("./ShaderChunk/skinning_pars_vertex.glsl.js")),Le=pr(require("./ShaderChunk/skinning_vertex.glsl.js")),we=pr(require("./ShaderChunk/skinnormal_vertex.glsl.js")),ye=pr(require("./ShaderChunk/specularmap_fragment.glsl.js")),Ae=pr(require("./ShaderChunk/specularmap_pars_fragment.glsl.js")),Be=pr(require("./ShaderChunk/tonemapping_fragment.glsl.js")),Ge=pr(require("./ShaderChunk/tonemapping_pars_fragment.glsl.js")),Re=pr(require("./ShaderChunk/uv_pars_fragment.glsl.js")),Me=pr(require("./ShaderChunk/uv_pars_vertex.glsl.js")),Oe=pr(require("./ShaderChunk/uv_vertex.glsl.js")),Pe=pr(require("./ShaderChunk/uv2_pars_fragment.glsl.js")),ze=pr(require("./ShaderChunk/uv2_pars_vertex.glsl.js")),De=pr(require("./ShaderChunk/uv2_vertex.glsl.js")),Ee=pr(require("./ShaderChunk/worldpos_vertex.glsl.js")),Fe=pr(require("./ShaderLib/background_frag.glsl.js")),He=pr(require("./ShaderLib/background_vert.glsl.js")),Ie=pr(require("./ShaderLib/cube_frag.glsl.js")),Je=pr(require("./ShaderLib/cube_vert.glsl.js")),Ke=pr(require("./ShaderLib/depth_frag.glsl.js")),Ne=pr(require("./ShaderLib/depth_vert.glsl.js")),Qe=pr(require("./ShaderLib/distanceRGBA_frag.glsl.js")),Te=pr(require("./ShaderLib/distanceRGBA_vert.glsl.js")),Ue=pr(require("./ShaderLib/equirect_frag.glsl.js")),Ve=pr(require("./ShaderLib/equirect_vert.glsl.js")),We=pr(require("./ShaderLib/linedashed_frag.glsl.js")),Xe=pr(require("./ShaderLib/linedashed_vert.glsl.js")),Ye=pr(require("./ShaderLib/meshbasic_frag.glsl.js")),Ze=pr(require("./ShaderLib/meshbasic_vert.glsl.js")),$e=pr(require("./ShaderLib/meshlambert_frag.glsl.js")),er=pr(require("./ShaderLib/meshlambert_vert.glsl.js")),rr=pr(require("./ShaderLib/meshmatcap_frag.glsl.js")),ar=pr(require("./ShaderLib/meshmatcap_vert.glsl.js")),lr=pr(require("./ShaderLib/meshphong_frag.glsl.js")),sr=pr(require("./ShaderLib/meshphong_vert.glsl.js")),tr=pr(require("./ShaderLib/meshphysical_frag.glsl.js")),ur=pr(require("./ShaderLib/meshphysical_vert.glsl.js")),_r=pr(require("./ShaderLib/normal_frag.glsl.js")),gr=pr(require("./ShaderLib/normal_vert.glsl.js")),nr=pr(require("./ShaderLib/points_frag.glsl.js")),hr=pr(require("./ShaderLib/points_vert.glsl.js")),dr=pr(require("./ShaderLib/shadow_frag.glsl.js")),ir=pr(require("./ShaderLib/shadow_vert.glsl.js")),fr=pr(require("./ShaderLib/sprite_frag.glsl.js")),mr=pr(require("./ShaderLib/sprite_vert.glsl.js"));function pr(e){return e&&e.__esModule?e:{default:e}}var or={alphamap_fragment:e.default,alphamap_pars_fragment:r.default,alphatest_fragment:a.default,aomap_fragment:l.default,aomap_pars_fragment:s.default,begin_vertex:t.default,beginnormal_vertex:u.default,bsdfs:_.default,bumpmap_pars_fragment:g.default,clipping_planes_fragment:n.default,clipping_planes_pars_fragment:h.default,clipping_planes_pars_vertex:d.default,clipping_planes_vertex:i.default,color_fragment:f.default,color_pars_fragment:m.default,color_pars_vertex:p.default,color_vertex:o.default,common:q.default,cube_uv_reflection_fragment:j.default,defaultnormal_vertex:v.default,displacementmap_pars_vertex:S.default,displacementmap_vertex:k.default,emissivemap_fragment:C.default,emissivemap_pars_fragment:c.default,encodings_fragment:b.default,encodings_pars_fragment:x.default,envmap_fragment:L.default,envmap_common_pars_fragment:w.default,envmap_pars_fragment:y.default,envmap_pars_vertex:A.default,envmap_physical_pars_fragment:H.default,envmap_vertex:B.default,fog_vertex:G.default,fog_pars_vertex:R.default,fog_fragment:M.default,fog_pars_fragment:O.default,gradientmap_pars_fragment:P.default,lightmap_fragment:z.default,lightmap_pars_fragment:D.default,lights_lambert_vertex:E.default,lights_pars_begin:F.default,lights_phong_fragment:I.default,lights_phong_pars_fragment:J.default,lights_physical_fragment:K.default,lights_physical_pars_fragment:N.default,lights_fragment_begin:Q.default,lights_fragment_maps:T.default,lights_fragment_end:U.default,logdepthbuf_fragment:V.default,logdepthbuf_pars_fragment:W.default,logdepthbuf_pars_vertex:X.default,logdepthbuf_vertex:Y.default,map_fragment:Z.default,map_pars_fragment:$.default,map_particle_fragment:ee.default,map_particle_pars_fragment:re.default,metalnessmap_fragment:ae.default,metalnessmap_pars_fragment:le.default,morphnormal_vertex:se.default,morphtarget_pars_vertex:te.default,morphtarget_vertex:ue.default,normal_fragment_begin:_e.default,normal_fragment_maps:ge.default,normalmap_pars_fragment:ne.default,clearcoat_normal_fragment_begin:he.default,clearcoat_normal_fragment_maps:de.default,clearcoat_normalmap_pars_fragment:ie.default,packing:fe.default,premultiplied_alpha_fragment:me.default,project_vertex:pe.default,dithering_fragment:oe.default,dithering_pars_fragment:qe.default,roughnessmap_fragment:je.default,roughnessmap_pars_fragment:ve.default,shadowmap_pars_fragment:Se.default,shadowmap_pars_vertex:ke.default,shadowmap_vertex:Ce.default,shadowmask_pars_fragment:ce.default,skinbase_vertex:be.default,skinning_pars_vertex:xe.default,skinning_vertex:Le.default,skinnormal_vertex:we.default,specularmap_fragment:ye.default,specularmap_pars_fragment:Ae.default,tonemapping_fragment:Be.default,tonemapping_pars_fragment:Ge.default,uv_pars_fragment:Re.default,uv_pars_vertex:Me.default,uv_vertex:Oe.default,uv2_pars_fragment:Pe.default,uv2_pars_vertex:ze.default,uv2_vertex:De.default,worldpos_vertex:Ee.default,background_frag:Fe.default,background_vert:He.default,cube_frag:Ie.default,cube_vert:Je.default,depth_frag:Ke.default,depth_vert:Ne.default,distanceRGBA_frag:Qe.default,distanceRGBA_vert:Te.default,equirect_frag:Ue.default,equirect_vert:Ve.default,linedashed_frag:We.default,linedashed_vert:Xe.default,meshbasic_frag:Ye.default,meshbasic_vert:Ze.default,meshlambert_frag:$e.default,meshlambert_vert:er.default,meshmatcap_frag:rr.default,meshmatcap_vert:ar.default,meshphong_frag:lr.default,meshphong_vert:sr.default,meshphysical_frag:tr.default,meshphysical_vert:ur.default,normal_frag:_r.default,normal_vert:gr.default,points_frag:nr.default,points_vert:hr.default,shadow_frag:dr.default,shadow_vert:ir.default,sprite_frag:fr.default,sprite_vert:mr.default};exports.ShaderChunk=or;
},{"./ShaderChunk/alphamap_fragment.glsl.js":"KNov","./ShaderChunk/alphamap_pars_fragment.glsl.js":"k0Zg","./ShaderChunk/alphatest_fragment.glsl.js":"mwXS","./ShaderChunk/aomap_fragment.glsl.js":"LGer","./ShaderChunk/aomap_pars_fragment.glsl.js":"lzxM","./ShaderChunk/begin_vertex.glsl.js":"9fI0","./ShaderChunk/beginnormal_vertex.glsl.js":"XD2w","./ShaderChunk/bsdfs.glsl.js":"MK6e","./ShaderChunk/bumpmap_pars_fragment.glsl.js":"sOr0","./ShaderChunk/clipping_planes_fragment.glsl.js":"xYFx","./ShaderChunk/clipping_planes_pars_fragment.glsl.js":"ZPRr","./ShaderChunk/clipping_planes_pars_vertex.glsl.js":"qsU/","./ShaderChunk/clipping_planes_vertex.glsl.js":"nmul","./ShaderChunk/color_fragment.glsl.js":"Knhg","./ShaderChunk/color_pars_fragment.glsl.js":"XTeY","./ShaderChunk/color_pars_vertex.glsl.js":"XTeY","./ShaderChunk/color_vertex.glsl.js":"e2gi","./ShaderChunk/common.glsl.js":"Ei8P","./ShaderChunk/cube_uv_reflection_fragment.glsl.js":"YwpG","./ShaderChunk/defaultnormal_vertex.glsl.js":"AKch","./ShaderChunk/displacementmap_pars_vertex.glsl.js":"nAWZ","./ShaderChunk/displacementmap_vertex.glsl.js":"kSF5","./ShaderChunk/emissivemap_fragment.glsl.js":"NDOD","./ShaderChunk/emissivemap_pars_fragment.glsl.js":"idZ8","./ShaderChunk/encodings_fragment.glsl.js":"2lgt","./ShaderChunk/encodings_pars_fragment.glsl.js":"Hqfc","./ShaderChunk/envmap_fragment.glsl.js":"5DOf","./ShaderChunk/envmap_common_pars_fragment.glsl.js":"jwi9","./ShaderChunk/envmap_pars_fragment.glsl.js":"QWOR","./ShaderChunk/envmap_pars_vertex.glsl.js":"+XV2","./ShaderChunk/envmap_vertex.glsl.js":"aX3D","./ShaderChunk/fog_vertex.glsl.js":"zdW8","./ShaderChunk/fog_pars_vertex.glsl.js":"2O1p","./ShaderChunk/fog_fragment.glsl.js":"4DPh","./ShaderChunk/fog_pars_fragment.glsl.js":"PG76","./ShaderChunk/gradientmap_pars_fragment.glsl.js":"KPc9","./ShaderChunk/lightmap_fragment.glsl.js":"MMOQ","./ShaderChunk/lightmap_pars_fragment.glsl.js":"og6c","./ShaderChunk/lights_lambert_vertex.glsl.js":"mN5G","./ShaderChunk/lights_pars_begin.glsl.js":"lPZI","./ShaderChunk/envmap_physical_pars_fragment.glsl.js":"4LGc","./ShaderChunk/lights_phong_fragment.glsl.js":"4zgB","./ShaderChunk/lights_phong_pars_fragment.glsl.js":"75Y3","./ShaderChunk/lights_physical_fragment.glsl.js":"3uz3","./ShaderChunk/lights_physical_pars_fragment.glsl.js":"O2lc","./ShaderChunk/lights_fragment_begin.glsl.js":"i+rI","./ShaderChunk/lights_fragment_maps.glsl.js":"ElNJ","./ShaderChunk/lights_fragment_end.glsl.js":"G5JB","./ShaderChunk/logdepthbuf_fragment.glsl.js":"f/2T","./ShaderChunk/logdepthbuf_pars_fragment.glsl.js":"fH8j","./ShaderChunk/logdepthbuf_pars_vertex.glsl.js":"lFrH","./ShaderChunk/logdepthbuf_vertex.glsl.js":"QZXE","./ShaderChunk/map_fragment.glsl.js":"eVYc","./ShaderChunk/map_pars_fragment.glsl.js":"Qt7j","./ShaderChunk/map_particle_fragment.glsl.js":"krIR","./ShaderChunk/map_particle_pars_fragment.glsl.js":"yhjd","./ShaderChunk/metalnessmap_fragment.glsl.js":"N/w+","./ShaderChunk/metalnessmap_pars_fragment.glsl.js":"iY2w","./ShaderChunk/morphnormal_vertex.glsl.js":"zV5K","./ShaderChunk/morphtarget_pars_vertex.glsl.js":"otpl","./ShaderChunk/morphtarget_vertex.glsl.js":"dexu","./ShaderChunk/normal_fragment_begin.glsl.js":"Hkkz","./ShaderChunk/normal_fragment_maps.glsl.js":"Ckzv","./ShaderChunk/normalmap_pars_fragment.glsl.js":"zCt7","./ShaderChunk/clearcoat_normal_fragment_begin.glsl.js":"iNMG","./ShaderChunk/clearcoat_normal_fragment_maps.glsl.js":"86cA","./ShaderChunk/clearcoat_normalmap_pars_fragment.glsl.js":"lf3G","./ShaderChunk/packing.glsl.js":"V5OH","./ShaderChunk/premultiplied_alpha_fragment.glsl.js":"JQfF","./ShaderChunk/project_vertex.glsl.js":"+8n7","./ShaderChunk/dithering_fragment.glsl.js":"OBFz","./ShaderChunk/dithering_pars_fragment.glsl.js":"oezk","./ShaderChunk/roughnessmap_fragment.glsl.js":"kmXh","./ShaderChunk/roughnessmap_pars_fragment.glsl.js":"y68a","./ShaderChunk/shadowmap_pars_fragment.glsl.js":"vnwU","./ShaderChunk/shadowmap_pars_vertex.glsl.js":"KwZS","./ShaderChunk/shadowmap_vertex.glsl.js":"CcNA","./ShaderChunk/shadowmask_pars_fragment.glsl.js":"X3G0","./ShaderChunk/skinbase_vertex.glsl.js":"kS3S","./ShaderChunk/skinning_pars_vertex.glsl.js":"whkf","./ShaderChunk/skinning_vertex.glsl.js":"QkBc","./ShaderChunk/skinnormal_vertex.glsl.js":"FZiI","./ShaderChunk/specularmap_fragment.glsl.js":"Ooi8","./ShaderChunk/specularmap_pars_fragment.glsl.js":"Uinc","./ShaderChunk/tonemapping_fragment.glsl.js":"eA/3","./ShaderChunk/tonemapping_pars_fragment.glsl.js":"e5gp","./ShaderChunk/uv_pars_fragment.glsl.js":"sjok","./ShaderChunk/uv_pars_vertex.glsl.js":"1OnX","./ShaderChunk/uv_vertex.glsl.js":"TXHS","./ShaderChunk/uv2_pars_fragment.glsl.js":"kP7q","./ShaderChunk/uv2_pars_vertex.glsl.js":"T1nG","./ShaderChunk/uv2_vertex.glsl.js":"Nwh9","./ShaderChunk/worldpos_vertex.glsl.js":"nPmS","./ShaderLib/background_frag.glsl.js":"9ZFC","./ShaderLib/background_vert.glsl.js":"99zd","./ShaderLib/cube_frag.glsl.js":"VCkl","./ShaderLib/cube_vert.glsl.js":"y2Yh","./ShaderLib/depth_frag.glsl.js":"BzW/","./ShaderLib/depth_vert.glsl.js":"LMu0","./ShaderLib/distanceRGBA_frag.glsl.js":"D8Vg","./ShaderLib/distanceRGBA_vert.glsl.js":"ghsB","./ShaderLib/equirect_frag.glsl.js":"re/s","./ShaderLib/equirect_vert.glsl.js":"h6iu","./ShaderLib/linedashed_frag.glsl.js":"KMKf","./ShaderLib/linedashed_vert.glsl.js":"Vs0u","./ShaderLib/meshbasic_frag.glsl.js":"gc7x","./ShaderLib/meshbasic_vert.glsl.js":"ELvt","./ShaderLib/meshlambert_frag.glsl.js":"q7RL","./ShaderLib/meshlambert_vert.glsl.js":"6vNA","./ShaderLib/meshmatcap_frag.glsl.js":"S7K6","./ShaderLib/meshmatcap_vert.glsl.js":"kFc1","./ShaderLib/meshphong_frag.glsl.js":"wZIj","./ShaderLib/meshphong_vert.glsl.js":"oiDx","./ShaderLib/meshphysical_frag.glsl.js":"IgEM","./ShaderLib/meshphysical_vert.glsl.js":"OgHG","./ShaderLib/normal_frag.glsl.js":"INsT","./ShaderLib/normal_vert.glsl.js":"Iyc5","./ShaderLib/points_frag.glsl.js":"f1G/","./ShaderLib/points_vert.glsl.js":"O/Zb","./ShaderLib/shadow_frag.glsl.js":"klV1","./ShaderLib/shadow_vert.glsl.js":"gG97","./ShaderLib/sprite_frag.glsl.js":"rHKr","./ShaderLib/sprite_vert.glsl.js":"+/Ya"}],"eVv2":[function(require,module,exports) {
"use strict";function r(r){var e={};for(var o in r)for(var i in e[o]={},r[o]){var s=r[o][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture)?e[o][i]=s.clone():Array.isArray(s)?e[o][i]=s.slice():e[o][i]=s}return e}function e(e){for(var o={},i=0;i<e.length;i++){var s=r(e[i]);for(var t in s)o[t]=s[t]}return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneUniforms=r,exports.mergeUniforms=e,exports.UniformsUtils=void 0;var o={clone:r,merge:e};exports.UniformsUtils=o;
},{}],"aGw5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UniformsLib=void 0;var a=require("../../math/Color.js"),e=require("../../math/Vector2.js"),l=require("../../math/Matrix3.js"),o={common:{diffuse:{value:new a.Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new l.Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new e.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new a.Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new a.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new l.Matrix3}},sprite:{diffuse:{value:new a.Color(15658734)},opacity:{value:1},center:{value:new e.Vector2(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new l.Matrix3}}};exports.UniformsLib=o;
},{"../../math/Color.js":"w/VZ","../../math/Vector2.js":"edIZ","../../math/Matrix3.js":"Aj5L"}],"o/qe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderLib=void 0;var e=require("./ShaderChunk.js"),r=require("./UniformsUtils.js"),a=require("../../math/Vector2.js"),i=require("../../math/Vector3.js"),m=require("./UniformsLib.js"),n=require("../../math/Color.js"),s=require("../../math/Matrix3.js"),o={basic:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.specularmap,m.UniformsLib.envmap,m.UniformsLib.aomap,m.UniformsLib.lightmap,m.UniformsLib.fog]),vertexShader:e.ShaderChunk.meshbasic_vert,fragmentShader:e.ShaderChunk.meshbasic_frag},lambert:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.specularmap,m.UniformsLib.envmap,m.UniformsLib.aomap,m.UniformsLib.lightmap,m.UniformsLib.emissivemap,m.UniformsLib.fog,m.UniformsLib.lights,{emissive:{value:new n.Color(0)}}]),vertexShader:e.ShaderChunk.meshlambert_vert,fragmentShader:e.ShaderChunk.meshlambert_frag},phong:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.specularmap,m.UniformsLib.envmap,m.UniformsLib.aomap,m.UniformsLib.lightmap,m.UniformsLib.emissivemap,m.UniformsLib.bumpmap,m.UniformsLib.normalmap,m.UniformsLib.displacementmap,m.UniformsLib.gradientmap,m.UniformsLib.fog,m.UniformsLib.lights,{emissive:{value:new n.Color(0)},specular:{value:new n.Color(1118481)},shininess:{value:30}}]),vertexShader:e.ShaderChunk.meshphong_vert,fragmentShader:e.ShaderChunk.meshphong_frag},standard:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.envmap,m.UniformsLib.aomap,m.UniformsLib.lightmap,m.UniformsLib.emissivemap,m.UniformsLib.bumpmap,m.UniformsLib.normalmap,m.UniformsLib.displacementmap,m.UniformsLib.roughnessmap,m.UniformsLib.metalnessmap,m.UniformsLib.fog,m.UniformsLib.lights,{emissive:{value:new n.Color(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:e.ShaderChunk.meshphysical_vert,fragmentShader:e.ShaderChunk.meshphysical_frag},matcap:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.bumpmap,m.UniformsLib.normalmap,m.UniformsLib.displacementmap,m.UniformsLib.fog,{matcap:{value:null}}]),vertexShader:e.ShaderChunk.meshmatcap_vert,fragmentShader:e.ShaderChunk.meshmatcap_frag},points:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.points,m.UniformsLib.fog]),vertexShader:e.ShaderChunk.points_vert,fragmentShader:e.ShaderChunk.points_frag},dashed:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:e.ShaderChunk.linedashed_vert,fragmentShader:e.ShaderChunk.linedashed_frag},depth:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.displacementmap]),vertexShader:e.ShaderChunk.depth_vert,fragmentShader:e.ShaderChunk.depth_frag},normal:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.bumpmap,m.UniformsLib.normalmap,m.UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:e.ShaderChunk.normal_vert,fragmentShader:e.ShaderChunk.normal_frag},sprite:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.sprite,m.UniformsLib.fog]),vertexShader:e.ShaderChunk.sprite_vert,fragmentShader:e.ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new s.Matrix3},t2D:{value:null}},vertexShader:e.ShaderChunk.background_vert,fragmentShader:e.ShaderChunk.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:e.ShaderChunk.cube_vert,fragmentShader:e.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:e.ShaderChunk.equirect_vert,fragmentShader:e.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.common,m.UniformsLib.displacementmap,{referencePosition:{value:new i.Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:e.ShaderChunk.distanceRGBA_vert,fragmentShader:e.ShaderChunk.distanceRGBA_frag},shadow:{uniforms:(0,r.mergeUniforms)([m.UniformsLib.lights,m.UniformsLib.fog,{color:{value:new n.Color(0)},opacity:{value:1}}]),vertexShader:e.ShaderChunk.shadow_vert,fragmentShader:e.ShaderChunk.shadow_frag}};exports.ShaderLib=o,o.physical={uniforms:(0,r.mergeUniforms)([o.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new n.Color(0)},clearcoatNormalScale:{value:new a.Vector2(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:e.ShaderChunk.meshphysical_vert,fragmentShader:e.ShaderChunk.meshphysical_frag};
},{"./ShaderChunk.js":"FTRQ","./UniformsUtils.js":"eVv2","../../math/Vector2.js":"edIZ","../../math/Vector3.js":"QOxd","./UniformsLib.js":"aGw5","../../math/Color.js":"w/VZ","../../math/Matrix3.js":"Aj5L"}],"Uuhs":[function(require,module,exports) {
"use strict";function n(){var n=null,t=!1,e=null;function o(i,u){!1!==t&&(e(i,u),n.requestAnimationFrame(o))}return{start:function(){!0!==t&&null!==e&&(n.requestAnimationFrame(o),t=!0)},stop:function(){t=!1},setAnimationLoop:function(n){e=n},setContext:function(t){n=t}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLAnimation=n;
},{}],"lW5+":[function(require,module,exports) {
"use strict";function e(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);var a=t.get(r);a&&(e.deleteBuffer(a.buffer),t.delete(r))},update:function(r,a){r.isInterleavedBufferAttribute&&(r=r.data);var n=t.get(r);void 0===n?t.set(r,function(t,r){var a=t.array,n=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,f=e.createBuffer();e.bindBuffer(r,f),e.bufferData(r,a,n),t.onUploadCallback();var u=e.FLOAT;return a instanceof Float32Array?u=e.FLOAT:a instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):a instanceof Uint16Array?u=e.UNSIGNED_SHORT:a instanceof Int16Array?u=e.SHORT:a instanceof Uint32Array?u=e.UNSIGNED_INT:a instanceof Int32Array?u=e.INT:a instanceof Int8Array?u=e.BYTE:a instanceof Uint8Array&&(u=e.UNSIGNED_BYTE),{buffer:f,type:u,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(r,a)):n.version<r.version&&(function(t,r,a){var n=r.array,f=r.updateRange;e.bindBuffer(a,t),!1===r.dynamic?e.bufferData(a,n,e.STATIC_DRAW):-1===f.count?e.bufferSubData(a,0,n):0===f.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(a,f.offset*n.BYTES_PER_ELEMENT,n.subarray(f.offset,f.offset+f.count)),f.count=-1)}(n.buffer,r,a),n.version=r.version)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLAttributes=e;
},{}],"FhfL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BoxGeometry=s,exports.BoxBufferGeometry=i;var e=require("../core/Geometry.js"),t=require("../core/BufferGeometry.js"),r=require("../core/BufferAttribute.js"),o=require("../math/Vector3.js");function s(t,r,o,s,h,u){e.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:o,widthSegments:s,heightSegments:h,depthSegments:u},this.fromBufferGeometry(new i(t,r,o,s,h,u)),this.mergeVertices()}function i(e,s,i,h,u,f){t.BufferGeometry.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:s,depth:i,widthSegments:h,heightSegments:u,depthSegments:f};var p=this;e=e||1,s=s||1,i=i||1,h=Math.floor(h)||1,u=Math.floor(u)||1,f=Math.floor(f)||1;var a=[],y=[],m=[],n=[],c=0,d=0;function x(e,t,r,s,i,h,u,f,x,B,l){var G,g,b=h/x,v=u/B,w=h/2,z=u/2,j=f/2,A=x+1,S=B+1,q=0,M=0,F=new o.Vector3;for(g=0;g<S;g++){var O=g*v-z;for(G=0;G<A;G++){var V=G*b-w;F[e]=V*s,F[t]=O*i,F[r]=j,y.push(F.x,F.y,F.z),F[e]=0,F[t]=0,F[r]=f>0?1:-1,m.push(F.x,F.y,F.z),n.push(G/x),n.push(1-g/B),q+=1}}for(g=0;g<B;g++)for(G=0;G<x;G++){var _=c+G+A*g,I=c+G+A*(g+1),P=c+(G+1)+A*(g+1),k=c+(G+1)+A*g;a.push(_,I,k),a.push(I,P,k),M+=6}p.addGroup(d,M,l),d+=M,c+=q}x("z","y","x",-1,-1,i,s,e,f,u,0),x("z","y","x",1,-1,i,s,-e,f,u,1),x("x","z","y",1,1,e,i,s,h,f,2),x("x","z","y",1,-1,e,i,-s,h,f,3),x("x","y","z",1,-1,e,s,i,h,u,4),x("x","y","z",-1,-1,e,s,-i,h,u,5),this.setIndex(a),this.addAttribute("position",new r.Float32BufferAttribute(y,3)),this.addAttribute("normal",new r.Float32BufferAttribute(m,3)),this.addAttribute("uv",new r.Float32BufferAttribute(n,2))}s.prototype=Object.create(e.Geometry.prototype),s.prototype.constructor=s,i.prototype=Object.create(t.BufferGeometry.prototype),i.prototype.constructor=i;
},{"../core/Geometry.js":"p5pl","../core/BufferGeometry.js":"kSEB","../core/BufferAttribute.js":"0uom","../math/Vector3.js":"QOxd"}],"XmpW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlaneGeometry=o,exports.PlaneBufferGeometry=s;var e=require("../core/Geometry.js"),t=require("../core/BufferGeometry.js"),r=require("../core/BufferAttribute.js");function o(t,r,o,i){e.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:o,heightSegments:i},this.fromBufferGeometry(new s(t,r,o,i)),this.mergeVertices()}function s(e,o,s,i){t.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:o,widthSegments:s,heightSegments:i};var u,h,f=(e=e||1)/2,a=(o=o||1)/2,p=Math.floor(s)||1,n=Math.floor(i)||1,m=p+1,y=n+1,c=e/p,l=o/n,d=[],G=[],b=[],B=[];for(h=0;h<y;h++){var g=h*l-a;for(u=0;u<m;u++){var w=u*c-f;G.push(w,-g,0),b.push(0,0,1),B.push(u/p),B.push(1-h/n)}}for(h=0;h<n;h++)for(u=0;u<p;u++){var v=u+m*h,A=u+m*(h+1),j=u+1+m*(h+1),P=u+1+m*h;d.push(v,A,P),d.push(A,j,P)}this.setIndex(d),this.addAttribute("position",new r.Float32BufferAttribute(G,3)),this.addAttribute("normal",new r.Float32BufferAttribute(b,3)),this.addAttribute("uv",new r.Float32BufferAttribute(B,2))}o.prototype=Object.create(e.Geometry.prototype),o.prototype.constructor=o,s.prototype=Object.create(t.BufferGeometry.prototype),s.prototype.constructor=s;
},{"../core/Geometry.js":"p5pl","../core/BufferGeometry.js":"kSEB","../core/BufferAttribute.js":"0uom"}],"qWa6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n";exports.default=e;
},{}],"0d2S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n";exports.default=e;
},{}],"EGzX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderMaterial=a;var e=require("./Material.js"),t=require("../renderers/shaders/UniformsUtils.js"),r=s(require("../renderers/shaders/ShaderChunk/default_vertex.glsl.js")),i=s(require("../renderers/shaders/ShaderChunk/default_fragment.glsl.js"));function s(e){return e&&e.__esModule?e:{default:e}}function a(t){e.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=r.default,this.fragmentShader=i.default,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}a.prototype=Object.create(e.Material.prototype),a.prototype.constructor=a,a.prototype.isShaderMaterial=!0,a.prototype.copy=function(r){return e.Material.prototype.copy.call(this,r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=(0,t.cloneUniforms)(r.uniforms),this.defines=Object.assign({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.lights=r.lights,this.clipping=r.clipping,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this.extensions=r.extensions,this},a.prototype.toJSON=function(t){var r=e.Material.prototype.toJSON.call(this,t);for(var i in r.uniforms={},this.uniforms){var s=this.uniforms[i].value;s&&s.isTexture?r.uniforms[i]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?r.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?r.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?r.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?r.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?r.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?r.uniforms[i]={type:"m4",value:s.toArray()}:r.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(r.extensions=a),r};
},{"./Material.js":"ie8i","../renderers/shaders/UniformsUtils.js":"eVv2","../renderers/shaders/ShaderChunk/default_vertex.glsl.js":"qWa6","../renderers/shaders/ShaderChunk/default_fragment.glsl.js":"0d2S"}],"E8A8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLBackground=s;var e=require("../../constants.js"),r=require("../../geometries/BoxGeometry.js"),t=require("../../geometries/PlaneGeometry.js"),a=require("../../materials/ShaderMaterial.js"),i=require("../../math/Color.js"),o=require("../../objects/Mesh.js"),n=require("../shaders/ShaderLib.js"),u=require("../shaders/UniformsUtils.js");function s(s,l,d,m){var f,h,b=new i.Color(0),c=0,g=null,v=0;function p(e,r){l.buffers.color.setClear(e.r,e.g,e.b,r,m)}return{getClearColor:function(){return b},setClearColor:function(e,r){b.set(e),p(b,c=void 0!==r?r:1)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(b,c=e)},render:function(i,l,m,S){var C=l.background,x=s.vr,y=x.getSession&&x.getSession();if(y&&"additive"===y.environmentBlendMode&&(C=null),null===C?(p(b,c),g=null,v=0):C&&C.isColor&&(p(C,1),S=!0,g=null,v=0),(s.autoClear||S)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),C&&(C.isCubeTexture||C.isWebGLRenderTargetCube)){void 0===h&&((h=new o.Mesh(new r.BoxBufferGeometry(1,1,1),new a.ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:(0,u.cloneUniforms)(n.ShaderLib.cube.uniforms),vertexShader:n.ShaderLib.cube.vertexShader,fragmentShader:n.ShaderLib.cube.fragmentShader,side:e.BackSide,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),h.geometry.removeAttribute("uv"),h.onBeforeRender=function(e,r,t){this.matrixWorld.copyPosition(t.matrixWorld)},Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.tCube.value}}),d.update(h));var j=C.isWebGLRenderTargetCube?C.texture:C;h.material.uniforms.tCube.value=j,h.material.uniforms.tFlip.value=C.isWebGLRenderTargetCube?1:-1,g===C&&v===j.version||(h.material.needsUpdate=!0,g=C,v=j.version),i.unshift(h,h.geometry,h.material,0,0,null)}else C&&C.isTexture&&(void 0===f&&((f=new o.Mesh(new t.PlaneBufferGeometry(2,2),new a.ShaderMaterial({type:"BackgroundMaterial",uniforms:(0,u.cloneUniforms)(n.ShaderLib.background.uniforms),vertexShader:n.ShaderLib.background.vertexShader,fragmentShader:n.ShaderLib.background.fragmentShader,side:e.FrontSide,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),d.update(f)),f.material.uniforms.t2D.value=C,!0===C.matrixAutoUpdate&&C.updateMatrix(),f.material.uniforms.uvTransform.value.copy(C.matrix),g===C&&v===C.version||(f.material.needsUpdate=!0,g=C,v=C.version),i.unshift(f,f.geometry,f.material,0,0,null))}}}
},{"../../constants.js":"PJkd","../../geometries/BoxGeometry.js":"FhfL","../../geometries/PlaneGeometry.js":"XmpW","../../materials/ShaderMaterial.js":"EGzX","../../math/Color.js":"w/VZ","../../objects/Mesh.js":"+ZOy","../shaders/ShaderLib.js":"o/qe","../shaders/UniformsUtils.js":"eVv2"}],"Iqef":[function(require,module,exports) {
"use strict";function e(e,r,n,t){var s;this.setMode=function(e){s=e},this.render=function(r,t){e.drawArrays(s,r,t),n.update(t,s)},this.renderInstances=function(a,d,o){var u,i;if(t.isWebGL2)u=e,i="drawArraysInstanced";else if(i="drawArraysInstancedANGLE",null===(u=r.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[i](s,d,o,a.maxInstancedCount),n.update(o,s,a.maxInstancedCount)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLBufferRenderer=e;
},{}],"FA/Z":[function(require,module,exports) {
"use strict";function e(e,r,t){var i;function a(r){if("highp"===r){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";r="mediump"}return"mediump"===r&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var n="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,o=void 0!==t.precision?t.precision:"highp",E=a(o);E!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",E,"instead."),o=E);var _=!0===t.logarithmicDepthBuffer,T=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),m=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),s=e.getParameter(e.MAX_TEXTURE_SIZE),A=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),u=e.getParameter(e.MAX_VERTEX_ATTRIBS),g=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),R=e.getParameter(e.MAX_VARYING_VECTORS),p=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),x=m>0,M=n||!!r.get("OES_texture_float");return{isWebGL2:n,getMaxAnisotropy:function(){if(void 0!==i)return i;var t=r.get("EXT_texture_filter_anisotropic");return i=null!==t?e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:a,precision:o,logarithmicDepthBuffer:_,maxTextures:T,maxVertexTextures:m,maxTextureSize:s,maxCubemapSize:A,maxAttributes:u,maxVertexUniforms:g,maxVaryings:R,maxFragmentUniforms:p,vertexTextures:x,floatFragmentTextures:M,floatVertexTextures:x&&M,maxSamples:n?e.getParameter(e.MAX_SAMPLES):0}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLCapabilities=e;
},{}],"6qO8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLClipping=t;var n=require("../../math/Matrix3.js"),e=require("../../math/Plane.js");function t(){var t=this,l=null,a=0,i=!1,r=!1,u=new e.Plane,s=new n.Matrix3,o={value:null,needsUpdate:!1};function h(){o.value!==l&&(o.value=l,o.needsUpdate=a>0),t.numPlanes=a,t.numIntersection=0}function c(n,e,l,a){var i=null!==n?n.length:0,r=null;if(0!==i){if(r=o.value,!0!==a||null===r){var h=l+4*i,c=e.matrixWorldInverse;s.getNormalMatrix(c),(null===r||r.length<h)&&(r=new Float32Array(h));for(var v=0,p=l;v!==i;++v,p+=4)u.copy(n[v]).applyMatrix4(c,s),u.normal.toArray(r,p),r[p+3]=u.constant}o.value=r,o.needsUpdate=!0}return t.numPlanes=i,r}this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(n,e,t){var r=0!==n.length||e||0!==a||i;return i=e,l=c(n,t,0),a=n.length,r},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,h()},this.setState=function(n,e,t,u,s,v){if(!i||null===n||0===n.length||r&&!t)r?c(null):h();else{var p=r?0:a,f=4*p,m=s.clippingState||null;o.value=m,m=c(n,u,f,v);for(var d=0;d!==f;++d)m[d]=l[d];s.clippingState=m,this.numIntersection=e?this.numPlanes:0,this.numPlanes+=p}}}
},{"../../math/Matrix3.js":"Aj5L","../../math/Plane.js":"ui/r"}],"VxPD":[function(require,module,exports) {
"use strict";function e(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var _;switch(r){case"WEBGL_depth_texture":_=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":_=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":_=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":_=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:_=e.getExtension(r)}return null===_&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=_,_}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLExtensions=e;
},{}],"vRRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLGeometries=i;var e=require("../../core/BufferAttribute.js"),r=require("../../core/BufferGeometry.js"),t=require("../../utils.js");function i(i,n,o){var u=new WeakMap,a=new WeakMap;function s(e){var r=e.target,t=u.get(r);for(var i in null!==t.index&&n.remove(t.index),t.attributes)n.remove(t.attributes[i]);r.removeEventListener("dispose",s),u.delete(r);var f=a.get(t);f&&(n.remove(f),a.delete(t)),o.memory.geometries--}function f(r){var o=[],u=r.index,s=r.attributes.position,f=0;if(null!==u){var v=u.array;f=u.version;for(var m=0,d=v.length;m<d;m+=3){var l=v[m+0],p=v[m+1],b=v[m+2];o.push(l,p,p,b,b,l)}}else{v=s.array;f=s.version;for(m=0,d=v.length/3-1;m<d;m+=3){l=m+0,p=m+1,b=m+2;o.push(l,p,p,b,b,l)}}var g=new((0,t.arrayMax)(o)>65535?e.Uint32BufferAttribute:e.Uint16BufferAttribute)(o,1);g.version=f,n.update(g,i.ELEMENT_ARRAY_BUFFER);var y=a.get(r);y&&n.remove(y),a.set(r,g)}return{get:function(e,t){var i=u.get(t);return i||(t.addEventListener("dispose",s),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new r.BufferGeometry).setFromObject(e)),i=t._bufferGeometry),u.set(t,i),o.memory.geometries++,i)},update:function(e){var r=e.index,t=e.attributes;for(var o in null!==r&&n.update(r,i.ELEMENT_ARRAY_BUFFER),t)n.update(t[o],i.ARRAY_BUFFER);var u=e.morphAttributes;for(var o in u)for(var a=u[o],s=0,f=a.length;s<f;s++)n.update(a[s],i.ARRAY_BUFFER)},getWireframeAttribute:function(e){var r=a.get(e);if(r){var t=e.index;null!==t&&r.version<t.version&&f(e)}else f(e);return a.get(e)}}}
},{"../../core/BufferAttribute.js":"0uom","../../core/BufferGeometry.js":"kSEB","../../utils.js":"a3o8"}],"PeKP":[function(require,module,exports) {
"use strict";function e(e,n,t,r){var s,d,a;this.setMode=function(e){s=e},this.setIndex=function(e){d=e.type,a=e.bytesPerElement},this.render=function(n,r){e.drawElements(s,r,d,n*a),t.update(r,s)},this.renderInstances=function(o,u,i){var c,f;if(r.isWebGL2)c=e,f="drawElementsInstanced";else if(f="drawElementsInstancedANGLE",null===(c=n.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[f](s,i,d,u*a,o.maxInstancedCount),t.update(i,s,o.maxInstancedCount)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLIndexedBufferRenderer=e;
},{}],"RYHA":[function(require,module,exports) {
"use strict";function e(e){var s={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:s,programs:null,autoReset:!0,reset:function(){s.frame++,s.calls=0,s.triangles=0,s.points=0,s.lines=0},update:function(r,a,n){switch(n=n||1,s.calls++,a){case e.TRIANGLES:s.triangles+=n*(r/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:s.triangles+=n*(r-2);break;case e.LINES:s.lines+=n*(r/2);break;case e.LINE_STRIP:s.lines+=n*(r-1);break;case e.LINE_LOOP:s.lines+=n*r;break;case e.POINTS:s.points+=n*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLInfo=e;
},{}],"R7os":[function(require,module,exports) {
"use strict";function r(r,t){return Math.abs(t[1])-Math.abs(r[1])}function t(t){var e={},o=new Float32Array(8);return{update:function(a,i,n,u){var s=a.morphTargetInfluences,m=s.length,p=e[i.id];if(void 0===p){p=[];for(var f=0;f<m;f++)p[f]=[f,0];e[i.id]=p}var h=n.morphTargets&&i.morphAttributes.position,l=n.morphNormals&&i.morphAttributes.normal;for(f=0;f<m;f++)0!==(b=p[f])[1]&&(h&&i.removeAttribute("morphTarget"+f),l&&i.removeAttribute("morphNormal"+f));for(f=0;f<m;f++)(b=p[f])[0]=f,b[1]=s[f];for(p.sort(r),f=0;f<8;f++){var b;if(b=p[f]){var d=b[0],v=b[1];if(v){h&&i.addAttribute("morphTarget"+f,h[d]),l&&i.addAttribute("morphNormal"+f,l[d]),o[f]=v;continue}}o[f]=0}u.getUniforms().setValue(t,"morphTargetInfluences",o)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLMorphtargets=t;
},{}],"GQCN":[function(require,module,exports) {
"use strict";function e(e,t){var r={};return{update:function(o){var u=t.render.frame,n=o.geometry,d=e.get(o,n);return r[d.id]!==u&&(n.isGeometry&&d.updateFromObject(o),e.update(d),r[d.id]=u),d},dispose:function(){r={}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLObjects=e;
},{}],"P+hL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CubeTexture=r;var e=require("./Texture.js"),t=require("../constants.js");function r(r,o,i,u,p,s,n,c,a,f){r=void 0!==r?r:[],o=void 0!==o?o:t.CubeReflectionMapping,n=void 0!==n?n:t.RGBFormat,e.Texture.call(this,r,o,i,u,p,s,n,c,a,f),this.flipY=!1}r.prototype=Object.create(e.Texture.prototype),r.prototype.constructor=r,r.prototype.isCubeTexture=!0,Object.defineProperty(r.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});
},{"./Texture.js":"X6VN","../constants.js":"PJkd"}],"d8BV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataTexture2DArray=r;var e=require("./Texture.js"),t=require("../constants.js");function r(r,i,a,s){e.Texture.call(this,null),this.image={data:r,width:i,height:a,depth:s},this.magFilter=t.NearestFilter,this.minFilter=t.NearestFilter,this.wrapR=t.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1}r.prototype=Object.create(e.Texture.prototype),r.prototype.constructor=r,r.prototype.isDataTexture2DArray=!0;
},{"./Texture.js":"X6VN","../constants.js":"PJkd"}],"DvAp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataTexture3D=r;var e=require("./Texture.js"),t=require("../constants.js");function r(r,i,s,a){e.Texture.call(this,null),this.image={data:r,width:i,height:s,depth:a},this.magFilter=t.NearestFilter,this.minFilter=t.NearestFilter,this.wrapR=t.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1}r.prototype=Object.create(e.Texture.prototype),r.prototype.constructor=r,r.prototype.isDataTexture3D=!0;
},{"./Texture.js":"X6VN","../constants.js":"PJkd"}],"Emi0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLUniforms=$;var r=require("../../textures/CubeTexture.js"),e=require("../../textures/Texture.js"),t=require("../../textures/DataTexture2DArray.js"),i=require("../../textures/DataTexture3D.js"),a=new e.Texture,n=new t.DataTexture2DArray,s=new i.DataTexture3D,u=new r.CubeTexture,f=[],o=[],c=new Float32Array(16),h=new Float32Array(9),d=new Float32Array(4);function v(r,e,t){var i=r[0];if(i<=0||i>0)return r;var a=e*t,n=f[a];if(void 0===n&&(n=new Float32Array(a),f[a]=n),0!==e){i.toArray(n,0);for(var s=1,u=0;s!==e;++s)u+=t,r[s].toArray(n,u)}return n}function l(r,e){if(r.length!==e.length)return!1;for(var t=0,i=r.length;t<i;t++)if(r[t]!==e[t])return!1;return!0}function m(r,e){for(var t=0,i=e.length;t<i;t++)r[t]=e[t]}function x(r,e){var t=o[e];void 0===t&&(t=new Int32Array(e),o[e]=t);for(var i=0;i!==e;++i)t[i]=r.allocateTextureUnit();return t}function y(r,e){var t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function p(r,e){var t=this.cache;if(void 0!==e.x)t[0]===e.x&&t[1]===e.y||(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(l(t,e))return;r.uniform2fv(this.addr,e),m(t,e)}}function g(r,e){var t=this.cache;if(void 0!==e.x)t[0]===e.x&&t[1]===e.y&&t[2]===e.z||(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)t[0]===e.r&&t[1]===e.g&&t[2]===e.b||(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(l(t,e))return;r.uniform3fv(this.addr,e),m(t,e)}}function T(r,e){var t=this.cache;if(void 0!==e.x)t[0]===e.x&&t[1]===e.y&&t[2]===e.z&&t[3]===e.w||(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(l(t,e))return;r.uniform4fv(this.addr,e),m(t,e)}}function w(r,e){var t=this.cache,i=e.elements;if(void 0===i){if(l(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),m(t,e)}else{if(l(t,i))return;d.set(i),r.uniformMatrix2fv(this.addr,!1,d),m(t,i)}}function z(r,e){var t=this.cache,i=e.elements;if(void 0===i){if(l(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),m(t,e)}else{if(l(t,i))return;h.set(i),r.uniformMatrix3fv(this.addr,!1,h),m(t,i)}}function A(r,e){var t=this.cache,i=e.elements;if(void 0===i){if(l(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),m(t,e)}else{if(l(t,i))return;c.set(i),r.uniformMatrix4fv(this.addr,!1,c),m(t,i)}}function D(r,e,t){var i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),t.safeSetTexture2D(e||a,n)}function M(r,e,t){var i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(r.uniform1i(this.addr,a),i[0]=a),t.setTexture2DArray(e||n,a)}function b(r,e,t){var i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(r.uniform1i(this.addr,a),i[0]=a),t.setTexture3D(e||s,a)}function U(r,e,t){var i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(r.uniform1i(this.addr,a),i[0]=a),t.safeSetTextureCube(e||u,a)}function V(r,e){var t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function q(r,e){var t=this.cache;l(t,e)||(r.uniform2iv(this.addr,e),m(t,e))}function F(r,e){var t=this.cache;l(t,e)||(r.uniform3iv(this.addr,e),m(t,e))}function C(r,e){var t=this.cache;l(t,e)||(r.uniform4iv(this.addr,e),m(t,e))}function j(r){switch(r){case 5126:return y;case 35664:return p;case 35665:return g;case 35666:return T;case 35674:return w;case 35675:return z;case 35676:return A;case 35678:case 36198:return D;case 35679:return b;case 35680:return U;case 36289:return M;case 5124:case 35670:return V;case 35667:case 35671:return q;case 35668:case 35672:return F;case 35669:case 35673:return C}}function I(r,e){r.uniform1fv(this.addr,e)}function S(r,e){r.uniform1iv(this.addr,e)}function _(r,e){r.uniform2iv(this.addr,e)}function O(r,e){r.uniform3iv(this.addr,e)}function P(r,e){r.uniform4iv(this.addr,e)}function L(r,e){var t=v(e,this.size,2);r.uniform2fv(this.addr,t)}function W(r,e){var t=v(e,this.size,3);r.uniform3fv(this.addr,t)}function k(r,e){var t=v(e,this.size,4);r.uniform4fv(this.addr,t)}function E(r,e){var t=v(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function G(r,e){var t=v(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function N(r,e){var t=v(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function R(r,e,t){var i=e.length,n=x(t,i);r.uniform1iv(this.addr,n);for(var s=0;s!==i;++s)t.safeSetTexture2D(e[s]||a,n[s])}function B(r,e,t){var i=e.length,a=x(t,i);r.uniform1iv(this.addr,a);for(var n=0;n!==i;++n)t.safeSetTextureCube(e[n]||u,a[n])}function H(r){switch(r){case 5126:return I;case 35664:return L;case 35665:return W;case 35666:return k;case 35674:return E;case 35675:return G;case 35676:return N;case 35678:return R;case 35680:return B;case 5124:case 35670:return S;case 35667:case 35671:return _;case 35668:case 35672:return O;case 35669:case 35673:return P}}function J(r,e,t){this.id=r,this.addr=t,this.cache=[],this.setValue=j(e.type)}function K(r,e,t){this.id=r,this.addr=t,this.cache=[],this.size=e.size,this.setValue=H(e.type)}function Q(r){this.id=r,this.seq=[],this.map={}}K.prototype.updateCache=function(r){var e=this.cache;r instanceof Float32Array&&e.length!==r.length&&(this.cache=new Float32Array(r.length)),m(e,r)},Q.prototype.setValue=function(r,e,t){for(var i=this.seq,a=0,n=i.length;a!==n;++a){var s=i[a];s.setValue(r,e[s.id],t)}};var X=/([\w\d_]+)(\])?(\[|\.)?/g;function Y(r,e){r.seq.push(e),r.map[e.id]=e}function Z(r,e,t){var i=r.name,a=i.length;for(X.lastIndex=0;;){var n=X.exec(i),s=X.lastIndex,u=n[1],f="]"===n[2],o=n[3];if(f&&(u|=0),void 0===o||"["===o&&s+2===a){Y(t,void 0===o?new J(u,r,e):new K(u,r,e));break}var c=t.map[u];void 0===c&&Y(t,c=new Q(u)),t=c}}function $(r,e){this.seq=[],this.map={};for(var t=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),i=0;i<t;++i){var a=r.getActiveUniform(e,i);Z(a,r.getUniformLocation(e,a.name),this)}}$.prototype.setValue=function(r,e,t,i){var a=this.map[e];void 0!==a&&a.setValue(r,t,i)},$.prototype.setOptional=function(r,e,t){var i=e[t];void 0!==i&&this.setValue(r,t,i)},$.upload=function(r,e,t,i){for(var a=0,n=e.length;a!==n;++a){var s=e[a],u=t[s.id];!1!==u.needsUpdate&&s.setValue(r,u.value,i)}},$.seqWithValue=function(r,e){for(var t=[],i=0,a=r.length;i!==a;++i){var n=r[i];n.id in e&&t.push(n)}return t};
},{"../../textures/CubeTexture.js":"P+hL","../../textures/Texture.js":"X6VN","../../textures/DataTexture2DArray.js":"d8BV","../../textures/DataTexture3D.js":"DvAp"}],"u10k":[function(require,module,exports) {
"use strict";function e(e,r,t){var a=e.createShader(r);return e.shaderSource(a,t),e.compileShader(a),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLShader=e;
},{}],"srxr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLProgram=T;var e=require("./WebGLUniforms.js"),n=require("./WebGLShader.js"),a=require("../shaders/ShaderChunk.js"),r=require("../../constants.js"),t=0;function i(e){for(var n=e.split("\n"),a=0;a<n.length;a++)n[a]=a+1+": "+n[a];return n.join("\n")}function o(e){switch(e){case r.LinearEncoding:return["Linear","( value )"];case r.sRGBEncoding:return["sRGB","( value )"];case r.RGBEEncoding:return["RGBE","( value )"];case r.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case r.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case r.RGBDEncoding:return["RGBD","( value, 256.0 )"];case r.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case r.LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function d(e,n,a){var r=e.getShaderParameter(n,e.COMPILE_STATUS),t=e.getShaderInfoLog(n).trim();return r&&""===t?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+a+"\n"+t+i(e.getShaderSource(n))}function p(e,n){var a=o(n);return"vec4 "+e+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function E(e,n){var a=o(n);return"vec4 "+e+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function f(e,n){var a;switch(n){case r.LinearToneMapping:a="Linear";break;case r.ReinhardToneMapping:a="Reinhard";break;case r.Uncharted2ToneMapping:a="Uncharted2";break;case r.CineonToneMapping:a="OptimizedCineon";break;case r.ACESFilmicToneMapping:a="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+n)}return"vec3 "+e+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function u(e,n,a){return[(e=e||{}).derivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||n.logarithmicDepthBuffer)&&a.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&a.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||n.envMap)&&a.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(g).join("\n")}function s(e){var n=[];for(var a in e){var r=e[a];!1!==r&&n.push("#define "+a+" "+r)}return n.join("\n")}function c(e,n){for(var a={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES),t=0;t<r;t++){var i=e.getActiveAttrib(n,t).name;a[i]=e.getAttribLocation(n,i)}return a}function g(e){return""!==e}function M(e,n){return e.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function _(e,n){return e.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}function S(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,n){var r=a.ShaderChunk[n];if(void 0===r)throw new Error("Can not resolve #include <"+n+">");return S(r)})}function l(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,n,a,r){for(var t="",i=parseInt(n);i<parseInt(a);i++)t+=r.replace(/\[ i \]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return t})}function T(i,o,T,m,A,h,P){var L=i.getContext(),v=m.defines,N=A.vertexShader,U=A.fragmentShader,G="SHADOWMAP_TYPE_BASIC";h.shadowMapType===r.PCFShadowMap?G="SHADOWMAP_TYPE_PCF":h.shadowMapType===r.PCFSoftShadowMap?G="SHADOWMAP_TYPE_PCF_SOFT":h.shadowMapType===r.VSMShadowMap&&(G="SHADOWMAP_TYPE_VSM");var R="ENVMAP_TYPE_CUBE",b="ENVMAP_MODE_REFLECTION",I="ENVMAP_BLENDING_MULTIPLY";if(h.envMap){switch(m.envMap.mapping){case r.CubeReflectionMapping:case r.CubeRefractionMapping:R="ENVMAP_TYPE_CUBE";break;case r.CubeUVReflectionMapping:case r.CubeUVRefractionMapping:R="ENVMAP_TYPE_CUBE_UV";break;case r.EquirectangularReflectionMapping:case r.EquirectangularRefractionMapping:R="ENVMAP_TYPE_EQUIREC";break;case r.SphericalReflectionMapping:R="ENVMAP_TYPE_SPHERE"}switch(m.envMap.mapping){case r.CubeRefractionMapping:case r.EquirectangularRefractionMapping:b="ENVMAP_MODE_REFRACTION"}switch(m.combine){case r.MultiplyOperation:I="ENVMAP_BLENDING_MULTIPLY";break;case r.MixOperation:I="ENVMAP_BLENDING_MIX";break;case r.AddOperation:I="ENVMAP_BLENDING_ADD"}}var O,D,x=i.gammaFactor>0?i.gammaFactor:1,C=P.isWebGL2?"":u(m.extensions,h,o),H=s(v),B=L.createProgram();if(m.isRawShaderMaterial?((O=[H].filter(g).join("\n")).length>0&&(O+="\n"),(D=[C,H].filter(g).join("\n")).length>0&&(D+="\n")):(O=["precision "+h.precision+" float;","precision "+h.precision+" int;","highp"===h.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+A.name,H,h.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+x,"#define MAX_BONES "+h.maxBones,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+b:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMap&&h.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",h.normalMap&&h.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.displacementMap&&h.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexTangents?"#define USE_TANGENT":"",h.vertexColors?"#define USE_COLOR":"",h.vertexUvs?"#define USE_UV":"",h.flatShading?"#define FLAT_SHADED":"",h.skinning?"#define USE_SKINNING":"",h.useVertexTexture?"#define BONE_TEXTURE":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals&&!1===h.flatShading?"#define USE_MORPHNORMALS":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+G:"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&(P.isWebGL2||o.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(g).join("\n"),D=[C,"precision "+h.precision+" float;","precision "+h.precision+" int;","highp"===h.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+A.name,H,h.alphaTest?"#define ALPHATEST "+h.alphaTest+(h.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+x,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.matcap?"#define USE_MATCAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+R:"",h.envMap?"#define "+b:"",h.envMap?"#define "+I:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMap&&h.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",h.normalMap&&h.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.sheen?"#define USE_SHEEN":"",h.vertexTangents?"#define USE_TANGENT":"",h.vertexColors?"#define USE_COLOR":"",h.vertexUvs?"#define USE_UV":"",h.gradientMap?"#define USE_GRADIENTMAP":"",h.flatShading?"#define FLAT_SHADED":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+G:"",h.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",h.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&(P.isWebGL2||o.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(m.extensions&&m.extensions.shaderTextureLOD||h.envMap)&&(P.isWebGL2||o.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",h.toneMapping!==r.NoToneMapping?"#define TONE_MAPPING":"",h.toneMapping!==r.NoToneMapping?a.ShaderChunk.tonemapping_pars_fragment:"",h.toneMapping!==r.NoToneMapping?f("toneMapping",h.toneMapping):"",h.dithering?"#define DITHERING":"",h.outputEncoding||h.mapEncoding||h.matcapEncoding||h.envMapEncoding||h.emissiveMapEncoding?a.ShaderChunk.encodings_pars_fragment:"",h.mapEncoding?p("mapTexelToLinear",h.mapEncoding):"",h.matcapEncoding?p("matcapTexelToLinear",h.matcapEncoding):"",h.envMapEncoding?p("envMapTexelToLinear",h.envMapEncoding):"",h.emissiveMapEncoding?p("emissiveMapTexelToLinear",h.emissiveMapEncoding):"",h.outputEncoding?E("linearToOutputTexel",h.outputEncoding):"",h.depthPacking?"#define DEPTH_PACKING "+m.depthPacking:"","\n"].filter(g).join("\n")),N=_(N=M(N=S(N),h),h),U=_(U=M(U=S(U),h),h),N=l(N),U=l(U),P.isWebGL2&&!m.isRawShaderMaterial){var w=!1,F=/^\s*#version\s+300\s+es\s*\n/;m.isShaderMaterial&&null!==N.match(F)&&null!==U.match(F)&&(w=!0,N=N.replace(F,""),U=U.replace(F,"")),O=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+O,D=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+D}var V,X,W=O+N,j=D+U,k=(0,n.WebGLShader)(L,L.VERTEX_SHADER,W),Y=(0,n.WebGLShader)(L,L.FRAGMENT_SHADER,j);if(L.attachShader(B,k),L.attachShader(B,Y),void 0!==m.index0AttributeName?L.bindAttribLocation(B,0,m.index0AttributeName):!0===h.morphTargets&&L.bindAttribLocation(B,0,"position"),L.linkProgram(B),i.debug.checkShaderErrors){var y=L.getProgramInfoLog(B).trim(),q=L.getShaderInfoLog(k).trim(),K=L.getShaderInfoLog(Y).trim(),z=!0,J=!0;if(!1===L.getProgramParameter(B,L.LINK_STATUS)){z=!1;var Q=d(L,k,"vertex"),Z=d(L,Y,"fragment");console.error("THREE.WebGLProgram: shader error: ",L.getError(),"gl.VALIDATE_STATUS",L.getProgramParameter(B,L.VALIDATE_STATUS),"gl.getProgramInfoLog",y,Q,Z)}else""!==y?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",y):""!==q&&""!==K||(J=!1);J&&(this.diagnostics={runnable:z,material:m,programLog:y,vertexShader:{log:q,prefix:O},fragmentShader:{log:K,prefix:D}})}return L.deleteShader(k),L.deleteShader(Y),this.getUniforms=function(){return void 0===V&&(V=new e.WebGLUniforms(L,B)),V},this.getAttributes=function(){return void 0===X&&(X=c(L,B)),X},this.destroy=function(){L.deleteProgram(B),this.program=void 0},this.name=A.name,this.id=t++,this.code=T,this.usedTimes=1,this.program=B,this.vertexShader=k,this.fragmentShader=Y,this}
},{"./WebGLUniforms.js":"Emi0","./WebGLShader.js":"u10k","../shaders/ShaderChunk.js":"FTRQ","../../constants.js":"PJkd"}],"FMQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLPrograms=t;var e=require("../../constants.js"),a=require("./WebGLProgram.js");function t(t,n,r){var p=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function o(a,t){var n;return a?a.isTexture?n=a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=a.texture.encoding):n=e.LinearEncoding,n===e.LinearEncoding&&t&&(n=e.GammaEncoding),n}this.getParameters=function(a,n,p,s,h,l,m){var g=i[a.type],M=m.isSkinnedMesh?function(e){var a=e.skeleton.bones;if(r.floatVertexTextures)return 1024;var t=r.maxVertexUniforms,n=Math.floor((t-20)/4),p=Math.min(n,a.length);return p<a.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+a.length+" bones. This GPU supports "+p+"."),0):p}(m):0,u=r.precision;null!==a.precision&&(u=r.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",u,"instead.");var c=t.getRenderTarget();return{shaderID:g,precision:u,supportsVertexTextures:r.vertexTextures,outputEncoding:o(c?c.texture:null,t.gammaOutput),map:!!a.map,mapEncoding:o(a.map,t.gammaInput),matcap:!!a.matcap,matcapEncoding:o(a.matcap,t.gammaInput),envMap:!!a.envMap,envMapMode:a.envMap&&a.envMap.mapping,envMapEncoding:o(a.envMap,t.gammaInput),envMapCubeUV:!!a.envMap&&(a.envMap.mapping===e.CubeUVReflectionMapping||a.envMap.mapping===e.CubeUVRefractionMapping),lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:o(a.emissiveMap,t.gammaInput),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===e.ObjectSpaceNormalMap,tangentSpaceNormalMap:a.normalMapType===e.TangentSpaceNormalMap,clearcoatNormalMap:!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,gradientMap:!!a.gradientMap,sheen:!!a.sheen,combine:a.combine,vertexTangents:a.normalMap&&a.vertexTangents,vertexColors:a.vertexColors,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap),fog:!!s,useFog:a.fog,fogExp2:s&&s.isFogExp2,flatShading:a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:a.skinning&&M>0,maxBones:M,useVertexTexture:r.floatVertexTextures,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numDirLightShadows:n.directionalShadowMap.length,numPointLightShadows:n.pointShadowMap.length,numSpotLightShadows:n.spotShadowMap.length,numClippingPlanes:h,numClipIntersection:l,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&m.receiveShadow&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:a.toneMapped?t.toneMapping:e.NoToneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,alphaTest:a.alphaTest,doubleSided:a.side===e.DoubleSide,flipSided:a.side===e.BackSide,depthPacking:void 0!==a.depthPacking&&a.depthPacking}},this.getProgramCode=function(e,a){var n=[];if(a.shaderID?n.push(a.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var p=0;p<s.length;p++)n.push(a[s[p]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.push(t.gammaFactor),n.join()},this.acquireProgram=function(e,i,s,o){for(var h,l=0,m=p.length;l<m;l++){var g=p[l];if(g.code===o){++(h=g).usedTimes;break}}return void 0===h&&(h=new a.WebGLProgram(t,n,o,e,i,s,r),p.push(h)),h},this.releaseProgram=function(e){if(0==--e.usedTimes){var a=p.indexOf(e);p[a]=p[p.length-1],p.pop(),e.destroy()}},this.programs=p}
},{"../../constants.js":"PJkd","./WebGLProgram.js":"srxr"}],"/iBV":[function(require,module,exports) {
"use strict";function e(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLProperties=e;
},{}],"BSiz":[function(require,module,exports) {
"use strict";function r(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.program!==e.program?r.program.id-e.program.id:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function e(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function n(){var n=[],t=0,d=[],o=[],i={id:-1};function a(r,e,d,o,a,u){var p=n[t];return void 0===p?(p={id:r.id,object:r,geometry:e,material:d,program:d.program||i,groupOrder:o,renderOrder:r.renderOrder,z:a,group:u},n[t]=p):(p.id=r.id,p.object=r,p.geometry=e,p.material=d,p.program=d.program||i,p.groupOrder=o,p.renderOrder=r.renderOrder,p.z=a,p.group=u),t++,p}return{opaque:d,transparent:o,init:function(){t=0,d.length=0,o.length=0},push:function(r,e,n,t,i,u){var p=a(r,e,n,t,i,u);(!0===n.transparent?o:d).push(p)},unshift:function(r,e,n,t,i,u){var p=a(r,e,n,t,i,u);(!0===n.transparent?o:d).unshift(p)},sort:function(){d.length>1&&d.sort(r),o.length>1&&o.sort(e)}}}function t(){var r=new WeakMap;function e(n){var t=n.target;t.removeEventListener("dispose",e),r.delete(t)}return{get:function(t,d){var o,i=r.get(t);return void 0===i?(o=new n,r.set(t,new WeakMap),r.get(t).set(d,o),t.addEventListener("dispose",e)):void 0===(o=i.get(d))&&(o=new n,i.set(d,o)),o},dispose:function(){r=new WeakMap}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLRenderLists=t;
},{}],"NHEW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLLights=s;var o=require("../../math/Color.js"),a=require("../../math/Matrix4.js"),t=require("../../math/Vector2.js"),i=require("../../math/Vector3.js");function e(){var a={};return{get:function(e){if(void 0!==a[e.id])return a[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new i.Vector3,color:new o.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new t.Vector2};break;case"SpotLight":r={position:new i.Vector3,direction:new i.Vector3,color:new o.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new t.Vector2};break;case"PointLight":r={position:new i.Vector3,color:new o.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new t.Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new i.Vector3,skyColor:new o.Color,groundColor:new o.Color};break;case"RectAreaLight":r={color:new o.Color,position:new i.Vector3,halfWidth:new i.Vector3,halfHeight:new i.Vector3}}return a[e.id]=r,r}}}var r=0;function n(o,a){return(a.castShadow?1:0)-(o.castShadow?1:0)}function s(){for(var o=new e,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},s=0;s<9;s++)t.probe.push(new i.Vector3);var h=new i.Vector3,d=new a.Matrix4,c=new a.Matrix4;return{setup:function(a,i,e){for(var s=0,l=0,p=0,w=0;w<9;w++)t.probe[w].set(0,0,0);var m=0,S=0,g=0,u=0,M=0,x=0,y=0,f=0,L=e.matrixWorldInverse;a.sort(n),w=0;for(var b=a.length;w<b;w++){var C=a[w],v=C.color,P=C.intensity,V=C.distance,W=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)s+=v.r*P,l+=v.g*P,p+=v.b*P;else if(C.isLightProbe)for(var z=0;z<9;z++)t.probe[z].addScaledVector(C.sh.coefficients[z],P);else if(C.isDirectionalLight){if((A=o.get(C)).color.copy(C.color).multiplyScalar(C.intensity),A.direction.setFromMatrixPosition(C.matrixWorld),h.setFromMatrixPosition(C.target.matrixWorld),A.direction.sub(h),A.direction.transformDirection(L),A.shadow=C.castShadow,C.castShadow){var F=C.shadow;A.shadowBias=F.bias,A.shadowRadius=F.radius,A.shadowMapSize=F.mapSize,t.directionalShadowMap[m]=W,t.directionalShadowMatrix[m]=C.shadow.matrix,x++}t.directional[m]=A,m++}else if(C.isSpotLight)(A=o.get(C)).position.setFromMatrixPosition(C.matrixWorld),A.position.applyMatrix4(L),A.color.copy(v).multiplyScalar(P),A.distance=V,A.direction.setFromMatrixPosition(C.matrixWorld),h.setFromMatrixPosition(C.target.matrixWorld),A.direction.sub(h),A.direction.transformDirection(L),A.coneCos=Math.cos(C.angle),A.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),A.decay=C.decay,A.shadow=C.castShadow,C.castShadow&&(F=C.shadow,A.shadowBias=F.bias,A.shadowRadius=F.radius,A.shadowMapSize=F.mapSize,t.spotShadowMap[g]=W,t.spotShadowMatrix[g]=C.shadow.matrix,f++),t.spot[g]=A,g++;else if(C.isRectAreaLight)(A=o.get(C)).color.copy(v).multiplyScalar(P),A.position.setFromMatrixPosition(C.matrixWorld),A.position.applyMatrix4(L),c.identity(),d.copy(C.matrixWorld),d.premultiply(L),c.extractRotation(d),A.halfWidth.set(.5*C.width,0,0),A.halfHeight.set(0,.5*C.height,0),A.halfWidth.applyMatrix4(c),A.halfHeight.applyMatrix4(c),t.rectArea[u]=A,u++;else if(C.isPointLight)(A=o.get(C)).position.setFromMatrixPosition(C.matrixWorld),A.position.applyMatrix4(L),A.color.copy(C.color).multiplyScalar(C.intensity),A.distance=C.distance,A.decay=C.decay,A.shadow=C.castShadow,C.castShadow&&(F=C.shadow,A.shadowBias=F.bias,A.shadowRadius=F.radius,A.shadowMapSize=F.mapSize,A.shadowCameraNear=F.camera.near,A.shadowCameraFar=F.camera.far,t.pointShadowMap[S]=W,t.pointShadowMatrix[S]=C.shadow.matrix,y++),t.point[S]=A,S++;else if(C.isHemisphereLight){var A;(A=o.get(C)).direction.setFromMatrixPosition(C.matrixWorld),A.direction.transformDirection(L),A.direction.normalize(),A.skyColor.copy(C.color).multiplyScalar(P),A.groundColor.copy(C.groundColor).multiplyScalar(P),t.hemi[M]=A,M++}}t.ambient[0]=s,t.ambient[1]=l,t.ambient[2]=p;var D=t.hash;D.directionalLength===m&&D.pointLength===S&&D.spotLength===g&&D.rectAreaLength===u&&D.hemiLength===M&&D.numDirectionalShadows===x&&D.numPointShadows===y&&D.numSpotShadows===f||(t.directional.length=m,t.spot.length=g,t.rectArea.length=u,t.point.length=S,t.hemi.length=M,t.directionalShadowMap.length=x,t.pointShadowMap.length=y,t.spotShadowMap.length=f,t.directionalShadowMatrix.length=x,t.pointShadowMatrix.length=y,t.spotShadowMatrix.length=f,D.directionalLength=m,D.pointLength=S,D.spotLength=g,D.rectAreaLength=u,D.hemiLength=M,D.numDirectionalShadows=x,D.numPointShadows=y,D.numSpotShadows=f,t.version=r++)},state:t}}
},{"../../math/Color.js":"w/VZ","../../math/Matrix4.js":"q1h8","../../math/Vector2.js":"edIZ","../../math/Vector3.js":"QOxd"}],"NXrc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLRenderStates=n;var e=require("./WebGLLights.js");function t(){var t=new e.WebGLLights,n=[],s=[];return{init:function(){n.length=0,s.length=0},state:{lightsArray:n,shadowsArray:s,lights:t},setupLights:function(e){t.setup(n,s,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){s.push(e)}}}function n(){var e=new WeakMap;function n(t){var s=t.target;s.removeEventListener("dispose",n),e.delete(s)}return{get:function(s,r){var i;return!1===e.has(s)?(i=new t,e.set(s,new WeakMap),e.get(s).set(r,i),s.addEventListener("dispose",n)):!1===e.get(s).has(r)?(i=new t,e.get(s).set(r,i)):i=e.get(s).get(r),i},dispose:function(){e=new WeakMap}}}
},{"./WebGLLights.js":"NHEW"}],"g8k8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLRenderTarget=s;var e=require("../core/EventDispatcher.js"),t=require("../textures/Texture.js"),i=require("../constants.js"),r=require("../math/Vector4.js");function s(e,s,h){this.width=e,this.height=s,this.scissor=new r.Vector4(0,0,e,s),this.scissorTest=!1,this.viewport=new r.Vector4(0,0,e,s),h=h||{},this.texture=new t.Texture(void 0,void 0,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=s,this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:i.LinearFilter,this.depthBuffer=void 0===h.depthBuffer||h.depthBuffer,this.stencilBuffer=void 0===h.stencilBuffer||h.stencilBuffer,this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null}s.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:s,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
},{"../core/EventDispatcher.js":"0HfK","../textures/Texture.js":"X6VN","../constants.js":"PJkd","../math/Vector4.js":"HLun"}],"363S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshDepthMaterial=i;var t=require("./Material.js"),e=require("../constants.js");function i(i){t.Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=e.BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(i)}i.prototype=Object.create(t.Material.prototype),i.prototype.constructor=i,i.prototype.isMeshDepthMaterial=!0,i.prototype.copy=function(e){return t.Material.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};
},{"./Material.js":"ie8i","../constants.js":"PJkd"}],"23tx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeshDistanceMaterial=i;var e=require("./Material.js"),t=require("../math/Vector3.js");function i(i){e.Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new t.Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(i)}i.prototype=Object.create(e.Material.prototype),i.prototype.constructor=i,i.prototype.isMeshDistanceMaterial=!0,i.prototype.copy=function(t){return e.Material.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};
},{"./Material.js":"ie8i","../math/Vector3.js":"QOxd"}],"YzA9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n    #ifdef HORIZONAL_PASS\n\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n    #else\n\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n\n    #endif\n\n  }\n\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n\n}\n";exports.default=n;
},{}],"R0X9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="\n\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n\n";exports.default=e;
},{}],"ZSzd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLShadowMap=c;var e=require("../../constants.js"),r=require("../WebGLRenderTarget.js"),a=require("../../materials/MeshDepthMaterial.js"),t=require("../../materials/MeshDistanceMaterial.js"),i=require("../../materials/ShaderMaterial.js"),s=require("../../core/BufferAttribute.js"),n=require("../../core/BufferGeometry.js"),o=require("../../objects/Mesh.js"),l=require("../../math/Vector4.js"),d=require("../../math/Vector2.js"),u=require("../../math/Frustum.js"),h=m(require("../shaders/ShaderLib/vsm_frag.glsl.js")),p=m(require("../shaders/ShaderLib/vsm_vert.glsl.js"));function m(e){return e&&e.__esModule?e:{default:e}}function c(m,c,f){var w=new u.Frustum,g=new d.Vector2,v=new d.Vector2,M=new l.Vector4,S=1,y=2,x=1+(S|y),b=new Array(x),L=new Array(x),A={},P={0:e.BackSide,1:e.FrontSide,2:e.DoubleSide},T=new i.ShaderMaterial({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new d.Vector2},radius:{value:4}},vertexShader:p.default,fragmentShader:h.default}),F=T.clone();F.defines.HORIZONAL_PASS=1;var R=new n.BufferGeometry;R.addAttribute("position",new s.BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));for(var j=new o.Mesh(R,T),B=0;B!==x;++B){var D=0!=(B&S),G=0!=(B&y),E=new a.MeshDepthMaterial({depthPacking:e.RGBADepthPacking,morphTargets:D,skinning:G});b[B]=E;var q=new t.MeshDistanceMaterial({morphTargets:D,skinning:G});L[B]=q}var V=this;function _(e,r){var a=c.update(j);T.uniforms.shadow_pass.value=e.map.texture,T.uniforms.resolution.value=e.mapSize,T.uniforms.radius.value=e.radius,m.setRenderTarget(e.mapPass),m.clear(),m.renderBufferDirect(r,null,a,T,j,null),F.uniforms.shadow_pass.value=e.mapPass.texture,F.uniforms.resolution.value=e.mapSize,F.uniforms.radius.value=e.radius,m.setRenderTarget(e.map),m.clear(),m.renderBufferDirect(r,null,a,F,j,null)}function k(r,a,t,i,s,n){var o=r.geometry,l=null,d=b,u=r.customDepthMaterial;if(t.isPointLight&&(d=L,u=r.customDistanceMaterial),u)l=u;else{var h=!1;a.morphTargets&&(o&&o.isBufferGeometry?h=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(h=o.morphTargets&&o.morphTargets.length>0)),r.isSkinnedMesh&&!1===a.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",r);var p=r.isSkinnedMesh&&a.skinning,c=0;h&&(c|=S),p&&(c|=y),l=d[c]}if(m.localClippingEnabled&&!0===a.clipShadows&&0!==a.clippingPlanes.length){var f=l.uuid,w=a.uuid,g=A[f];void 0===g&&(g={},A[f]=g);var v=g[w];void 0===v&&(v=l.clone(),g[w]=v),l=v}return l.visible=a.visible,l.wireframe=a.wireframe,n===e.VSMShadowMap?l.side=null!=a.shadowSide?a.shadowSide:a.side:l.side=null!=a.shadowSide?a.shadowSide:P[a.side],l.clipShadows=a.clipShadows,l.clippingPlanes=a.clippingPlanes,l.clipIntersection=a.clipIntersection,l.wireframeLinewidth=a.wireframeLinewidth,l.linewidth=a.linewidth,t.isPointLight&&l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(t.matrixWorld),l.nearDistance=i,l.farDistance=s),l}function W(r,a,t,i,s){if(!1!==r.visible){if(r.layers.test(a.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&s===e.VSMShadowMap)&&(!r.frustumCulled||w.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,r.matrixWorld);var n=c.update(r),o=r.material;if(Array.isArray(o))for(var l=n.groups,d=0,u=l.length;d<u;d++){var h=l[d],p=o[h.materialIndex];if(p&&p.visible){var f=k(r,p,i,t.near,t.far,s);m.renderBufferDirect(t,null,n,f,r,h)}}else if(o.visible){f=k(r,o,i,t.near,t.far,s);m.renderBufferDirect(t,null,n,f,r,null)}}for(var g=r.children,v=0,M=g.length;v<M;v++)W(g[v],a,t,i,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=e.PCFShadowMap,this.render=function(a,t,i){if(!1!==V.enabled&&(!1!==V.autoUpdate||!1!==V.needsUpdate)&&0!==a.length){var s=m.getRenderTarget(),n=m.getActiveCubeFace(),o=m.getActiveMipmapLevel(),l=m.state;l.setBlending(e.NoBlending),l.buffers.color.setClear(1,1,1,1),l.buffers.depth.setTest(!0),l.setScissorTest(!1);for(var d=0,u=a.length;d<u;d++){var h=a[d],p=h.shadow;if(void 0!==p){g.copy(p.mapSize);var c=p.getFrameExtents();if(g.multiply(c),v.copy(p.mapSize),(g.x>f||g.y>f)&&(console.warn("THREE.WebGLShadowMap:",h,"has shadow exceeding max texture size, reducing"),g.x>f&&(v.x=Math.floor(f/c.x),g.x=v.x*c.x,p.mapSize.x=v.x),g.y>f&&(v.y=Math.floor(f/c.y),g.y=v.y*c.y,p.mapSize.y=v.y)),null===p.map&&!p.isPointLightShadow&&this.type===e.VSMShadowMap){var S={minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat};p.map=new r.WebGLRenderTarget(g.x,g.y,S),p.map.texture.name=h.name+".shadowMap",p.mapPass=new r.WebGLRenderTarget(g.x,g.y,S),p.camera.updateProjectionMatrix()}if(null===p.map){S={minFilter:e.NearestFilter,magFilter:e.NearestFilter,format:e.RGBAFormat};p.map=new r.WebGLRenderTarget(g.x,g.y,S),p.map.texture.name=h.name+".shadowMap",p.camera.updateProjectionMatrix()}m.setRenderTarget(p.map),m.clear();for(var y=p.getViewportCount(),x=0;x<y;x++){var b=p.getViewport(x);M.set(v.x*b.x,v.y*b.y,v.x*b.z,v.y*b.w),l.viewport(M),p.updateMatrices(h,i,x),w=p.getFrustum(),W(t,i,p.camera,h,this.type)}p.isPointLightShadow||this.type!==e.VSMShadowMap||_(p,i)}else console.warn("THREE.WebGLShadowMap:",h,"has no shadow.")}V.needsUpdate=!1,m.setRenderTarget(s,n,o)}}}
},{"../../constants.js":"PJkd","../WebGLRenderTarget.js":"g8k8","../../materials/MeshDepthMaterial.js":"363S","../../materials/MeshDistanceMaterial.js":"23tx","../../materials/ShaderMaterial.js":"EGzX","../../core/BufferAttribute.js":"0uom","../../core/BufferGeometry.js":"kSEB","../../objects/Mesh.js":"+ZOy","../../math/Vector4.js":"HLun","../../math/Vector2.js":"edIZ","../../math/Frustum.js":"I8NQ","../shaders/ShaderLib/vsm_frag.glsl.js":"YzA9","../shaders/ShaderLib/vsm_vert.glsl.js":"R0X9"}],"WDO0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLState=n;var e=require("../../constants.js"),t=require("../../math/Vector4.js");function n(n,l,r,a){var u=new function(){var e=!1,l=new t.Vector4,r=null,a=new t.Vector4(0,0,0,0);return{setMask:function(t){r===t||e||(n.colorMask(t,t,t,t),r=t)},setLocked:function(t){e=t},setClear:function(e,t,r,u,c){!0===c&&(e*=u,t*=u,r*=u),l.set(e,t,r,u),!1===a.equals(l)&&(n.clearColor(e,t,r,u),a.copy(l))},reset:function(){e=!1,r=null,a.set(-1,0,0,0)}}},c=new function(){var t=!1,l=null,r=null,a=null;return{setTest:function(e){e?w(n.DEPTH_TEST):q(n.DEPTH_TEST)},setMask:function(e){l===e||t||(n.depthMask(e),l=e)},setFunc:function(t){if(r!==t){if(t)switch(t){case e.NeverDepth:n.depthFunc(n.NEVER);break;case e.AlwaysDepth:n.depthFunc(n.ALWAYS);break;case e.LessDepth:n.depthFunc(n.LESS);break;case e.LessEqualDepth:n.depthFunc(n.LEQUAL);break;case e.EqualDepth:n.depthFunc(n.EQUAL);break;case e.GreaterEqualDepth:n.depthFunc(n.GEQUAL);break;case e.GreaterDepth:n.depthFunc(n.GREATER);break;case e.NotEqualDepth:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}else n.depthFunc(n.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(e){a!==e&&(n.clearDepth(e),a=e)},reset:function(){t=!1,l=null,r=null,a=null}}},s=new function(){var e=!1,t=null,l=null,r=null,a=null,u=null,c=null,s=null,i=null;return{setTest:function(t){e||(t?w(n.STENCIL_TEST):q(n.STENCIL_TEST))},setMask:function(l){t===l||e||(n.stencilMask(l),t=l)},setFunc:function(e,t,u){l===e&&r===t&&a===u||(n.stencilFunc(e,t,u),l=e,r=t,a=u)},setOp:function(e,t,l){u===e&&c===t&&s===l||(n.stencilOp(e,t,l),u=e,c=t,s=l)},setLocked:function(t){e=t},setClear:function(e){i!==e&&(n.clearStencil(e),i=e)},reset:function(){e=!1,t=null,l=null,r=null,a=null,u=null,c=null,s=null,i=null}}},i=n.getParameter(n.MAX_VERTEX_ATTRIBS),o=new Uint8Array(i),E=new Uint8Array(i),d=new Uint8Array(i),_={},f=null,p=null,T=null,A=null,b=null,S=null,L=null,F=null,R=null,O=null,C=!1,N=null,g=null,v=null,h=null,U=null,D=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),x=!1,B=0,I=n.getParameter(n.VERSION);-1!==I.indexOf("WebGL")?(B=parseFloat(/^WebGL\ ([0-9])/.exec(I)[1]),x=B>=1):-1!==I.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(I)[1]),x=B>=2);var k=null,y={},M=new t.Vector4,m=new t.Vector4;function G(e,t,l){var r=new Uint8Array(4),a=n.createTexture();n.bindTexture(e,a),n.texParameteri(e,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(e,n.TEXTURE_MAG_FILTER,n.NEAREST);for(var u=0;u<l;u++)n.texImage2D(t+u,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,r);return a}var P={};function W(e,t){(o[e]=1,0===E[e]&&(n.enableVertexAttribArray(e),E[e]=1),d[e]!==t)&&((a.isWebGL2?n:l.get("ANGLE_instanced_arrays"))[a.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](e,t),d[e]=t)}function w(e){!0!==_[e]&&(n.enable(e),_[e]=!0)}function q(e){!1!==_[e]&&(n.disable(e),_[e]=!1)}function H(t,l,a,u,c,s,i,o){if(t!==e.NoBlending){if(T||(w(n.BLEND),T=!0),t===e.CustomBlending)c=c||l,s=s||a,i=i||u,l===b&&c===F||(n.blendEquationSeparate(r.convert(l),r.convert(c)),b=l,F=c),a===S&&u===L&&s===R&&i===O||(n.blendFuncSeparate(r.convert(a),r.convert(u),r.convert(s),r.convert(i)),S=a,L=u,R=s,O=i),A=t,C=null;else if(t!==A||o!==C){if(b===e.AddEquation&&F===e.AddEquation||(n.blendEquation(n.FUNC_ADD),b=e.AddEquation,F=e.AddEquation),o)switch(t){case e.NormalBlending:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case e.AdditiveBlending:n.blendFunc(n.ONE,n.ONE);break;case e.SubtractiveBlending:n.blendFuncSeparate(n.ZERO,n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ONE_MINUS_SRC_ALPHA);break;case e.MultiplyBlending:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case e.NormalBlending:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case e.AdditiveBlending:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case e.SubtractiveBlending:n.blendFunc(n.ZERO,n.ONE_MINUS_SRC_COLOR);break;case e.MultiplyBlending:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}S=null,L=null,R=null,O=null,A=t,C=o}}else T&&(q(n.BLEND),T=!1)}function X(e){N!==e&&(e?n.frontFace(n.CW):n.frontFace(n.CCW),N=e)}function V(t){t!==e.CullFaceNone?(w(n.CULL_FACE),t!==g&&(t===e.CullFaceBack?n.cullFace(n.BACK):t===e.CullFaceFront?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):q(n.CULL_FACE),g=t}function Z(e,t,l){e?(w(n.POLYGON_OFFSET_FILL),h===t&&U===l||(n.polygonOffset(t,l),h=t,U=l)):q(n.POLYGON_OFFSET_FILL)}function Q(e){void 0===e&&(e=n.TEXTURE0+D-1),k!==e&&(n.activeTexture(e),k=e)}return P[n.TEXTURE_2D]=G(n.TEXTURE_2D,n.TEXTURE_2D,1),P[n.TEXTURE_CUBE_MAP]=G(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),u.setClear(0,0,0,1),c.setClear(1),s.setClear(0),w(n.DEPTH_TEST),c.setFunc(e.LessEqualDepth),X(!1),V(e.CullFaceBack),w(n.CULL_FACE),H(e.NoBlending),{buffers:{color:u,depth:c,stencil:s},initAttributes:function(){for(var e=0,t=o.length;e<t;e++)o[e]=0},enableAttribute:function(e){W(e,0)},enableAttributeAndDivisor:W,disableUnusedAttributes:function(){for(var e=0,t=E.length;e!==t;++e)E[e]!==o[e]&&(n.disableVertexAttribArray(e),E[e]=0)},enable:w,disable:q,getCompressedTextureFormats:function(){if(null===f&&(f=[],l.get("WEBGL_compressed_texture_pvrtc")||l.get("WEBGL_compressed_texture_s3tc")||l.get("WEBGL_compressed_texture_etc1")||l.get("WEBGL_compressed_texture_astc")))for(var e=n.getParameter(n.COMPRESSED_TEXTURE_FORMATS),t=0;t<e.length;t++)f.push(e[t]);return f},useProgram:function(e){return p!==e&&(n.useProgram(e),p=e,!0)},setBlending:H,setMaterial:function(t,l){t.side===e.DoubleSide?q(n.CULL_FACE):w(n.CULL_FACE);var r=t.side===e.BackSide;l&&(r=!r),X(r),t.blending===e.NormalBlending&&!1===t.transparent?H(e.NoBlending):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),c.setFunc(t.depthFunc),c.setTest(t.depthTest),c.setMask(t.depthWrite),u.setMask(t.colorWrite);var a=t.stencilWrite;s.setTest(a),a&&(s.setFunc(t.stencilFunc,t.stencilRef,t.stencilMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Z(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:X,setCullFace:V,setLineWidth:function(e){e!==v&&(x&&n.lineWidth(e),v=e)},setPolygonOffset:Z,setScissorTest:function(e){e?w(n.SCISSOR_TEST):q(n.SCISSOR_TEST)},activeTexture:Q,bindTexture:function(e,t){null===k&&Q();var l=y[k];void 0===l&&(l={type:void 0,texture:void 0},y[k]=l),l.type===e&&l.texture===t||(n.bindTexture(e,t||P[e]),l.type=e,l.texture=t)},compressedTexImage2D:function(){try{n.compressedTexImage2D.apply(n,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{n.texImage2D.apply(n,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{n.texImage3D.apply(n,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===M.equals(e)&&(n.scissor(e.x,e.y,e.z,e.w),M.copy(e))},viewport:function(e){!1===m.equals(e)&&(n.viewport(e.x,e.y,e.z,e.w),m.copy(e))},reset:function(){for(var e=0;e<E.length;e++)1===E[e]&&(n.disableVertexAttribArray(e),E[e]=0);_={},f=null,k=null,y={},p=null,A=null,N=null,g=null,u.reset(),c.reset(),s.reset()}}}
},{"../../constants.js":"PJkd","../../math/Vector4.js":"HLun"}],"/R8J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLTextures=r;var e=require("../../constants.js"),t=require("../../math/Math.js");function r(r,i,a,n,T,u,E){var f,o=new WeakMap,_="undefined"!=typeof OffscreenCanvas;function s(e,t){return _?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function R(e,r,i,a){var n=1;if((e.width>a||e.height>a)&&(n=a/Math.max(e.width,e.height)),n<1||!0===r){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var T=r?t._Math.floorPowerOfTwo:Math.floor,u=T(n*e.width),E=T(n*e.height);void 0===f&&(f=s(u,E));var o=i?s(u,E):f;return o.width=u,o.height=E,o.getContext("2d").drawImage(e,0,0,u,E),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+u+"x"+E+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function l(e){return t._Math.isPowerOfTwo(e.width)&&t._Math.isPowerOfTwo(e.height)}function d(t,r){return t.generateMipmaps&&r&&t.minFilter!==e.NearestFilter&&t.minFilter!==e.LinearFilter}function g(e,t,i,a){r.generateMipmap(e),n.get(t).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function m(e,t){if(!T.isWebGL2)return e;var a=e;return e===r.RED&&(t===r.FLOAT&&(a=r.R32F),t===r.HALF_FLOAT&&(a=r.R16F),t===r.UNSIGNED_BYTE&&(a=r.R8)),e===r.RGB&&(t===r.FLOAT&&(a=r.RGB32F),t===r.HALF_FLOAT&&(a=r.RGB16F),t===r.UNSIGNED_BYTE&&(a=r.RGB8)),e===r.RGBA&&(t===r.FLOAT&&(a=r.RGBA32F),t===r.HALF_FLOAT&&(a=r.RGBA16F),t===r.UNSIGNED_BYTE&&(a=r.RGBA8)),a===r.R16F||a===r.R32F||a===r.RGBA16F||a===r.RGBA32F?i.get("EXT_color_buffer_float"):a!==r.RGB16F&&a!==r.RGB32F||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),a}function p(t){return t===e.NearestFilter||t===e.NearestMipmapNearestFilter||t===e.NearestMipmapLinearFilter?r.NEAREST:r.LINEAR}function h(e){var t=e.target;t.removeEventListener("dispose",h),function(e){var t=n.get(e);if(void 0===t.__webglInit)return;r.deleteTexture(t.__webglTexture),n.remove(e)}(t),t.isVideoTexture&&o.delete(t),E.memory.textures--}function b(e){var t=e.target;t.removeEventListener("dispose",b),function(e){var t=n.get(e),i=n.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&r.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)r.deleteFramebuffer(t.__webglFramebuffer[a]),t.__webglDepthbuffer&&r.deleteRenderbuffer(t.__webglDepthbuffer[a]);else r.deleteFramebuffer(t.__webglFramebuffer),t.__webglDepthbuffer&&r.deleteRenderbuffer(t.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}(t),E.memory.textures--}var x=0;function F(e,t){var i=n.get(e);if(e.isVideoTexture&&function(e){var t=E.render.frame;o.get(e)!==t&&(o.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var T=e.image;if(void 0===T)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==T.complete)return void v(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(r.TEXTURE0+t),a.bindTexture(r.TEXTURE_2D,i.__webglTexture)}function w(t,i){if(6===t.image.length){var E=n.get(t);if(t.version>0&&E.__version!==t.version){c(E,t),a.activeTexture(r.TEXTURE0+i),a.bindTexture(r.TEXTURE_CUBE_MAP,E.__webglTexture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var f=t&&t.isCompressedTexture,o=t.image[0]&&t.image[0].isDataTexture,_=[],s=0;s<6;s++)_[s]=f||o?o?t.image[s].image:t.image[s]:R(t.image[s],!1,!0,T.maxCubemapSize);var p,h=_[0],b=l(h)||T.isWebGL2,x=u.convert(t.format),F=u.convert(t.type),w=m(x,F);if(D(r.TEXTURE_CUBE_MAP,t,b),f){for(s=0;s<6;s++){p=_[s].mipmaps;for(var U=0;U<p.length;U++){var v=p[U];t.format!==e.RGBAFormat&&t.format!==e.RGBFormat?a.getCompressedTextureFormats().indexOf(x)>-1?a.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+s,U,w,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+s,U,w,v.width,v.height,0,x,F,v.data)}}E.__maxMipLevel=p.length-1}else{p=t.mipmaps;for(s=0;s<6;s++)if(o){a.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,w,_[s].width,_[s].height,0,x,F,_[s].data);for(U=0;U<p.length;U++){var A=(v=p[U]).image[s].image;a.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+s,U+1,w,A.width,A.height,0,x,F,A.data)}}else{a.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,w,x,F,_[s]);for(U=0;U<p.length;U++){v=p[U];a.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+s,U+1,w,x,F,v.image[s])}}E.__maxMipLevel=p.length}d(t,b)&&g(r.TEXTURE_CUBE_MAP,t,h.width,h.height),E.__version=t.version,t.onUpdate&&t.onUpdate(t)}else a.activeTexture(r.TEXTURE0+i),a.bindTexture(r.TEXTURE_CUBE_MAP,E.__webglTexture)}}function U(e,t){a.activeTexture(r.TEXTURE0+t),a.bindTexture(r.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function D(t,a,E){var f;if(E?(r.texParameteri(t,r.TEXTURE_WRAP_S,u.convert(a.wrapS)),r.texParameteri(t,r.TEXTURE_WRAP_T,u.convert(a.wrapT)),t!==r.TEXTURE_3D&&t!==r.TEXTURE_2D_ARRAY||r.texParameteri(t,r.TEXTURE_WRAP_R,u.convert(a.wrapR)),r.texParameteri(t,r.TEXTURE_MAG_FILTER,u.convert(a.magFilter)),r.texParameteri(t,r.TEXTURE_MIN_FILTER,u.convert(a.minFilter))):(r.texParameteri(t,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(t,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),t!==r.TEXTURE_3D&&t!==r.TEXTURE_2D_ARRAY||r.texParameteri(t,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),a.wrapS===e.ClampToEdgeWrapping&&a.wrapT===e.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(t,r.TEXTURE_MAG_FILTER,p(a.magFilter)),r.texParameteri(t,r.TEXTURE_MIN_FILTER,p(a.minFilter)),a.minFilter!==e.NearestFilter&&a.minFilter!==e.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),f=i.get("EXT_texture_filter_anisotropic")){if(a.type===e.FloatType&&null===i.get("OES_texture_float_linear"))return;if(a.type===e.HalfFloatType&&null===(T.isWebGL2||i.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(r.texParameterf(t,f.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,T.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function c(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",h),e.__webglTexture=r.createTexture(),E.memory.textures++)}function v(t,i,n){var E=r.TEXTURE_2D;i.isDataTexture2DArray&&(E=r.TEXTURE_2D_ARRAY),i.isDataTexture3D&&(E=r.TEXTURE_3D),c(t,i),a.activeTexture(r.TEXTURE0+n),a.bindTexture(E,t.__webglTexture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,i.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,i.unpackAlignment);var f=function(t){return!T.isWebGL2&&(t.wrapS!==e.ClampToEdgeWrapping||t.wrapT!==e.ClampToEdgeWrapping||t.minFilter!==e.NearestFilter&&t.minFilter!==e.LinearFilter)}(i)&&!1===l(i.image),o=R(i.image,f,!1,T.maxTextureSize),_=l(o)||T.isWebGL2,s=u.convert(i.format),p=u.convert(i.type),h=m(s,p);D(E,i,_);var b,x=i.mipmaps;if(i.isDepthTexture){if(h=r.DEPTH_COMPONENT,i.type===e.FloatType){if(!T.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");h=r.DEPTH_COMPONENT32F}else T.isWebGL2&&(h=r.DEPTH_COMPONENT16);i.format===e.DepthFormat&&h===r.DEPTH_COMPONENT&&i.type!==e.UnsignedShortType&&i.type!==e.UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=e.UnsignedShortType,p=u.convert(i.type)),i.format===e.DepthStencilFormat&&(h=r.DEPTH_STENCIL,i.type!==e.UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=e.UnsignedInt248Type,p=u.convert(i.type))),a.texImage2D(r.TEXTURE_2D,0,h,o.width,o.height,0,s,p,null)}else if(i.isDataTexture)if(x.length>0&&_){for(var F=0,w=x.length;F<w;F++)b=x[F],a.texImage2D(r.TEXTURE_2D,F,h,b.width,b.height,0,s,p,b.data);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else a.texImage2D(r.TEXTURE_2D,0,h,o.width,o.height,0,s,p,o.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(F=0,w=x.length;F<w;F++)b=x[F],i.format!==e.RGBAFormat&&i.format!==e.RGBFormat?a.getCompressedTextureFormats().indexOf(s)>-1?a.compressedTexImage2D(r.TEXTURE_2D,F,h,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(r.TEXTURE_2D,F,h,b.width,b.height,0,s,p,b.data);t.__maxMipLevel=x.length-1}else if(i.isDataTexture2DArray)a.texImage3D(r.TEXTURE_2D_ARRAY,0,h,o.width,o.height,o.depth,0,s,p,o.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)a.texImage3D(r.TEXTURE_3D,0,h,o.width,o.height,o.depth,0,s,p,o.data),t.__maxMipLevel=0;else if(x.length>0&&_){for(F=0,w=x.length;F<w;F++)b=x[F],a.texImage2D(r.TEXTURE_2D,F,h,s,p,b);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else a.texImage2D(r.TEXTURE_2D,0,h,s,p,o),t.__maxMipLevel=0;d(i,_)&&g(r.TEXTURE_2D,i,o.width,o.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function A(e,t,i,T){var E=u.convert(t.texture.format),f=u.convert(t.texture.type),o=m(E,f);a.texImage2D(T,0,o,t.width,t.height,0,E,f,null),r.bindFramebuffer(r.FRAMEBUFFER,e),r.framebufferTexture2D(r.FRAMEBUFFER,i,T,n.get(t.texture).__webglTexture,0),r.bindFramebuffer(r.FRAMEBUFFER,null)}function L(e,t,i){if(r.bindRenderbuffer(r.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer){if(i){var a=B(t);r.renderbufferStorageMultisample(r.RENDERBUFFER,a,r.DEPTH_COMPONENT16,t.width,t.height)}else r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t.width,t.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e)}else if(t.depthBuffer&&t.stencilBuffer){if(i){a=B(t);r.renderbufferStorageMultisample(r.RENDERBUFFER,a,r.DEPTH24_STENCIL8,t.width,t.height)}else r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,e)}else{var n=m(u.convert(t.texture.format),u.convert(t.texture.type));if(i){a=B(t);r.renderbufferStorageMultisample(r.RENDERBUFFER,a,n,t.width,t.height)}else r.renderbufferStorage(r.RENDERBUFFER,n,t.width,t.height)}r.bindRenderbuffer(r.RENDERBUFFER,null)}function M(t){var i=n.get(t),a=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(r.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),F(i.depthTexture,0);var a=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===e.DepthFormat)r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==e.DepthStencilFormat)throw new Error("Unknown depthTexture format");r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var T=0;T<6;T++)r.bindFramebuffer(r.FRAMEBUFFER,i.__webglFramebuffer[T]),i.__webglDepthbuffer[T]=r.createRenderbuffer(),L(i.__webglDepthbuffer[T],t)}else r.bindFramebuffer(r.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=r.createRenderbuffer(),L(i.__webglDepthbuffer,t);r.bindFramebuffer(r.FRAMEBUFFER,null)}function B(e){return T.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(T.maxSamples,e.samples):0}var P=!1,C=!1;this.allocateTextureUnit=function(){var e=x;return e>=T.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+T.maxTextures),x+=1,e},this.resetTextureUnits=function(){x=0},this.setTexture2D=F,this.setTexture2DArray=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?v(i,e,t):(a.activeTexture(r.TEXTURE0+t),a.bindTexture(r.TEXTURE_2D_ARRAY,i.__webglTexture))},this.setTexture3D=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?v(i,e,t):(a.activeTexture(r.TEXTURE0+t),a.bindTexture(r.TEXTURE_3D,i.__webglTexture))},this.setTextureCube=w,this.setTextureCubeDynamic=U,this.setupRenderTarget=function(e){var t=n.get(e),i=n.get(e.texture);e.addEventListener("dispose",b),i.__webglTexture=r.createTexture(),E.memory.textures++;var f=!0===e.isWebGLRenderTargetCube,o=!0===e.isWebGLMultisampleRenderTarget,_=l(e)||T.isWebGL2;if(f){t.__webglFramebuffer=[];for(var s=0;s<6;s++)t.__webglFramebuffer[s]=r.createFramebuffer()}else if(t.__webglFramebuffer=r.createFramebuffer(),o)if(T.isWebGL2){t.__webglMultisampledFramebuffer=r.createFramebuffer(),t.__webglColorRenderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,t.__webglColorRenderbuffer);var R=m(u.convert(e.texture.format),u.convert(e.texture.type)),p=B(e);r.renderbufferStorageMultisample(r.RENDERBUFFER,p,R,e.width,e.height),r.bindFramebuffer(r.FRAMEBUFFER,t.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,t.__webglColorRenderbuffer),r.bindRenderbuffer(r.RENDERBUFFER,null),e.depthBuffer&&(t.__webglDepthRenderbuffer=r.createRenderbuffer(),L(t.__webglDepthRenderbuffer,e,!0)),r.bindFramebuffer(r.FRAMEBUFFER,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(f){for(a.bindTexture(r.TEXTURE_CUBE_MAP,i.__webglTexture),D(r.TEXTURE_CUBE_MAP,e.texture,_),s=0;s<6;s++)A(t.__webglFramebuffer[s],e,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+s);d(e.texture,_)&&g(r.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),a.bindTexture(r.TEXTURE_CUBE_MAP,null)}else a.bindTexture(r.TEXTURE_2D,i.__webglTexture),D(r.TEXTURE_2D,e.texture,_),A(t.__webglFramebuffer,e,r.COLOR_ATTACHMENT0,r.TEXTURE_2D),d(e.texture,_)&&g(r.TEXTURE_2D,e.texture,e.width,e.height),a.bindTexture(r.TEXTURE_2D,null);e.depthBuffer&&M(e)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(d(t,l(e)||T.isWebGL2)){var i=e.isWebGLRenderTargetCube?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,u=n.get(t).__webglTexture;a.bindTexture(i,u),g(i,t,e.width,e.height),a.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(T.isWebGL2){var t=n.get(e);r.bindFramebuffer(r.READ_FRAMEBUFFER,t.__webglMultisampledFramebuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,t.__webglFramebuffer);var i=e.width,a=e.height,u=r.COLOR_BUFFER_BIT;e.depthBuffer&&(u|=r.DEPTH_BUFFER_BIT),e.stencilBuffer&&(u|=r.STENCIL_BUFFER_BIT),r.blitFramebuffer(0,0,i,a,0,0,i,a,u,r.NEAREST)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===P&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),P=!0),e=e.texture),F(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===C&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),C=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?w(e,t):U(e,t)}}
},{"../../constants.js":"PJkd","../../math/Math.js":"CA9T"}],"W1ay":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLUtils=_;var r=require("../../constants.js");function _(_,t,e){return{convert:function(n){var i;if(n===r.RepeatWrapping)return _.REPEAT;if(n===r.ClampToEdgeWrapping)return _.CLAMP_TO_EDGE;if(n===r.MirroredRepeatWrapping)return _.MIRRORED_REPEAT;if(n===r.NearestFilter)return _.NEAREST;if(n===r.NearestMipmapNearestFilter)return _.NEAREST_MIPMAP_NEAREST;if(n===r.NearestMipmapLinearFilter)return _.NEAREST_MIPMAP_LINEAR;if(n===r.LinearFilter)return _.LINEAR;if(n===r.LinearMipmapNearestFilter)return _.LINEAR_MIPMAP_NEAREST;if(n===r.LinearMipmapLinearFilter)return _.LINEAR_MIPMAP_LINEAR;if(n===r.UnsignedByteType)return _.UNSIGNED_BYTE;if(n===r.UnsignedShort4444Type)return _.UNSIGNED_SHORT_4_4_4_4;if(n===r.UnsignedShort5551Type)return _.UNSIGNED_SHORT_5_5_5_1;if(n===r.UnsignedShort565Type)return _.UNSIGNED_SHORT_5_6_5;if(n===r.ByteType)return _.BYTE;if(n===r.ShortType)return _.SHORT;if(n===r.UnsignedShortType)return _.UNSIGNED_SHORT;if(n===r.IntType)return _.INT;if(n===r.UnsignedIntType)return _.UNSIGNED_INT;if(n===r.FloatType)return _.FLOAT;if(n===r.HalfFloatType){if(e.isWebGL2)return _.HALF_FLOAT;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(n===r.AlphaFormat)return _.ALPHA;if(n===r.RGBFormat)return _.RGB;if(n===r.RGBAFormat)return _.RGBA;if(n===r.LuminanceFormat)return _.LUMINANCE;if(n===r.LuminanceAlphaFormat)return _.LUMINANCE_ALPHA;if(n===r.DepthFormat)return _.DEPTH_COMPONENT;if(n===r.DepthStencilFormat)return _.DEPTH_STENCIL;if(n===r.RedFormat)return _.RED;if(n===r.AddEquation)return _.FUNC_ADD;if(n===r.SubtractEquation)return _.FUNC_SUBTRACT;if(n===r.ReverseSubtractEquation)return _.FUNC_REVERSE_SUBTRACT;if(n===r.ZeroFactor)return _.ZERO;if(n===r.OneFactor)return _.ONE;if(n===r.SrcColorFactor)return _.SRC_COLOR;if(n===r.OneMinusSrcColorFactor)return _.ONE_MINUS_SRC_COLOR;if(n===r.SrcAlphaFactor)return _.SRC_ALPHA;if(n===r.OneMinusSrcAlphaFactor)return _.ONE_MINUS_SRC_ALPHA;if(n===r.DstAlphaFactor)return _.DST_ALPHA;if(n===r.OneMinusDstAlphaFactor)return _.ONE_MINUS_DST_ALPHA;if(n===r.DstColorFactor)return _.DST_COLOR;if(n===r.OneMinusDstColorFactor)return _.ONE_MINUS_DST_COLOR;if(n===r.SrcAlphaSaturateFactor)return _.SRC_ALPHA_SATURATE;if((n===r.RGB_S3TC_DXT1_Format||n===r.RGBA_S3TC_DXT1_Format||n===r.RGBA_S3TC_DXT3_Format||n===r.RGBA_S3TC_DXT5_Format)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(n===r.RGB_S3TC_DXT1_Format)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===r.RGBA_S3TC_DXT1_Format)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===r.RGBA_S3TC_DXT3_Format)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===r.RGBA_S3TC_DXT5_Format)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===r.RGB_PVRTC_4BPPV1_Format||n===r.RGB_PVRTC_2BPPV1_Format||n===r.RGBA_PVRTC_4BPPV1_Format||n===r.RGBA_PVRTC_2BPPV1_Format)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===r.RGB_PVRTC_4BPPV1_Format)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===r.RGB_PVRTC_2BPPV1_Format)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===r.RGBA_PVRTC_4BPPV1_Format)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===r.RGBA_PVRTC_2BPPV1_Format)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===r.RGB_ETC1_Format&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===r.RGBA_ASTC_4x4_Format||n===r.RGBA_ASTC_5x4_Format||n===r.RGBA_ASTC_5x5_Format||n===r.RGBA_ASTC_6x5_Format||n===r.RGBA_ASTC_6x6_Format||n===r.RGBA_ASTC_8x5_Format||n===r.RGBA_ASTC_8x6_Format||n===r.RGBA_ASTC_8x8_Format||n===r.RGBA_ASTC_10x5_Format||n===r.RGBA_ASTC_10x6_Format||n===r.RGBA_ASTC_10x8_Format||n===r.RGBA_ASTC_10x10_Format||n===r.RGBA_ASTC_12x10_Format||n===r.RGBA_ASTC_12x12_Format)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return n;if(n===r.MinEquation||n===r.MaxEquation){if(e.isWebGL2){if(n===r.MinEquation)return _.MIN;if(n===r.MaxEquation)return _.MAX}if(null!==(i=t.get("EXT_blend_minmax"))){if(n===r.MinEquation)return i.MIN_EXT;if(n===r.MaxEquation)return i.MAX_EXT}}if(n===r.UnsignedInt248Type){if(e.isWebGL2)return _.UNSIGNED_INT_24_8;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}
},{"../../constants.js":"PJkd"}],"x8Fm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Group=t;var e=require("../core/Object3D.js");function t(){e.Object3D.call(this),this.type="Group"}t.prototype=Object.assign(Object.create(e.Object3D.prototype),{constructor:t,isGroup:!0});
},{"../core/Object3D.js":"dsa9"}],"rJHh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArrayCamera=r;var e=require("./PerspectiveCamera.js");function r(r){e.PerspectiveCamera.call(this),this.cameras=r||[]}r.prototype=Object.assign(Object.create(e.PerspectiveCamera.prototype),{constructor:r,isArrayCamera:!0});
},{"./PerspectiveCamera.js":"jURk"}],"sxqO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setProjectionFromUnion=o;var e=require("../../math/Vector3.js"),r=new e.Vector3,t=new e.Vector3;function o(e,o,i){r.setFromMatrixPosition(o.matrixWorld),t.setFromMatrixPosition(i.matrixWorld);var a=r.distanceTo(t),n=o.projectionMatrix.elements,s=i.projectionMatrix.elements,c=n[14]/(n[10]-1),m=n[14]/(n[10]+1),l=(n[9]+1)/n[5],x=(n[9]-1)/n[5],p=(n[8]-1)/n[0],d=(s[8]+1)/s[0],u=c*p,v=c*d,j=a/(-p+d),M=j*-p;o.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(M),e.translateZ(j),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var W=c+j,P=m+j,q=u-M,F=v+(a-M),V=l*m/P*W,f=x*m/P*W;e.projectionMatrix.makePerspective(q,F,V,f,W,P)}
},{"../../math/Vector3.js":"QOxd"}],"ChqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebVRManager=d;var e=require("../../core/EventDispatcher.js"),r=require("../../objects/Group.js"),t=require("../../math/Matrix4.js"),i=require("../../math/Vector2.js"),n=require("../../math/Vector3.js"),a=require("../../math/Vector4.js"),o=require("../../math/Quaternion.js"),s=require("../../cameras/ArrayCamera.js"),l=require("../../cameras/PerspectiveCamera.js"),p=require("../webgl/WebGLAnimation.js"),u=require("./WebVRUtils.js");function d(e){var d,c,m=this,v=null,f=null,h=null,y=[],g=new t.Matrix4,w=new t.Matrix4,x=1,b="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(f=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",R,!1));var W=new t.Matrix4,j=new o.Quaternion,V=new n.Vector3,q=new l.PerspectiveCamera;q.viewport=new a.Vector4,q.layers.enable(1);var A=new l.PerspectiveCamera;A.viewport=new a.Vector4,A.layers.enable(2);var M=new s.ArrayCamera([q,A]);function C(){return null!==v&&!0===v.isPresenting}M.layers.enable(1),M.layers.enable(2);var P,F=new i.Vector2;function R(){if(C()){var r=v.getEyeParameters("left");d=2*r.renderWidth*x,c=r.renderHeight*x,P=e.getPixelRatio(),e.getSize(F),e.setDrawingBufferSize(d,c,1),q.viewport.set(0,0,d/2,c),A.viewport.set(d/2,0,d/2,c),T.start(),m.dispatchEvent({type:"sessionstart"})}else m.enabled&&e.setDrawingBufferSize(F.width,F.height,P),T.stop(),m.dispatchEvent({type:"sessionend"})}var E=[];function I(e){for(var r=navigator.getGamepads&&navigator.getGamepads(),t=0,i=0,n=r.length;t<n;t++){var a=r[t];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("HTC Vive Focus")||a.id.startsWith("Spatial Controller"))){if(i===e)return a;i++}}}function D(e,r){null!==r&&4===r.length&&e.set(r[0]*d,r[1]*c,r[2]*d,r[3]*c)}this.enabled=!1,this.getController=function(e){var t=y[e];return void 0===t&&((t=new r.Group).matrixAutoUpdate=!1,t.visible=!1,y[e]=t),t},this.getDevice=function(){return v},this.setDevice=function(e){void 0!==e&&(v=e),T.setContext(e)},this.setFramebufferScaleFactor=function(e){x=e},this.setReferenceSpaceType=function(e){b=e},this.setPoseTarget=function(e){void 0!==e&&(h=e)},this.getCamera=function(e){var r="local-floor"===b?1.6:0;if(!1===C())return e.position.set(0,r,0),e.rotation.set(0,0,0),e;if(v.depthNear=e.near,v.depthFar=e.far,v.getFrameData(f),"local-floor"===b){var t=v.stageParameters;t?g.fromArray(t.sittingToStandingTransform):g.makeTranslation(0,r,0)}var i=f.pose,n=null!==h?h:e;n.matrix.copy(g),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==i.orientation&&(j.fromArray(i.orientation),n.quaternion.multiply(j)),null!==i.position&&(j.setFromRotationMatrix(g),V.fromArray(i.position),V.applyQuaternion(j),n.position.add(V)),n.updateMatrixWorld(),q.near=e.near,A.near=e.near,q.far=e.far,A.far=e.far,q.matrixWorldInverse.fromArray(f.leftViewMatrix),A.matrixWorldInverse.fromArray(f.rightViewMatrix),w.getInverse(g),"local-floor"===b&&(q.matrixWorldInverse.multiply(w),A.matrixWorldInverse.multiply(w));var a=n.parent;null!==a&&(W.getInverse(a.matrixWorld),q.matrixWorldInverse.multiply(W),A.matrixWorldInverse.multiply(W)),q.matrixWorld.getInverse(q.matrixWorldInverse),A.matrixWorld.getInverse(A.matrixWorldInverse),q.projectionMatrix.fromArray(f.leftProjectionMatrix),A.projectionMatrix.fromArray(f.rightProjectionMatrix),(0,u.setProjectionFromUnion)(M,q,A);var o=v.getLayers();if(o.length){var s=o[0];D(q.viewport,s.leftBounds),D(A.viewport,s.rightBounds)}return function(){for(var e=0;e<y.length;e++){var r=y[e],t=I(e);if(void 0!==t&&void 0!==t.pose){if(null===t.pose)return;var i=t.pose;!1===i.hasPosition&&r.position.set(.2,-.6,-.05),null!==i.position&&r.position.fromArray(i.position),null!==i.orientation&&r.quaternion.fromArray(i.orientation),r.matrix.compose(r.position,r.quaternion,r.scale),r.matrix.premultiply(g),r.matrix.decompose(r.position,r.quaternion,r.scale),r.matrixWorldNeedsUpdate=!0,r.visible=!0;var n="Daydream Controller"===t.id?0:1;void 0===E[e]&&(E[e]=!1),E[e]!==t.buttons[n].pressed&&(E[e]=t.buttons[n].pressed,!0===E[e]?r.dispatchEvent({type:"selectstart"}):(r.dispatchEvent({type:"selectend"}),r.dispatchEvent({type:"select"})))}else r.visible=!1}}(),M},this.getStandingMatrix=function(){return g},this.isPresenting=C;var T=new p.WebGLAnimation;this.setAnimationLoop=function(e){T.setAnimationLoop(e),C()&&T.start()},this.submitFrame=function(){C()&&v.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",R)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(d.prototype,e.EventDispatcher.prototype);
},{"../../core/EventDispatcher.js":"0HfK","../../objects/Group.js":"x8Fm","../../math/Matrix4.js":"q1h8","../../math/Vector2.js":"edIZ","../../math/Vector3.js":"QOxd","../../math/Vector4.js":"HLun","../../math/Quaternion.js":"kutO","../../cameras/ArrayCamera.js":"rJHh","../../cameras/PerspectiveCamera.js":"jURk","../webgl/WebGLAnimation.js":"Uuhs","./WebVRUtils.js":"sxqO"}],"gqNv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebXRManager=c;var e=require("../../core/EventDispatcher.js"),r=require("../../objects/Group.js"),t=require("../../math/Matrix4.js"),n=require("../../math/Vector4.js"),a=require("../../cameras/ArrayCamera.js"),i=require("../../cameras/PerspectiveCamera.js"),s=require("../webgl/WebGLAnimation.js"),o=require("./WebVRUtils.js");function c(e,c){var u=this,l=null,p=null,f="local-floor",m=null,d=[],v=[];function h(){return null!==l&&null!==p}var g=new i.PerspectiveCamera;g.layers.enable(1),g.viewport=new n.Vector4;var b=new i.PerspectiveCamera;b.layers.enable(2),b.viewport=new n.Vector4;var x=new a.ArrayCamera([g,b]);function y(e){for(var r=0;r<d.length;r++)v[r]===e.inputSource&&d[r].dispatchEvent({type:e.type})}function w(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),j.stop(),u.dispatchEvent({type:"sessionend"})}function R(e){p=e,j.setContext(l),j.start(),u.dispatchEvent({type:"sessionstart"})}function E(e,r){null===r?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(r.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}x.layers.enable(1),x.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=d[e];return void 0===t&&((t=new r.Group).matrixAutoUpdate=!1,t.visible=!1,d[e]=t),t},this.setFramebufferScaleFactor=function(e){e},this.setReferenceSpaceType=function(e){f=e},this.getSession=function(){return l},this.setSession=function(e){null!==(l=e)&&(l.addEventListener("select",y),l.addEventListener("selectstart",y),l.addEventListener("selectend",y),l.addEventListener("end",w),l.updateRenderState({baseLayer:new XRWebGLLayer(l,c)}),l.requestReferenceSpace(f).then(R),v=l.inputSources,l.addEventListener("inputsourceschange",function(){v=l.inputSources,console.log(v);for(var e=0;e<d.length;e++){d[e].userData.inputSource=v[e]}}))},this.getCamera=function(e){if(h()){var r=e.parent,t=x.cameras;E(x,r);for(var n=0;n<t.length;n++)E(t[n],r);e.matrixWorld.copy(x.matrixWorld);for(var a=e.children,i=(n=0,a.length);n<i;n++)a[n].updateMatrixWorld(!0);return(0,o.setProjectionFromUnion)(x,g,b),x}return e},this.isPresenting=h;var W=null;var j=new s.WebGLAnimation;j.setAnimationLoop(function(r,t){if(null!==(m=t.getViewerPose(p))){var n=m.views,a=l.renderState.baseLayer;e.setFramebuffer(a.framebuffer);for(var i=0;i<n.length;i++){var s=n[i],o=a.getViewport(s),c=s.transform.inverse.matrix,u=x.cameras[i];u.matrix.fromArray(c).getInverse(u.matrix),u.projectionMatrix.fromArray(s.projectionMatrix),u.viewport.set(o.x,o.y,o.width,o.height),0===i&&x.matrix.copy(u.matrix)}}for(i=0;i<d.length;i++){var f=d[i],h=v[i];if(h){var g=t.getPose(h.targetRaySpace,p);if(null!==g){f.matrix.fromArray(g.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.visible=!0;continue}}f.visible=!1}W&&W(r)}),this.setAnimationLoop=function(e){W=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new t.Matrix4},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}Object.assign(c.prototype,e.EventDispatcher.prototype);
},{"../../core/EventDispatcher.js":"0HfK","../../objects/Group.js":"x8Fm","../../math/Matrix4.js":"q1h8","../../math/Vector4.js":"HLun","../../cameras/ArrayCamera.js":"rJHh","../../cameras/PerspectiveCamera.js":"jURk","../webgl/WebGLAnimation.js":"Uuhs","./WebVRUtils.js":"sxqO"}],"B4Az":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLRenderer=C;var e=require("../constants.js"),t=require("../math/Math.js"),a=require("../textures/DataTexture.js"),r=require("../math/Frustum.js"),i=require("../math/Matrix4.js"),n=require("./shaders/ShaderLib.js"),s=require("./shaders/UniformsLib.js"),o=require("./shaders/UniformsUtils.js"),l=require("../math/Vector2.js"),u=require("../math/Vector3.js"),p=require("../math/Vector4.js"),d=require("./webgl/WebGLAnimation.js"),c=require("./webgl/WebGLAttributes.js"),m=require("./webgl/WebGLBackground.js"),f=require("./webgl/WebGLBufferRenderer.js"),v=require("./webgl/WebGLCapabilities.js"),h=require("./webgl/WebGLClipping.js"),g=require("./webgl/WebGLExtensions.js"),b=require("./webgl/WebGLGeometries.js"),M=require("./webgl/WebGLIndexedBufferRenderer.js"),x=require("./webgl/WebGLInfo.js"),w=require("./webgl/WebGLMorphtargets.js"),S=require("./webgl/WebGLObjects.js"),L=require("./webgl/WebGLPrograms.js"),R=require("./webgl/WebGLProperties.js"),E=require("./webgl/WebGLRenderLists.js"),A=require("./webgl/WebGLRenderStates.js"),T=require("./webgl/WebGLShadowMap.js"),y=require("./webgl/WebGLState.js"),_=require("./webgl/WebGLTextures.js"),W=require("./webgl/WebGLUniforms.js"),B=require("./webgl/WebGLUtils.js"),G=require("./webvr/WebVRManager.js"),F=require("./webvr/WebXRManager.js");function C(C){var P=void 0!==(C=C||{}).canvas?C.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),I=void 0!==C.context?C.context:null,U=void 0!==C.alpha&&C.alpha,D=void 0===C.depth||C.depth,V=void 0===C.stencil||C.stencil,j=void 0!==C.antialias&&C.antialias,O=void 0===C.premultipliedAlpha||C.premultipliedAlpha,N=void 0!==C.preserveDrawingBuffer&&C.preserveDrawingBuffer,q=void 0!==C.powerPreference?C.powerPreference:"default",z=void 0!==C.failIfMajorPerformanceCaveat&&C.failIfMajorPerformanceCaveat,k=null,H=null;this.domElement=P,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=e.LinearToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Y,X,J,K,Q,Z,$,ee,te,ae,re,ie,ne,se,oe,le,ue,pe,de=this,ce=!1,me=null,fe=0,ve=0,he=null,ge=null,be=-1,Me={geometry:null,program:null,wireframe:!1},xe=null,we=null,Se=new p.Vector4,Le=new p.Vector4,Re=null,Ee=P.width,Ae=P.height,Te=1,ye=new p.Vector4(0,0,Ee,Ae),_e=new p.Vector4(0,0,Ee,Ae),We=!1,Be=new r.Frustum,Ge=new h.WebGLClipping,Fe=!1,Ce=!1,Pe=new i.Matrix4,Ie=new u.Vector3;function Ue(){return null===he?Te:1}try{var De={alpha:U,depth:D,stencil:V,antialias:j,premultipliedAlpha:O,preserveDrawingBuffer:N,powerPreference:q,failIfMajorPerformanceCaveat:z,xrCompatible:!0};if(P.addEventListener("webglcontextlost",Ne,!1),P.addEventListener("webglcontextrestored",qe,!1),null===(Y=I||P.getContext("webgl",De)||P.getContext("experimental-webgl",De)))throw null!==P.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===Y.getShaderPrecisionFormat&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(tt){throw console.error("THREE.WebGLRenderer: "+tt.message),tt}function Ve(){X=new g.WebGLExtensions(Y),(J=new v.WebGLCapabilities(Y,X,C)).isWebGL2||(X.get("WEBGL_depth_texture"),X.get("OES_texture_float"),X.get("OES_texture_half_float"),X.get("OES_texture_half_float_linear"),X.get("OES_standard_derivatives"),X.get("OES_element_index_uint"),X.get("ANGLE_instanced_arrays")),X.get("OES_texture_float_linear"),pe=new B.WebGLUtils(Y,X,J),(K=new y.WebGLState(Y,X,pe,J)).scissor(Le.copy(_e).multiplyScalar(Te).floor()),K.viewport(Se.copy(ye).multiplyScalar(Te).floor()),Q=new x.WebGLInfo(Y),Z=new R.WebGLProperties,$=new _.WebGLTextures(Y,X,K,Z,J,pe,Q),ee=new c.WebGLAttributes(Y),te=new b.WebGLGeometries(Y,ee,Q),ae=new S.WebGLObjects(te,Q),oe=new w.WebGLMorphtargets(Y),re=new L.WebGLPrograms(de,X,J),ie=new E.WebGLRenderLists,ne=new A.WebGLRenderStates,se=new m.WebGLBackground(de,K,ae,O),le=new f.WebGLBufferRenderer(Y,X,Q,J),ue=new M.WebGLIndexedBufferRenderer(Y,X,Q,J),Q.programs=re.programs,de.capabilities=J,de.extensions=X,de.properties=Z,de.renderLists=ie,de.state=K,de.info=Q}Ve();var je="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new F.WebXRManager(de,Y):new G.WebVRManager(de);this.vr=je;var Oe=new T.WebGLShadowMap(de,ae,J.maxTextureSize);function Ne(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ce=!0}function qe(){console.log("THREE.WebGLRenderer: Context Restored."),ce=!1,Ve()}function ze(e){var t=e.target;t.removeEventListener("dispose",ze),function(e){ke(e),Z.remove(e)}(t)}function ke(e){var t=Z.get(e).program;e.program=void 0,void 0!==t&&re.releaseProgram(t)}this.shadowMap=Oe,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){var e=X.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=X.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Te},this.setPixelRatio=function(e){void 0!==e&&(Te=e,this.setSize(Ee,Ae,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new l.Vector2),e.set(Ee,Ae)},this.setSize=function(e,t,a){je.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ee=e,Ae=t,P.width=Math.floor(e*Te),P.height=Math.floor(t*Te),!1!==a&&(P.style.width=e+"px",P.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new l.Vector2),e.set(Ee*Te,Ae*Te).floor()},this.setDrawingBufferSize=function(e,t,a){Ee=e,Ae=t,Te=a,P.width=Math.floor(e*a),P.height=Math.floor(t*a),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new p.Vector4),e.copy(Se)},this.getViewport=function(e){return e.copy(ye)},this.setViewport=function(e,t,a,r){e.isVector4?ye.set(e.x,e.y,e.z,e.w):ye.set(e,t,a,r),K.viewport(Se.copy(ye).multiplyScalar(Te).floor())},this.getScissor=function(e){return e.copy(_e)},this.setScissor=function(e,t,a,r){e.isVector4?_e.set(e.x,e.y,e.z,e.w):_e.set(e,t,a,r),K.scissor(Le.copy(_e).multiplyScalar(Te).floor())},this.getScissorTest=function(){return We},this.setScissorTest=function(e){K.setScissorTest(We=e)},this.getClearColor=function(){return se.getClearColor()},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(e,t,a){var r=0;(void 0===e||e)&&(r|=Y.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Y.DEPTH_BUFFER_BIT),(void 0===a||a)&&(r|=Y.STENCIL_BUFFER_BIT),Y.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){P.removeEventListener("webglcontextlost",Ne,!1),P.removeEventListener("webglcontextrestored",qe,!1),ie.dispose(),ne.dispose(),Z.dispose(),ae.dispose(),je.dispose(),Ye.stop()},this.renderBufferImmediate=function(e,t){K.initAttributes();var a=Z.get(e);e.hasPositions&&!a.position&&(a.position=Y.createBuffer()),e.hasNormals&&!a.normal&&(a.normal=Y.createBuffer()),e.hasUvs&&!a.uv&&(a.uv=Y.createBuffer()),e.hasColors&&!a.color&&(a.color=Y.createBuffer());var r=t.getAttributes();e.hasPositions&&(Y.bindBuffer(Y.ARRAY_BUFFER,a.position),Y.bufferData(Y.ARRAY_BUFFER,e.positionArray,Y.DYNAMIC_DRAW),K.enableAttribute(r.position),Y.vertexAttribPointer(r.position,3,Y.FLOAT,!1,0,0)),e.hasNormals&&(Y.bindBuffer(Y.ARRAY_BUFFER,a.normal),Y.bufferData(Y.ARRAY_BUFFER,e.normalArray,Y.DYNAMIC_DRAW),K.enableAttribute(r.normal),Y.vertexAttribPointer(r.normal,3,Y.FLOAT,!1,0,0)),e.hasUvs&&(Y.bindBuffer(Y.ARRAY_BUFFER,a.uv),Y.bufferData(Y.ARRAY_BUFFER,e.uvArray,Y.DYNAMIC_DRAW),K.enableAttribute(r.uv),Y.vertexAttribPointer(r.uv,2,Y.FLOAT,!1,0,0)),e.hasColors&&(Y.bindBuffer(Y.ARRAY_BUFFER,a.color),Y.bufferData(Y.ARRAY_BUFFER,e.colorArray,Y.DYNAMIC_DRAW),K.enableAttribute(r.color),Y.vertexAttribPointer(r.color,3,Y.FLOAT,!1,0,0)),K.disableUnusedAttributes(),Y.drawArrays(Y.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(t,a,r,i,n,s){var o=n.isMesh&&n.matrixWorld.determinant()<0;K.setMaterial(i,o);var l=Qe(t,a,i,n),u=!1;Me.geometry===r.id&&Me.program===l.id&&Me.wireframe===(!0===i.wireframe)||(Me.geometry=r.id,Me.program=l.id,Me.wireframe=!0===i.wireframe,u=!0),n.morphTargetInfluences&&(oe.update(n,r,i,l),u=!0);var p,d=r.index,c=r.attributes.position,m=1;!0===i.wireframe&&(d=te.getWireframeAttribute(r),m=2);var f=le;null!==d&&(p=ee.get(d),(f=ue).setIndex(p)),u&&(!function(e,t,a){if(a&&a.isInstancedBufferGeometry&&!J.isWebGL2&&null===X.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");K.initAttributes();var r=a.attributes,i=t.getAttributes(),n=e.defaultAttributeValues;for(var s in i){var o=i[s];if(o>=0){var l=r[s];if(void 0!==l){var u=l.normalized,p=l.itemSize,d=ee.get(l);if(void 0===d)continue;var c=d.buffer,m=d.type,f=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var v=l.data,h=v.stride,g=l.offset;v&&v.isInstancedInterleavedBuffer?(K.enableAttributeAndDivisor(o,v.meshPerAttribute),void 0===a.maxInstancedCount&&(a.maxInstancedCount=v.meshPerAttribute*v.count)):K.enableAttribute(o),Y.bindBuffer(Y.ARRAY_BUFFER,c),Y.vertexAttribPointer(o,p,m,u,h*f,g*f)}else l.isInstancedBufferAttribute?(K.enableAttributeAndDivisor(o,l.meshPerAttribute),void 0===a.maxInstancedCount&&(a.maxInstancedCount=l.meshPerAttribute*l.count)):K.enableAttribute(o),Y.bindBuffer(Y.ARRAY_BUFFER,c),Y.vertexAttribPointer(o,p,m,u,0,0)}else if(void 0!==n){var b=n[s];if(void 0!==b)switch(b.length){case 2:Y.vertexAttrib2fv(o,b);break;case 3:Y.vertexAttrib3fv(o,b);break;case 4:Y.vertexAttrib4fv(o,b);break;default:Y.vertexAttrib1fv(o,b)}}}}K.disableUnusedAttributes()}(i,l,r),null!==d&&Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,p.buffer));var v=1/0;null!==d?v=d.count:void 0!==c&&(v=c.count);var h=r.drawRange.start*m,g=r.drawRange.count*m,b=null!==s?s.start*m:0,M=null!==s?s.count*m:1/0,x=Math.max(h,b),w=Math.min(v,h+g,b+M)-1,S=Math.max(0,w-x+1);if(0!==S){if(n.isMesh)if(!0===i.wireframe)K.setLineWidth(i.wireframeLinewidth*Ue()),f.setMode(Y.LINES);else switch(n.drawMode){case e.TrianglesDrawMode:f.setMode(Y.TRIANGLES);break;case e.TriangleStripDrawMode:f.setMode(Y.TRIANGLE_STRIP);break;case e.TriangleFanDrawMode:f.setMode(Y.TRIANGLE_FAN)}else if(n.isLine){var L=i.linewidth;void 0===L&&(L=1),K.setLineWidth(L*Ue()),n.isLineSegments?f.setMode(Y.LINES):n.isLineLoop?f.setMode(Y.LINE_LOOP):f.setMode(Y.LINE_STRIP)}else n.isPoints?f.setMode(Y.POINTS):n.isSprite&&f.setMode(Y.TRIANGLES);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&f.renderInstances(r,x,S):f.render(x,S)}},this.compile=function(e,t){(H=ne.get(e,t)).init(),e.traverse(function(e){e.isLight&&(H.pushLight(e),e.castShadow&&H.pushShadow(e))}),H.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var a=0;a<t.material.length;a++)Ke(t.material[a],e.fog,t);else Ke(t.material,e.fog,t)})};var He=null;var Ye=new d.WebGLAnimation;function Xe(e,t,a,r){for(var i=0,n=e.length;i<n;i++){var s=e[i],o=s.object,l=s.geometry,u=void 0===r?s.material:r,p=s.group;if(a.isArrayCamera){we=a;for(var d=a.cameras,c=0,m=d.length;c<m;c++){var f=d[c];o.layers.test(f.layers)&&(K.viewport(Se.copy(f.viewport)),H.setupLights(f),Je(o,t,f,l,u,p))}}else we=null,Je(o,t,a,l,u,p)}}function Je(e,t,a,r,i,n){if(e.onBeforeRender(de,t,a,r,i,n),H=ne.get(t,we||a),e.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){K.setMaterial(i);var s=Qe(a,t.fog,i,e);Me.geometry=null,Me.program=null,Me.wireframe=!1,function(e,t){e.render(function(e){de.renderBufferImmediate(e,t)})}(e,s)}else de.renderBufferDirect(a,t.fog,r,i,e,n);e.onAfterRender(de,t,a,r,i,n),H=ne.get(t,we||a)}function Ke(e,t,a){var r=Z.get(e),i=H.state.lights,s=H.state.shadowsArray,l=i.state.version,u=re.getParameters(e,i.state,s,t,Ge.numPlanes,Ge.numIntersection,a),p=re.getProgramCode(e,u),d=r.program,c=!0;if(void 0===d)e.addEventListener("dispose",ze);else if(d.code!==p)ke(e);else if(r.lightsStateVersion!==l)r.lightsStateVersion=l,c=!1;else{if(void 0!==u.shaderID)return;c=!1}if(c){if(u.shaderID){var m=n.ShaderLib[u.shaderID];r.shader={name:e.type,uniforms:(0,o.cloneUniforms)(m.uniforms),vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,de),p=re.getProgramCode(e,u),d=re.acquireProgram(e,r.shader,u,p),r.program=d,e.program=d}var f=d.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var v=0;v<de.maxMorphTargets;v++)f["morphTarget"+v]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(v=0;v<de.maxMorphNormals;v++)f["morphNormal"+v]>=0&&e.numSupportedMorphNormals++}var h=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=Ge.numPlanes,r.numIntersection=Ge.numIntersection,h.clippingPlanes=Ge.uniform),r.fog=t,r.lightsStateVersion=l,e.lights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.spotLights.value=i.state.spot,h.rectAreaLights.value=i.state.rectArea,h.pointLights.value=i.state.point,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),b=W.WebGLUniforms.seqWithValue(g.seq,h);r.uniformsList=b}function Qe(r,i,n,o){$.resetTextureUnits();var l=Z.get(n),u=H.state.lights;if(Fe&&(Ce||r!==xe)){var p=r===xe&&n.id===be;Ge.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,r,l,p)}!1===n.needsUpdate&&(void 0===l.program?n.needsUpdate=!0:n.fog&&l.fog!==i?n.needsUpdate=!0:n.lights&&l.lightsStateVersion!==u.state.version?n.needsUpdate=!0:void 0===l.numClippingPlanes||l.numClippingPlanes===Ge.numPlanes&&l.numIntersection===Ge.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(Ke(n,i,o),n.needsUpdate=!1);var d,c,m=!1,f=!1,v=!1,h=l.program,g=h.getUniforms(),b=l.shader.uniforms;if(K.useProgram(h.program)&&(m=!0,f=!0,v=!0),n.id!==be&&(be=n.id,f=!0),m||xe!==r){if(g.setValue(Y,"projectionMatrix",r.projectionMatrix),J.logarithmicDepthBuffer&&g.setValue(Y,"logDepthBufFC",2/(Math.log(r.far+1)/Math.LN2)),xe!==r&&(xe=r,f=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var M=g.map.cameraPosition;void 0!==M&&M.setValue(Y,Ie.setFromMatrixPosition(r.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&g.setValue(Y,"viewMatrix",r.matrixWorldInverse)}if(n.skinning){g.setOptional(Y,o,"bindMatrix"),g.setOptional(Y,o,"bindMatrixInverse");var x=o.skeleton;if(x){var w=x.bones;if(J.floatVertexTextures){if(void 0===x.boneTexture){var S=Math.sqrt(4*w.length);S=t._Math.ceilPowerOfTwo(S),S=Math.max(S,4);var L=new Float32Array(S*S*4);L.set(x.boneMatrices);var R=new a.DataTexture(L,S,S,e.RGBAFormat,e.FloatType);R.needsUpdate=!0,x.boneMatrices=L,x.boneTexture=R,x.boneTextureSize=S}g.setValue(Y,"boneTexture",x.boneTexture,$),g.setValue(Y,"boneTextureSize",x.boneTextureSize)}else g.setOptional(Y,x,"boneMatrices")}}return f&&(g.setValue(Y,"toneMappingExposure",de.toneMappingExposure),g.setValue(Y,"toneMappingWhitePoint",de.toneMappingWhitePoint),n.lights&&(c=v,(d=b).ambientLightColor.needsUpdate=c,d.lightProbe.needsUpdate=c,d.directionalLights.needsUpdate=c,d.pointLights.needsUpdate=c,d.spotLights.needsUpdate=c,d.rectAreaLights.needsUpdate=c,d.hemisphereLights.needsUpdate=c),i&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(b,i),n.isMeshBasicMaterial?Ze(b,n):n.isMeshLambertMaterial?(Ze(b,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(b,n)):n.isMeshPhongMaterial?(Ze(b,n),n.isMeshToonMaterial?function(e,t){$e(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(b,n):$e(b,n)):n.isMeshStandardMaterial?(Ze(b,n),n.isMeshPhysicalMaterial?function(t,a){et(t,a),t.reflectivity.value=a.reflectivity,t.clearcoat.value=a.clearcoat,t.clearcoatRoughness.value=a.clearcoatRoughness,a.sheen&&t.sheen.value.copy(a.sheen);a.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(a.clearcoatNormalScale),t.clearcoatNormalMap.value=a.clearcoatNormalMap,a.side===e.BackSide&&t.clearcoatNormalScale.value.negate());t.transparency.value=a.transparency}(b,n):et(b,n)):n.isMeshMatcapMaterial?(Ze(b,n),function(t,a){a.matcap&&(t.matcap.value=a.matcap);a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===e.BackSide&&(t.bumpScale.value*=-1));a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===e.BackSide&&t.normalScale.value.negate());a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias)}(b,n)):n.isMeshDepthMaterial?(Ze(b,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(b,n)):n.isMeshDistanceMaterial?(Ze(b,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(b,n)):n.isMeshNormalMaterial?(Ze(b,n),function(t,a){a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===e.BackSide&&(t.bumpScale.value*=-1));a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===e.BackSide&&t.normalScale.value.negate());a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias)}(b,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(b,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(b,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Te,e.scale.value=.5*Ae,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(b,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(b,n):n.isShadowMaterial&&(b.color.value.copy(n.color),b.opacity.value=n.opacity),void 0!==b.ltc_1&&(b.ltc_1.value=s.UniformsLib.LTC_1),void 0!==b.ltc_2&&(b.ltc_2.value=s.UniformsLib.LTC_2),W.WebGLUniforms.upload(Y,l.uniformsList,b,$)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(W.WebGLUniforms.upload(Y,l.uniformsList,b,$),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(Y,"center",o.center),g.setValue(Y,"modelViewMatrix",o.modelViewMatrix),g.setValue(Y,"normalMatrix",o.normalMatrix),g.setValue(Y,"modelMatrix",o.matrixWorld),h}function Ze(e,t){var a;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=Z.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?a=t.map:t.specularMap?a=t.specularMap:t.displacementMap?a=t.displacementMap:t.normalMap?a=t.normalMap:t.bumpMap?a=t.bumpMap:t.roughnessMap?a=t.roughnessMap:t.metalnessMap?a=t.metalnessMap:t.alphaMap?a=t.alphaMap:t.emissiveMap&&(a=t.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}function $e(t,a){t.specular.value.copy(a.specular),t.shininess.value=Math.max(a.shininess,1e-4),a.emissiveMap&&(t.emissiveMap.value=a.emissiveMap),a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===e.BackSide&&(t.bumpScale.value*=-1)),a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===e.BackSide&&t.normalScale.value.negate()),a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias)}function et(t,a){t.roughness.value=a.roughness,t.metalness.value=a.metalness,a.roughnessMap&&(t.roughnessMap.value=a.roughnessMap),a.metalnessMap&&(t.metalnessMap.value=a.metalnessMap),a.emissiveMap&&(t.emissiveMap.value=a.emissiveMap),a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===e.BackSide&&(t.bumpScale.value*=-1)),a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===e.BackSide&&t.normalScale.value.negate()),a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias),a.envMap&&(t.envMapIntensity.value=a.envMapIntensity)}Ye.setAnimationLoop(function(e){je.isPresenting()||He&&He(e)}),"undefined"!=typeof window&&Ye.setContext(window),this.setAnimationLoop=function(e){He=e,je.setAnimationLoop(e),Ye.start()},this.render=function(e,t){var a,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),a=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!ce){Me.geometry=null,Me.program=null,Me.wireframe=!1,be=-1,xe=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),je.enabled&&(t=je.getCamera(t)),(H=ne.get(e,t)).init(),e.onBeforeRender(de,e,t,a||he),Pe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Be.setFromMatrix(Pe),Ce=this.localClippingEnabled,Fe=Ge.init(this.clippingPlanes,Ce,t),(k=ie.get(e,t)).init(),function e(t,a,r,i){if(!1===t.visible)return;var n=t.layers.test(a.layers);if(n)if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(a);else if(t.isLight)H.pushLight(t),t.castShadow&&H.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Be.intersectsSprite(t)){i&&Ie.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Pe);var s=ae.update(t),o=t.material;o.visible&&k.push(t,s,o,r,Ie.z,null)}}else if(t.isImmediateRenderObject)i&&Ie.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Pe),k.push(t,null,t.material,r,Ie.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Be.intersectsObject(t))){i&&Ie.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Pe);var s=ae.update(t),o=t.material;if(Array.isArray(o))for(var l=s.groups,u=0,p=l.length;u<p;u++){var d=l[u],c=o[d.materialIndex];c&&c.visible&&k.push(t,s,c,r,Ie.z,d)}else o.visible&&k.push(t,s,o,r,Ie.z,null)}var m=t.children;for(var u=0,p=m.length;u<p;u++)e(m[u],a,r,i)}(e,t,0,de.sortObjects),!0===de.sortObjects&&k.sort(),Fe&&Ge.beginShadows();var i=H.state.shadowsArray;Oe.render(i,e,t),H.setupLights(t),Fe&&Ge.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==a&&this.setRenderTarget(a),se.render(k,e,t,r);var n=k.opaque,s=k.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;n.length&&Xe(n,e,t,o),s.length&&Xe(s,e,t,o)}else n.length&&Xe(n,e,t),s.length&&Xe(s,e,t);e.onAfterRender(de,e,t),null!==he&&($.updateRenderTargetMipmap(he),$.updateMultisampleRenderTarget(he)),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1),je.enabled&&je.submitFrame(),k=null,H=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){me!==e&&Y.bindFramebuffer(Y.FRAMEBUFFER,e),me=e},this.getActiveCubeFace=function(){return fe},this.getActiveMipmapLevel=function(){return ve},this.getRenderTarget=function(){return he},this.setRenderTarget=function(e,t,a){he=e,fe=t,ve=a,e&&void 0===Z.get(e).__webglFramebuffer&&$.setupRenderTarget(e);var r=me,i=!1;if(e){var n=Z.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=n[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?Z.get(e).__webglMultisampledFramebuffer:n,Se.copy(e.viewport),Le.copy(e.scissor),Re=e.scissorTest}else Se.copy(ye).multiplyScalar(Te).floor(),Le.copy(_e).multiplyScalar(Te).floor(),Re=We;if(ge!==r&&(Y.bindFramebuffer(Y.FRAMEBUFFER,r),ge=r),K.viewport(Se),K.scissor(Le),K.setScissorTest(Re),i){var s=Z.get(e.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+(t||0),s.__webglTexture,a||0)}},this.readRenderTargetPixels=function(t,a,r,i,n,s,o){if(t&&t.isWebGLRenderTarget){var l=Z.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(l=l[o]),l){var u=!1;l!==ge&&(Y.bindFramebuffer(Y.FRAMEBUFFER,l),u=!0);try{var p=t.texture,d=p.format,c=p.type;if(d!==e.RGBAFormat&&pe.convert(d)!==Y.getParameter(Y.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===e.UnsignedByteType||pe.convert(c)===Y.getParameter(Y.IMPLEMENTATION_COLOR_READ_TYPE)||c===e.FloatType&&(J.isWebGL2||X.get("OES_texture_float")||X.get("WEBGL_color_buffer_float"))||c===e.HalfFloatType&&(J.isWebGL2?X.get("EXT_color_buffer_float"):X.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Y.checkFramebufferStatus(Y.FRAMEBUFFER)===Y.FRAMEBUFFER_COMPLETE?a>=0&&a<=t.width-i&&r>=0&&r<=t.height-n&&Y.readPixels(a,r,i,n,pe.convert(d),pe.convert(c),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&Y.bindFramebuffer(Y.FRAMEBUFFER,ge)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,a){var r=t.image.width,i=t.image.height,n=pe.convert(t.format);$.setTexture2D(t,0),Y.copyTexImage2D(Y.TEXTURE_2D,a||0,n,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,a,r){var i=t.image.width,n=t.image.height,s=pe.convert(a.format),o=pe.convert(a.type);$.setTexture2D(a,0),t.isDataTexture?Y.texSubImage2D(Y.TEXTURE_2D,r||0,e.x,e.y,i,n,s,o,t.image.data):Y.texSubImage2D(Y.TEXTURE_2D,r||0,e.x,e.y,s,o,t.image)},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}
},{"../constants.js":"PJkd","../math/Math.js":"CA9T","../textures/DataTexture.js":"5Lyc","../math/Frustum.js":"I8NQ","../math/Matrix4.js":"q1h8","./shaders/ShaderLib.js":"o/qe","./shaders/UniformsLib.js":"aGw5","./shaders/UniformsUtils.js":"eVv2","../math/Vector2.js":"edIZ","../math/Vector3.js":"QOxd","../math/Vector4.js":"HLun","./webgl/WebGLAnimation.js":"Uuhs","./webgl/WebGLAttributes.js":"lW5+","./webgl/WebGLBackground.js":"E8A8","./webgl/WebGLBufferRenderer.js":"Iqef","./webgl/WebGLCapabilities.js":"FA/Z","./webgl/WebGLClipping.js":"6qO8","./webgl/WebGLExtensions.js":"VxPD","./webgl/WebGLGeometries.js":"vRRJ","./webgl/WebGLIndexedBufferRenderer.js":"PeKP","./webgl/WebGLInfo.js":"RYHA","./webgl/WebGLMorphtargets.js":"R7os","./webgl/WebGLObjects.js":"GQCN","./webgl/WebGLPrograms.js":"FMQY","./webgl/WebGLProperties.js":"/iBV","./webgl/WebGLRenderLists.js":"BSiz","./webgl/WebGLRenderStates.js":"NXrc","./webgl/WebGLShadowMap.js":"ZSzd","./webgl/WebGLState.js":"WDO0","./webgl/WebGLTextures.js":"/R8J","./webgl/WebGLUniforms.js":"Emi0","./webgl/WebGLUtils.js":"W1ay","./webvr/WebVRManager.js":"ChqW","./webvr/WebXRManager.js":"gqNv"}],"Dzjg":[function(require,module,exports) {
module.exports="earthbump1k.c854e76c.jpg";
},{}],"yfMn":[function(require,module,exports) {
module.exports="earthbump1k.4b12dbf8.webp";
},{}],"vYOl":[function(require,module,exports) {
module.exports="earthspec1k.90ed68f9.jpg";
},{}],"Rw1E":[function(require,module,exports) {
module.exports="earthspec1k.c1d4cff1.webp";
},{}],"A3bX":[function(require,module,exports) {
module.exports="map-marker.d6eb9365.png";
},{}],"xKbC":[function(require,module,exports) {
module.exports="world.200401.b7f5cd57.jpg";
},{}],"/Wl+":[function(require,module,exports) {
module.exports="world.200401.93f06126.webp";
},{}],"0DYj":[function(require,module,exports) {
module.exports="world.200402.89f5785c.jpg";
},{}],"EEZB":[function(require,module,exports) {
module.exports="world.200402.8f010d16.webp";
},{}],"Ojo2":[function(require,module,exports) {
module.exports="world.200403.d52db88e.jpg";
},{}],"nH7G":[function(require,module,exports) {
module.exports="world.200403.99c1497e.webp";
},{}],"9jvQ":[function(require,module,exports) {
module.exports="world.200404.1dd828a8.jpg";
},{}],"Xz9q":[function(require,module,exports) {
module.exports="world.200404.f0a9d7dd.webp";
},{}],"iyFE":[function(require,module,exports) {
module.exports="world.200405.d14ac7c2.jpg";
},{}],"C91g":[function(require,module,exports) {
module.exports="world.200405.1a932d57.webp";
},{}],"+/so":[function(require,module,exports) {
module.exports="world.200406.317aeb09.jpg";
},{}],"oFSb":[function(require,module,exports) {
module.exports="world.200406.7dd9edfd.webp";
},{}],"Xmef":[function(require,module,exports) {
module.exports="world.200407.7aaa6835.jpg";
},{}],"iD7I":[function(require,module,exports) {
module.exports="world.200407.9eb1bbfd.webp";
},{}],"dNO6":[function(require,module,exports) {
module.exports="world.200408.694049bc.jpg";
},{}],"LU0/":[function(require,module,exports) {
module.exports="world.200408.c99feb8b.webp";
},{}],"17J5":[function(require,module,exports) {
module.exports="world.200409.6e5a8331.jpg";
},{}],"yPqa":[function(require,module,exports) {
module.exports="world.200409.0a5cc522.webp";
},{}],"ztV7":[function(require,module,exports) {
module.exports="world.200410.0dc6ac13.jpg";
},{}],"oArV":[function(require,module,exports) {
module.exports="world.200410.fcc5bf2a.webp";
},{}],"IvyG":[function(require,module,exports) {
module.exports="world.200411.34bfb639.jpg";
},{}],"QDIc":[function(require,module,exports) {
module.exports="world.200411.adea6d57.webp";
},{}],"vKr+":[function(require,module,exports) {
module.exports="world.200412.6fd05f57.jpg";
},{}],"HlwF":[function(require,module,exports) {
module.exports="world.200412.43dc5b23.webp";
},{}],"rDc8":[function(require,module,exports) {
module.exports={earthbump1k:{jpg:require("./earthbump1k.jpg"),webp:require("./earthbump1k.webp")},earthspec1k:{jpg:require("./earthspec1k.jpg"),webp:require("./earthspec1k.webp")},"map-marker":{png:require("./map-marker.png")},world:{"200401.jpg":require("./world.200401.jpg"),"200401.webp":require("./world.200401.webp"),"200402.jpg":require("./world.200402.jpg"),"200402.webp":require("./world.200402.webp"),"200403.jpg":require("./world.200403.jpg"),"200403.webp":require("./world.200403.webp"),"200404.jpg":require("./world.200404.jpg"),"200404.webp":require("./world.200404.webp"),"200405.jpg":require("./world.200405.jpg"),"200405.webp":require("./world.200405.webp"),"200406.jpg":require("./world.200406.jpg"),"200406.webp":require("./world.200406.webp"),"200407.jpg":require("./world.200407.jpg"),"200407.webp":require("./world.200407.webp"),"200408.jpg":require("./world.200408.jpg"),"200408.webp":require("./world.200408.webp"),"200409.jpg":require("./world.200409.jpg"),"200409.webp":require("./world.200409.webp"),"200410.jpg":require("./world.200410.jpg"),"200410.webp":require("./world.200410.webp"),"200411.jpg":require("./world.200411.jpg"),"200411.webp":require("./world.200411.webp"),"200412.jpg":require("./world.200412.jpg"),"200412.webp":require("./world.200412.webp")}};
},{"./earthbump1k.jpg":"Dzjg","./earthbump1k.webp":"yfMn","./earthspec1k.jpg":"vYOl","./earthspec1k.webp":"Rw1E","./map-marker.png":"A3bX","./world.200401.jpg":"xKbC","./world.200401.webp":"/Wl+","./world.200402.jpg":"0DYj","./world.200402.webp":"EEZB","./world.200403.jpg":"Ojo2","./world.200403.webp":"nH7G","./world.200404.jpg":"9jvQ","./world.200404.webp":"Xz9q","./world.200405.jpg":"iyFE","./world.200405.webp":"C91g","./world.200406.jpg":"+/so","./world.200406.webp":"oFSb","./world.200407.jpg":"Xmef","./world.200407.webp":"iD7I","./world.200408.jpg":"dNO6","./world.200408.webp":"LU0/","./world.200409.jpg":"17J5","./world.200409.webp":"yPqa","./world.200410.jpg":"ztV7","./world.200410.webp":"oArV","./world.200411.jpg":"IvyG","./world.200411.webp":"QDIc","./world.200412.jpg":"vKr+","./world.200412.webp":"HlwF"}],"tOna":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("three/src/lights/AmbientLight"),t=require("three/src/textures/CanvasTexture"),a=require("three/src/math/Color"),i=require("three/src/lights/DirectionalLight"),n=require("three/src/loaders/ImageLoader"),r=require("three/src/objects/Mesh"),s=require("three/src/materials/MeshPhongMaterial"),o=require("three/src/cameras/PerspectiveCamera"),c=require("three/src/scenes/Scene"),h=require("three/src/geometries/SphereGeometry"),u=require("three/src/math/Spherical"),l=require("three/src/objects/Sprite"),d=require("three/src/materials/SpriteMaterial"),m=require("three/src/math/Vector3"),v=require("three/src/renderers/WebGLRenderer"),f=p(require("./images/*.*"));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,a){return t&&w(e.prototype,t),a&&w(e,a),e}var M=.7,y=2,L={latitude:40.4167754,longitude:-3.7037902},A=function(){function p(e){g(this,p),this.cameraLong=L.longitude,this.loaded=0,this.container=e,this.canvas=this.container.querySelector("canvas"),this.scene=null,this.camera=null,this.light=null,this.renderer=null,this.distanceToEdge=null,this.dots=[],this.loader=new n.ImageLoader,this.spinning=!0,this.resizeCanvas(),this.init(),this.animate=this.animate.bind(this)}return b(p,[{key:"init",value:function(){var t=this,a=this.scene=new c.Scene,n=this.camera=new o.PerspectiveCamera(45,1,.1,100),u=new r.Mesh(new h.SphereBufferGeometry(M,32,32),new s.MeshPhongMaterial);a.add(u),a.add(new e.AmbientLight(9474192));var l=this.light=new i.DirectionalLight(5197647,1);a.add(l),this.moveSun(),k(n.position,y,L.latitude,L.longitude),n.lookAt(0,0,0),this.distanceToEdge=n.position.distanceTo(new m.Vector3(0,M,0));var d=this.renderer=new v.WebGLRenderer({canvas:this.canvas,antialias:!0});d.setPixelRatio(window.devicePixelRatio),d.setSize(this.canvas.offsetWidth,this.canvas.offsetHeight),q(function(e){t.isWebp=e,t.loadTextures(u)})}},{key:"loadTextures",value:function(e){var i=this,n=(new Date).getMonth()+1,r=n<10?"0":"",s=this.isWebp?"webp":"jpg",o="2004".concat(r).concat(n,".").concat(s);this.loader.load(f.default.world["".concat(o)],function(a){e.material.map=new t.CanvasTexture(a),i.load()}),this.loader.load(f.default.earthbump1k[s],function(a){e.material.bumpMap=new t.CanvasTexture(a),e.material.bumpScale=.02,i.load()}),this.loader.load(f.default.earthspec1k[s],function(n){e.material.specularMap=new t.CanvasTexture(n),e.material.specular=new a.Color("grey"),i.load()})}},{key:"moveSun",value:function(){var e=new Date,t=new Date(e.getFullYear()+"-06-21 00:00:00"),a=(e-t)/864e5,i=23.44*Math.cos(2*Math.PI*a/365.26),n=180-15*(e.getUTCHours()+e.getMinutes()/60);k(this.light.position,y,i,n)}},{key:"animate",value:function(){this.spinning&&(k(this.camera.position,y,L.latitude,this.cameraLong),this.camera.lookAt(0,0,0),this.cameraLong-=.1,this.render(),requestAnimationFrame(this.animate))}},{key:"render",value:function(){var e=this;this.dots.forEach(function(t){var a=e.camera.position.distanceTo(t.position);t.material.depthTest=a>e.distanceToEdge}),this.renderer.render(this.scene,this.camera)}},{key:"load",value:function(){this.loaded++,this.loaded<4||(this.container.classList.add("loaded"),this.attach(),this.animate())}},{key:"addMembers",value:function(e){var a=this,i={};this.dots=e.filter(function(e){return!!e.location}).filter(function(e){return!i[e.location.name]&&(i[e.location.name]=!0,!0)}).map(function(e){var t=new l.Sprite(new d.SpriteMaterial);t.material.depthTest=!1,t.scale.set(.05,.05,1),t.center.set(.5,0);var i=e.location;return k(t.position,M,i.lat,i.long),a.scene.add(t),t}),this.loader.load(f.default["map-marker"].png,function(e){a.dots.forEach(function(a){a.material.map=new t.CanvasTexture(e)}),a.load()})}},{key:"attach",value:function(){var e,t=this;this.canvas.addEventListener("mouseover",function(){t.spinning=!1}),this.canvas.addEventListener("mouseout",function(){t.spinning=!0,t.animate()});var a=function(a){return t.move(e,[a.clientX,a.clientY])},i=function e(){t.container.classList.remove("is-grabbing"),document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",e,!1)};this.canvas.addEventListener("mousedown",function(n){0===n.button&&(e=[n.clientX,n.clientY],n.preventDefault(),document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",i,!1),t.container.classList.add("is-grabbing"))}),window.addEventListener("resize",function(){t.resizeCanvas(),t.renderer.setSize(t.canvas.offsetWidth,t.canvas.offsetHeight)})}},{key:"move",value:function(e,t){var a=2*Math.PI,i=10*this.canvas.offsetHeight,n=new u.Spherical;n.setFromVector3(this.camera.position),n.theta-=a*(t[0]-e[0])/i,n.phi-=a*(t[1]-e[1])/i,n.makeSafe(),this.camera.position.setFromSpherical(n),this.camera.lookAt(0,0,0),this.render()}},{key:"resizeCanvas",value:function(){var e=this.container.clientWidth,t=this.container.clientHeight,a=e<t?e:t;this.canvas.style.width=a+"px",this.canvas.style.height=a+"px",this.canvas.style.marginTop=0-a/2+"px",this.canvas.style.marginLeft=0-a/2+"px"}}]),p}();function k(e,t,a,i){var n=(90-a)*(Math.PI/180),r=(i+180)*(Math.PI/180);e.x=-t*Math.sin(n)*Math.cos(r),e.z=t*Math.sin(n)*Math.sin(r),e.y=t*Math.cos(n)}function q(e){var t=new Image;t.onload=function(){return e(t.width>0&&t.height>0)},t.onerror=function(){return e(!1)},t.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="}var x=A;exports.default=x;
},{"three/src/lights/AmbientLight":"wHaw","three/src/textures/CanvasTexture":"/7R4","three/src/math/Color":"w/VZ","three/src/lights/DirectionalLight":"xqJe","three/src/loaders/ImageLoader":"z4ue","three/src/objects/Mesh":"+ZOy","three/src/materials/MeshPhongMaterial":"vZKu","three/src/cameras/PerspectiveCamera":"jURk","three/src/scenes/Scene":"XR51","three/src/geometries/SphereGeometry":"PYAj","three/src/math/Spherical":"l3zp","three/src/objects/Sprite":"P8mW","three/src/materials/SpriteMaterial":"mo1A","three/src/math/Vector3":"QOxd","three/src/renderers/WebGLRenderer":"B4Az","./images/*.*":"rDc8"}]},{},["tOna"], null)
//# sourceMappingURL=earth.5039e30d.js.map